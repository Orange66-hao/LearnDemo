
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=9" > </meta>
<title>嘉捷惠-后台管理</title>
<script type="text/javascript" src="/adminthemes/new/js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="/adminthemes/new/js/jquery-form-2.33.js"></script>

<link rel="stylesheet" type="text/css" href="/adminthemes/new/js/easy-ui/themes/gray/easyui.css"/>    
<link rel="stylesheet" type="text/css" href="/adminthemes/new/js/easy-ui/themes/icon.css"/>  
<script type="text/javascript" src="/adminthemes/new/js/easy-ui/jquery.easyui.min.js"></script>
<script type="text/javascript" src="/adminthemes/new/js/easy-ui/easyui-lang-zh_CN.js"></script>
<script type="text/javascript" src="/adminthemes/new/js/jquery.blockUI.js"></script>
<script type="text/javascript" src="/adminthemes/new/js/jquery.loading.js"></script>
<link href="/adminthemes/new/css/main.css" rel="stylesheet" type="text/css" />
<link href="/adminthemes/new/css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/adminthemes/new/js/ajaxupload.3.9.js"></script>
<script type="text/javascript" src="/editor/ckeditor362/ckeditor.js"></script>
</head>
<body>
<div class="main" style="background-color: white;">
	<div class="easyui-panel" style="border-style: none;">
		<form id="editForm" method="post" class="validate">
			<table>
				<tr style="display:none">
					<th>id</th>
					<td><input class="input_text easyui-validatebox" type="text" 
						name="id" data-options="required:true" value="${item.id}" ></input>
					</td>
				</tr>
				<tr>
					<th>品牌</th>
					<td><input class="easyui-combobox combo" type="text" s_value="${item.productEntity.productBrandEntity.id}"
						name="brandId" id="brandId" data-options="url:'/admin/basedata/brand/get_brand_names.jspx',method:'get',valueField:'id',
						textField:'text', width:300, onLoadSuccess:function(){loadSec('#brandId');}" ></input>
					</td>
				</tr>
				<tr>
					<th>商品型号</th>
					<td><input class="input_text easyui-validatebox" type="text" value="${item.productEntity.proNo}"
						name="proNo" data-options="required:true" ></input>
					</td>
				</tr>
				<tr>
					<th>商品分类</th>
					<td><input class="input_text" type="text" value="${item.productEntity.cid}"
						name="cid"  ></input>
					</td>
				</tr>
				<tr>
					<th>商品类型</th>
					<td><input class="easyui-combobox" data-options="url:'/admin/basedata/producttype/dataJson.jspx',valueField:'id',textField:'text', width:300,[#if item.productEntity.productType??]value:'${item.productEntity.productType.id}'[/#if]"  name="producttypeId" >
					</td>	
				</tr>
				<tr>
					<th>选件</th>
					<td><input class="input_text easyui-validatebox" type="text" value="${item.productEntity.poption}"
						name="poption" data-options="required:true" ></input>
					</td>
				</tr>
			 	<tr>
					<th>名称</th>
					<td><input class="input_text easyui-validatebox" type="text" value="${item.productEntity.proName}"
						name="proName" data-options="required:true" ></input>
					</td>
					<th>(英文名)</th>
					<td><input class="input_text" type="text" value="${item.productEntity.proNameEn}"
						name="proNameEn" data-options="required:true" ></input>
					</td>
				</tr>
			 	<tr>
					<th>是否上架</th>
					<td><input type="radio" ${(item.productEntity.proownaudit==0)?string('checked','')}  value="0"
						name="proownaudit"  >否
					<input type="radio" ${(item.productEntity.proownaudit==1)?string('checked','')}  value="1"
						name="proownaudit"  >是
					</td>
				</tr>
			 	<tr>
					<th>本信息显示在</th>
					<td><input type="checkbox" ${(item.productEntity.webzh==1)?string('checked','')}  value="1"
						name="webzh"  >中文网
					<input type="checkbox" ${(item.productEntity.weben==1)?string('checked','')}  value="1"
						name="weben"  >英文网
					</td>
				</tr>
				<tr>
					<th>是否含税</th>
					<td><input type="radio" ${(item.productEntity.isTax==0)?string('checked','')}  value="0"
						name="isTax"  >否
					<input type="radio" ${(item.productEntity.isTax==1)?string('checked','')}  value="1"
						name="isTax"  >是
					</td>
				</tr>
				<tr><th>税率</th>
					<td><input class="input_text" type="text" value="${item.productEntity.taxRate}"
						name="taxRate"  ></input>
					</td>
				</tr>
				<tr>
					<th>是否可计量</th>
					<td id="isUnit"><input type="radio" ${(item.productEntity.isUnit==0)?string('checked','')} value="0" name="isUnit">否
						<input type="radio" ${(item.productEntity.isUnit==1)?string('checked','')} value="1" name="isUnit">是
					</td>
					<th ${(item.productEntity.isUnit==0)?string('style="display:none"','')}>计量单位</th>
					<td id="proUnit" ${(item.productEntity.isUnit==0)?string('style="display:none"','')}><input class="input_text" type="text" value="${item.productEntity.proUnit}" 
						name="proUnit"  ></input>
					</td>
				</tr>
			   <tr>
			    <tr>
					<th>维修周期</th>
					<td><input class="input_text easyui-validatebox" type="text" value="${item.maintainPeriod}"
						name="maintainPeriod" data-options="required:true" ></input>
						<select name="maintainPeriodunit">
							<option ${(item.maintainPeriod == 'day')?string('selected','')} value="day">天</option>
							<option ${(item.maintainPeriod == 'week')?string('selected','')} value="week">周</option>
							<option ${(item.maintainPeriod == 'month')?string('selected','')} value="month">月</option>
						</select>
					</td>
				</tr>
				<tr>
					<th>预算价格</th>
					<td><input class="input_text easyui-validatebox" type="text" value="${item.repairPrice}"
						name="repairPrice" data-options="required:true" ></input>
						<select name="repairPriceUnit">
							<option ${(item.repairPriceUnit=='yuan')?string('selected','')} value="yuan">元</option>
							<option ${(item.repairPriceUnit == 'millionyuan')?string('selected','')} value="millionyuan">万元</option>
						</select>
						<select name="repairPriceType">
							<option ${(item.repairPriceType=='rmb')?string('selected','')} value="rmb">人民币</option>
							<option ${(item.repairPriceType == 'dollar')?string('selected','')} value="dollar">美元</option>
						</select>
					</td>
				</tr>
				<tr>
					<th>维修地点</th>
					<td><input class="input_text easyui-validatebox" type="text" value="${item.maintenanceEngineerAddress}"
						name="maintenanceEngineerAddress" data-options="required:true" ></input>
					</td>
				</tr>
				<tr>
					<th>保修时间</th>
					<td><input class="input_text easyui-validatebox" type="text" value="${item.productEntity.repairPeriod}"
						name="repairPeriod" data-options="required:true" ></input>
						<select name="repairPeriodUnit">
							<option ${(item.productEntity.repairPeriodUnit == 'day')?string('selected','')} value="day">天</option>
							<option ${(item.productEntity.repairPeriodUnit == 'week')?string('selected','')} value="week">周</option>
							<option ${(item.productEntity.repairPeriodUnit == 'month')?string('selected','')} value="month">月</option>
						</select>
					</td>
				</tr>
				<tr>
					<th>图片1</th>
					<td><input id="exap" type="hidden" name="proOriginal1" value="${item.productEntity.proOriginal1}" />
						<img class="picImg" id="img" style="width:80px;height:80px" src="${item.productEntity.proOriginal1}" />
						<input class="button blueButton" type="button" id="btnPreViewImg" value="上传图片" />
					</td>
					<th>图片2</th>
					<td><input id="exap1" type="hidden" name="proOriginal2" value="${item.productEntity.proOriginal2}" />
						<img class="picImg" id="img1" style="width:80px;height:80px" src="${item.productEntity.proOriginal2}" />
						<input class="button blueButton" type="button" id="btnPreViewImg1" value="上传图片" />
					</td>
				</tr>
				  <tr>
					<th>图片3</th>
					<td><input id="exap2" type="hidden" name="proOriginal3" value="${item.productEntity.proOriginal3}" />
						<img class="picImg" id="img2" style="width:80px;height:80px" src="${item.productEntity.proOriginal3}" />
						<input class="button blueButton" type="button" id="btnPreViewImg2" value="上传图片" />
					</td>
					<th>图片4</th>
					<td><input id="exap3" type="hidden" name="proOriginal4" value="${item.productEntity.proOriginal4}" />
						<img class="picImg" id="img3" style="width:80px;height:80px" src="${item.productEntity.proOriginal4}" />
						<input class="button blueButton" type="button" id="btnPreViewImg3" value="上传图片" />
					</td>
				</tr>
				<tr>
					<th>故障现象</th>
					<td ><textarea id="bugloko" name="bugloko" class="ckeditor" >${item.bugloko}</textarea>
					</td>
				</tr>
				<tr>
					<th>英文描述</th>
					<td ><textarea id="buglokoEn" name="buglokoEn" class="ckeditor" >${item.buglokoEn}</textarea>
					</td>
				</tr>
				<tr>
					<th>故障原因</th>
					<td ><textarea id="faultCause" name="faultCause" class="ckeditor" >${item.faultCause}</textarea>
					</td>
				</tr>
				<tr>
					<th>英文描述</th>
					<td ><textarea id="faultCauseEn" name="faultCauseEn" class="ckeditor" >${item.faultCauseEn}</textarea>
					</td>
				</tr>
				<tr>
					<th>行业分类</th>
					<td><input class="input_text easyui-validatebox" type="text" value="${item.productEntity.industryclass}"
						name="industryclass"  ></input></td>
				</tr>
				<tr>
					<th>行业应用</th>
					<td><input class="input_text" type="text" value="${item.productEntity.apply}"
						name="apply"  ></input></td>
					<th>英文</th>
					<td><input class="input_text" type="text" value="${item.productEntity.applyEn}"
						name="applyEn"  ></input></td>
				</tr>
				<tr>
					<th>优化标题</th>
					<td><input class="input_text" type="text" value="${item.productEntity.prometaTitle}"
						name="prometaTitle" data-options="required:true" ></input></td>
				</tr>
				<tr>
					<th>优化关键字</th>
					<td><input class="input_text" type="text" value="${item.productEntity.proMetaKeywords}"
						name="proMetaKeywords" data-options="required:true" ></input></td>
				</tr>
				<tr>
					<th>优化描述</th>
					<td><input class="input_text" type="text" value="${item.productEntity.prometaDescription}"
						name="prometaDescription" data-options="required:true" ></input></td>
				</tr>   
			</table>
		</form>
	</div>
	<div class="buttonWrap fixed">
		<a id="searchAdvance" class="easyui-linkbutton" onclick="submitForm()"
			href="javascript:;">修改</a>
	</div>
</div>
<script>
	initAjaxUploadImg('btnPreViewImg','exap','img');
	initAjaxUploadImg('btnPreViewImg1','exap1','img1');
	initAjaxUploadImg('btnPreViewImg2','exap2','img2');
	initAjaxUploadImg('btnPreViewImg3','exap3','img3');
	function loadSec(ele){
		var value = $(ele).attr("s_value");
		$(ele).combobox("select",value);
	}
	
	$(function () {
	    CKEDITOR.replace('bugloko', { height: '240px', width: '600px' });
	    CKEDITOR.replace('buglokoEn', { height: '240px', width: '600px' });
	    CKEDITOR.replace('faultCause', { height: '240px', width: '600px' });
	    CKEDITOR.replace('faultCauseEn', { height: '240px', width: '600px' });
	    
	});
	$("#isUnit").find("[name=isUnit]").change(function(){
		if($(this).val()==0){
			$("#proUnit").hide();
			$("#proUnit").prev().hide();
		}else{
			$("#proUnit").show();
			$("#proUnit").prev().show();
		}
	});
	function submitForm(){
		var formflag = $("#editForm").form().form('validate');
		if (formflag) {
			for(instance in CKEDITOR.instances){
				CKEDITOR.instances[instance].updateElement();
			}
			$.Loading.show("正在修改......");
			var options = {
				url : "/admin/prodoctMng/cusProMng/wantRepair/save_edit_cusPubWantRepair.jspx?ajax=yes",
				type : "POST",
				dataType : 'json',
				success : function(result) {
					if(result.result==1){
						$.Loading.success(result.message);
					}
					if(result.result==0){ 
						$.Loading.error(result.message);
					}
					$.Loading.hide();
				},
				error : function(e) {
					alert("出现错误 ，请重试");
				}
			};
			$("#editForm").ajaxSubmit(options);
		}
	}
</script>
</body>