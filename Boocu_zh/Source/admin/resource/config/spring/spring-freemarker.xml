<?xml version="1.0" encoding="UTF-8"?>
<beans xmlns="http://www.springframework.org/schema/beans"
	xmlns:xsi="http://www.w3.org/2001/XMLSchema-instance" xmlns:jee="http://www.springframework.org/schema/jee"
	xmlns:tx="http://www.springframework.org/schema/tx" xmlns:context="http://www.springframework.org/schema/context"
	xsi:schemaLocation="http://www.springframework.org/schema/beans http://www.springframework.org/schema/beans/spring-beans-3.0.xsd
	http://www.springframework.org/schema/tx http://www.springframework.org/schema/tx/spring-tx-3.0.xsd
	http://www.springframework.org/schema/jee http://www.springframework.org/schema/jee/spring-jee-3.0.xsd
	http://www.springframework.org/schema/context http://www.springframework.org/schema/context/spring-context-3.0.xsd"
	default-lazy-init="true">
 
	<!-- 属性占位符（读取Properties配置文件） -->
	<!-- location：位置 -->
	<!-- ignore-resource-not-found：是否忽略不存在的资源（资源：配置项，键值对中的值） -->
	<!-- ignore-unresolvable：是否忽略无法解析的配置项 -->
	<context:property-placeholder location="classpath:/config/db/config.properties" ignore-resource-not-found="true" ignore-unresolvable="true" />

	<bean id="freemarkerViewResolver"
		class="net.boocu.framework.freemarker.BooCuFreeMarkerViewResolver">
		<property name="contentType" value="text/html; charset=UTF-8" />
		<property name="exposeRequestAttributes" value="false" />
		<property name="exposeSessionAttributes" value="false" />
		<property name="exposeSpringMacroHelpers" value="true" />
		<property name="prefix" value="${template.loader_path}" />
	</bean>
	
	<!-- 配置Freemarker管理 org.springframework.web.servlet.view.freemarker.FreeMarkerConfigurer -->
	<bean id="freeMarkerConfigurer" class="net.boocu.framework.freemarker.BooCuFreeMarkerConfigurer">
		<!-- 模板路径 -->
		<property name="templateLoaderPaths" value="${template.loader_path}" />

		<!-- Freemarker设置 -->
		<property name="freemarkerSettings">
			<props>
				<prop key="defaultEncoding">${template.encoding}</prop>
				<prop key="url_escaping_charset">${url_escaping_charset}</prop>
				<prop key="locale">${locale}</prop>
				<prop key="template_update_delay">#{T(net.boocu.framework.util.ConvertUtils).toTernary(${system.development}, 0, ${template.update_delay})}</prop>
				<prop key="tag_syntax">auto_detect</prop>
				<prop key="whitespace_stripping">true</prop>
				<prop key="classic_compatible">true</prop>
				<prop key="number_format">${template.number_format}</prop>
				<prop key="boolean_format">${template.boolean_format}</prop>
				<prop key="datetime_format">${template.datetime_format}</prop>
				<prop key="date_format">${template.date_format}</prop>
				<prop key="time_format">${template.time_format}</prop>
				<prop key="object_wrapper">freemarker.ext.beans.BeansWrapper</prop>
			</props>
		</property>

		<!-- Freemarker变量 -->
		<property name="freemarkerVariables">
			<map>
				<!-- 系统信息 -->
				<entry key="systemName" value="${system.name}" />
				<entry key="systemVersion" value="${system.version}" />
				<entry key="systemDescription" value="${system.description}" />
				<entry key="systemDevelopment" value="#{T(org.apache.commons.lang3.BooleanUtils).toBoolean(${system.development})}" />
				<entry key="systemPowered" value="#{T(org.apache.commons.lang3.BooleanUtils).toBoolean(${system.powered})}" />

				<!-- 基本变量 -->
				<entry key="base" value="#{servletContext.contextPath}" />
				<entry key="locale" value="${locale}" />
				<entry key="setting" value="#{T(net.boocu.framework.util.SettingUtils).get()}" />

				<!-- 自定义宏（指令、方法） -->
				<entry key="abbreviate" value-ref="abbreviateMethod" />
				<entry key="convert" value-ref="convertMethod" />
				<entry key="currency" value-ref="currencyMethod" />
				<entry key="dateUtil" value-ref="dateUtilMethod" />
				<entry key="message" value-ref="messageMethod" />
				<entry key="secrecy" value-ref="secrecyMethod" />

				<entry key="pagination" value-ref="paginationDirective" />

			</map>
		</property>
	</bean>

	
	 
<!--  后台权限标签 
	<bean id="cms_perm" class="net.boocu.framework.freemarker.PermistionDirective" />

	执行时间标签
	<bean id="uuid" class="net.boocu.framework.freemarker.UUIDDirective" />
	<bean id="process_time" class="net.boocu.framework.freemarker.ProcessTimeDirective" />
	<bean id="text_cut" class="net.boocu.framework.freemarker.TextCutDirective" />
	<bean id="html_cut" class="net.boocu.framework.freemarker.HtmlCutDirective" />
 	<bean id="repeat" class="net.boocu.framework.freemarker.RepeatDirective" /> -->
	 
</beans>