<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>个人中心 - 晧辰仪联网</title>
[#include '/template/front/include/csslist.html' /]
<link rel="stylesheet" type="text/css" href="/adminthemes/new/js/easy-ui/themes/gray/easyui.css"/>    
<link rel="stylesheet" type="text/css" href="/adminthemes/new/js/easy-ui/themes/icon.css"/>  
</head>
<body>
<!--top-->
[#include '/template/front/include/header.html' /]
<!--./top--> 
 <!--loading-->
 <div class="listloadingd" id="indexLoading" ></div>
 <!--./loading-->
 <div class="indexContent">
<!--content-->
<div class="main userd">
  <div class="umaintitd">当前位置：<a href="/" style="text-decoration:none;">首页</a> &gt; <a href="/user/user" style="text-decoration:none;">会员中心 </a>&gt; <a href="javascript:void;" style="text-decoration:none;"><span>快捷发布管理</span></a></div>
  <!--usernav-->
  [#include '/template/front/include/usernav.html' /]
  <!--./usernav--> 
  
  <!--umainr-->
  <div class="umainr">
    <div class="umainrtitd"><span>快捷发布</span></div>
    
    <!--upublishd-->
    <div class="upublishd">
      <div class="upubnavd">
        <ul>
          <li><a href="/fastSale">产品销售</a></li>
          <li class="on"><a href="/fastBuy">产品求购</a></li>
          <li><a href="/fastRent">产品租赁</a></li>
          <li><a href="/fastWantRent">产品求租</a></li>
          <li><a href="/fastRepair">产品维修</a></li>
          <li><a href="/fastWantRepair">产品求修</a></li>
          <li><a href="#">计量校准</a></li>
        </ul>
      </div>
      <!--./upronavd--> 
      
      <!--快捷发布-->
      <div class="upformd">
      	<form  id="perRegist" action="/" method="post" enctype="multipart/form-data" name="pubForm">
      	<input type="text" name="memberId" id="memberId" value="${currentMember.id}" style="display:none;">
          <div class="row">
            <p class="l"><i class="x">*</i>品 牌：</p>
            <p class="r">
            	<input class="easyui-combobox" data-options="url:'/brand/get_brand_names.jspx',valueField:'id',textField:'text', width:307,[#if item.productBrandEntity??]value:'${item.productBrandEntity.id}'[/#if]" style="width:292px;height:36px;" name="brandId" id="brandId" >
            </p>
            <p class="rr">填写求购的产品品牌</p>
          </div>
          <div class="row">
            <p class="l"><i class="x">*</i>型 号：</p>
            <p class="r">
              <input type="text" name="proNo" id="proNo" class="txt" value="${item.proNo}">
            </p>
            <p class="rr"></p>
          </div>
          <div class="row">
            <p class="l">选 件：</p>
            <p class="r">
              <input type="text" name="poption" id="poption" class="txt" value="${item.poption}">
            </p>
            <p class="rr"></p>
          </div>
          <div class="row">
            <p class="l"><i class="x">*</i>名 称：</p>
            <div class="r">
              <p class="fl">
                <input type="text" name="proName" id="proName" class="txt w2" value="${item.proName}">
              </p>
              <p class="fl pl15">英文名：</p>
              <p class="fl">
                <input type="text" name="proNameEn" id="proNameEn" class="txt w2" value="${item.proNameEn}">
              </p>
            </div>
            <p class="rr"></p>
          </div>
          <div class="row">
            <p class="l">数 量：</p>
            <p class="r">
              <input type="text" name="proStock" id="proStock" class="txt" value="${(item.proStock)}">
            </p>
            <p class="rr"></p>
          </div>
          <div class="row">
            <p class="l">成 色：</p>
            <p class="r">
              <select name="qualityStatus" id="qualityStatus" class="txt sel w1">
                <option ${(item.qualityStatus =='all')?string('selected','')} value="all">全新</option>
				<option ${(item.qualityStatus =='nine')?string('selected','')} value="nine">九成新</option>
				<option ${(item.qualityStatus =='eight')?string('selected','')} value="eight">八成新</option>
				<option ${(item.qualityStatus =='seven')?string('selected','')} value="seven">七成新</option>
				<option ${(item.qualityStatus =='six')?string('selected','')} value="six">六成新</option>
				<option ${(item.qualityStatus =='five')?string('selected','')} value="five">五成新</option>
				<option ${(item.qualityStatus =='belowfive')?string('selected','')} value="belowfive">五成新以下</option>
              </select>
            </p>
            <p class="rr"></p>
          </div>
          <div class="row" id="reference" style="display:none;">
            <p class="l">全新参考价格：</p>
            <div class="r">
              <p class="fl">
                <input type="text" name="referencePrice" id="referencePrice" class="txt w3" value="${item.referencePrice}">
              </p>
              <p class="fl pl5">
                <select name="referencepricetype" id="referencepricetype" class="txt sel w4">
                  <option ${(item.referencepricetype =='yuan')?string('selected','')} value="yuan">元</option>
				  <option ${(item.referencepricetype =='millionyuan')?string('selected','')} value="millionyuan">万元</option>
                </select>
              </p>
              <p class="fl pl5">
                <select name="referencePriceLimit" id="referencePriceLimit" class="txt sel w4">
                  <option ${(item.referencePriceLimit =='rmb')?string('selected','')} value="rmb">人民币</option>
				  <option ${(item.referencePriceLimit =='dollar')?string('selected','')} value="dollar">美元</option>
                </select> 
              </p>
              <p class="rr">填写销售的全新参考价格</p>
            </div>
            <p class="rr"></p>
          </div>
          <div class="row">
            <p class="l">设备状态：</p>
            <p class="r">
              <select name="status" id="status" class="txt sel w1">
                <option ${(item.status =='fine')?string('selected','')} value="fine">完好</option>
				<option ${(item.status =='bad')?string('selected','')} value="bad">故障</option>
				<option ${(item.status =='unknown')?string('selected','')} value="unknown">未知</option>
              </select>
            </p>
            <p class="rr"></p>
          </div>
          <div class="row">
            <p class="l">价 格：</p>
            <div class="r">
              <p class="fl">
                <input type="text" name="proMarketPrice" id="proMarketPrice" class="txt w3" value="${item.productBuyEntity.proMarketPrice}">
              </p>
              <p class="fl pl5">
                <select name="proMarketPriceLimit" id="proMarketPriceLimit" class="txt sel w4">
                  <option ${(item.productBuyEntity.proMarketPriceLimit =='yuan')?string('selected','')} value="yuan">元</option>
				  <option ${(item.productBuyEntity.proMarketPriceLimit =='millionyuan')?string('selected','')} value="millionyuan">万元</option>
                </select>
              </p>
              <p class="fl pl5">
                <select name="proMarketPriceType" id="proMarketPriceType" class="txt sel w4">
                  <option ${(item.productBuyEntity.proMarketPriceType =='rmb')?string('selected','')} value="rmb">人民币</option>
				  <option ${(item.productBuyEntity.proMarketPriceType =='dollar')?string('selected','')} value="dollar">美元</option>
                </select>
              </p>
            </div>
            <p class="rr">面议请填0</p>
          </div>
          <div class="row">
            <p class="l">是否可计量：</p>
            <div class="r">
              <p class="fl" id="isUnit">
                <label class="pr15">
                  <input type="radio" name="isUnit" id="isUnit" value="0" ${(item.isUnit ==0)?string('checked','')}>
                  否 </label>
                <label class="pr15">
                  <input type="radio" name="isUnit" id="isUnit1" value="1" ${(item.isUnit ==1)?string('checked','')}>
                  是 </label>
              </p>
              <p class="fl pl5" id = "proUnit" style="display:none;">
                <input type="text" name="proUnit" id="proUnit" class="txt w5" value="${item.proUnit}">
              </p>
            </div>
            <p class="rr"></p>
          </div>
          <div class="row">
            <p class="l">交货周期：</p>
            <div class="r">
              <p class="fl">
                <input type="text" name="cycle" id="cycle" class="txt w7" value="${item.cycle}">
              </p>
              <p class="fl pl5">
                <select name="cycleUnit" id="cycleUnit" class="txt sel w6">
                  <option ${(item.cycleUnit =='day')?string('selected','')} value="day">天</option>
				  <option ${(item.cycleUnit =='week')?string('selected','')} value="week">周</option>
				  <option ${(item.cycleUnit =='month')?string('selected','')} value="month">月</option>
                </select>
              </p>
            </div>
            <p class="rr"></p>
          </div>
          <div class="row">
            <p class="l">所在地：</p>
            <div class="r">
              <p class="fl">
                <select name="prouseAddress" id="prouseAddress" class="easyui-combobox combo" style="width:125px;height:36px;">
                  <option ${(item.prouseAddress =='inChina')?string('selected','')} value="inChina">中国</option>
				  <option ${(item.prouseAddress =='outofChina')?string('selected','')} value="outofChina">国外</option>
                </select>
              </p>
              <p class="fl pl5">
				<input class="easyui-combobox combo " type="text" name="areaProvince" data-options="url:'/worldArea/get_province.jspx?id='+${(item.prouseAddress =='inChina')?string('0','1')},method:'get',valueField:'id',textField:'text',[#if item.areaProvince??]value:'${item.areaProvince}'[/#if]" style="width:125px;height:36px;" id="areaProvince"></input>
              </p>
              <p class="fl pl5">
                <input class="easyui-combobox combo " type="text" name="areaCity" data-options="url:'/worldArea/get_city.jspx?id='+${(item.areaProvince != '')?string('${item.areaProvince}','0')},method:'get',valueField:'id',textField:'text',[#if item.areaCity??]value:'${item.areaCity}'[/#if]" style="width:125px;height:36px;" id="areaCity"></input>
              </p>
            <p class="rr">填写求购产品的所在地</p>
            </div>
          </div>
          <div class="row">
            <p class="l">保修时间：</p>
            <div class="r">
              <p class="fl">
                <input type="text" name="repairPeriod" id="repairPeriod" class="txt w7" value="${item.repairPeriod}">
              </p>
              <p class="fl pl5">
                <select name="repairPeriodUnit" id="repairPeriodUnit" class="txt sel w6">
                  <option ${(item.repairPeriodUnit =='day')?string('selected','')} value="day">天</option>
				  <option ${(item.repairPeriodUnit =='week')?string('selected','')} value="week">周</option>
				  <option ${(item.repairPeriodUnit =='week')?string('selected','')} value="month">月</option>
                </select>
              </p>
            </div>
            <p class="rr">不要求保修请填0</p>
          </div>
          <div class="row">
            <p class="l">备注：</p>
            <p class="r">
              <textarea name="remain" id="remain" class="txta">${item.remain}</textarea>
            </p>
          </div>
          <div class="row plusd">
            <p class="l">&nbsp;</p>
            <div class="r">
              <p><a href="javascript:;"></a></p>
              <p>点此一键发布多条信息</p>
            </div>
          </div>
          <div class="row tkd">
            <p class="l">&nbsp;</p>
            <p class="r">
              <input type="checkbox" id="ckTK" name="ckTk" checked>
              我已阅读并同意<a href="#" class="blue" target="_blank">《晧辰仪联网服务条款》</a> </p>
          </div>
          <div class="row">
            <p class="l">&nbsp;</p>
            <p class="r"><input type="submit" value="提交" class="subbtn" style="border: 0px;"></p>
          </div>
        </form>
      </div>
      <!--./upformd--> 
      
    </div>
    <!--./upublishd--> 
  </div>
  <!--./umainr--> 
</div>
<!--./content--> 
</div>
<!--foot--> 
[#include '/template/front/include/footer2.html' /]
<!--./foot--> 

[#include '/template/front/include/jslist.html' /]

<script type="text/javascript" src="/adminthemes/new/js/easy-ui/jquery.easyui.min.js"></script>
[#-- validate 验证器 --]
<script type="text/javascript" src="/statics/validate/jquery.validate.min.js"></script>
<script type="text/javascript" src="/statics/validate/jquery.validate.method.min.js"></script>

<script type="text/javascript" src="/adminthemes/new/js/ajaxupload.3.9.js"></script>
<script type="text/javascript">
$(document).on('keydown', function(){
	$("#brandId").combobox('getValue');
});
$("#isUnit").find("input[name=isUnit]").change(function(){
	if($(this).val() == 1){
		$("#proUnit").show();
	}
	else {
		$("#proUnit").find("input[name=proUnit]").val("");
		$("#proUnit").hide();
	}
});
var $pubForm = $("#perRegist");
$(function(){
	//计量
	if($("#isUnit").find("input[id=isUnit1]").attr('checked') == 'checked'){
		$("#proUnit").show();
	}else{
		$("#proUnit").find("input[name=proUnit]").val("");
		$("#proUnit").hide();
	}
	var qualityStatus = $("#qualityStatus").val();
	if(qualityStatus != 'all'){
		$("#reference").fadeIn();
	}else{
		$("#reference").fadeOut();
	}
	//成色
	$("#qualityStatus").change(function(){
		var qualityStatus = $("#qualityStatus").val();
		if(qualityStatus != 'all'){
			$("#reference").fadeIn();
		}else{
			$("#reference").fadeOut();
		}
	});
	//国内
	$("#prouseAddress").combobox({
		onSelect:function(){
			var prouse = $(this).combobox('getValue');
			if(prouse =="outofChina"){
				$("#areaCity").combobox('setValue', "");
				$("#areaProvince").combobox('setValue', "");
				$("#areaProvince").combobox('reload', "/worldArea/get_province.jspx?id=1");
			}else{
				$("#areaCity").combobox('setValue', "");
				$("#areaProvince").combobox('setValue', "");
				$("#areaProvince").combobox('reload', "/worldArea/get_province.jspx?id=0");
			}
		}
	});
	//省
	$("#areaProvince").combobox({
		onSelect:function(){
			$("#areaCountry").combobox('setValue', "");
			$("#areaCity").combobox('setValue', "");
			$("#areaCity").combobox('reload', "/worldArea/get_city.jspx?id="+$(this).combobox('getValue'));
		}
	});
	var validate = $("#perRegist").validate({
		rules:{
			proNo:{
				required:true
			},
			poption:{
				required:true
			},
			proName:{
				required:true
			},
			proMarketPrice:{
				required:true
			},
			cycle:{
				required:true
			}
			
		},
		messages:{
			proNo:{
				required:"请填写求购的产品型号"
			},
			poption:{
				required:"请填写求购产品的选件"
			},
			proName:{
				required:"请填写求购产品的名称"
			},
			proMarketPrice:{
				required:"请填写求购产品的价格"
			},
			cycle:{
				required:"请填写求购产品的交货周期"
			}
		},
		errorPlacement:function(error,element){
			element.closest(".row").find(".rr").text(error.text());
		},
		unhighlight:function(element){
			$(element).closest(".row").find(".rr").text("");
		},
		submitHandler:function(form){
			if( $ ("#brandId").combobox ('getValue')==""){
				alert("请填写产品品牌");
				return false;
			}
			$(this).find(".subbtn").prop("disabled",true);
			$.ajax({
				url:"/save_editFastBuy.jspx?id="+${item.id},
				data:$pubForm.serialize(),
				dataType:"json",
				cache:false,
				type:"post",
				beforeSend:function(){
					$pubForm.find(".subbtn").val("修改求购中...");
				},
				success:function(result){
					if(result.result == 1){
						alert("修改求购成功!")
						window.location = "/buyInfor";
					}
				},
				error:function(){
					alert("出现错误, 请重试");
				}
			});
		}
	});
});
</script>

</body>
</html>
