
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=9">
</meta>
<title>晧辰仪联网-后台管理</title>
<style type="text/css">
body {
	margin: 0px;
	font-family: Arial, "宋体", Verdana, sans-serif;
	font-size: 12px;
}

html, body {
	padding: 0;
	margin: 0;
	overflow-x: hidden;
	overflow-y: auto;
}

dl, dd {
	margin: 0px
}

ul {
	list-style-type: none;
	margin: 0px;
	padding: 0px;
}

.prosortd {
	clear: both;
	margin-left: 10px;
	overflow: hidden;
	zoom: 1;
}

.prosortd p {
	float: left;
	padding-right: 160px;
	font-size: 14px;
}

.prosortd1 {
	clear: both;
	margin-left: 10px;
	overflow: hidden;
	zoom: 1;
}

.prosortd1 p {
	float: left;
	width: 160px;
	font-size: 14px;
}

.prosortd2 {
	clear: both;
	margin-left: 240px;
	overflow: hidden;
	zoom: 1;
}

.prosortd2 p {
	float: left;
	width: 160px;
	font-size: 14px;
}

.prosortd3 {
	clear: both;
	margin-left: 10px;
	overflow: hidden;
	zoom: 1;
}

.prosortd3 p {
	float: left;
	width: 160px;
	font-size: 14px;
}
</style>
<script type="text/javascript" src="/editor/ckeditor362/ckeditor.js"></script>
<script type="text/javascript"
	src="/adminthemes/new/js/jquery-1.8.3.min.js"></script>
<script type="text/javascript"
	src="/adminthemes/new/js/jquery-form-2.33.js"></script>
<script type="text/javascript" src="/statics/js/area_sql.js"></script>
<link rel="stylesheet" type="text/css"
	href="/adminthemes/new/js/easy-ui/themes/gray/easyui.css" />
<link rel="stylesheet" type="text/css"
	href="/adminthemes/new/js/easy-ui/themes/icon.css" />
<script type="text/javascript"
	src="/adminthemes/new/js/easy-ui/jquery.easyui.min.js"></script>
<script type="text/javascript"
	src="/adminthemes/new/js/easy-ui/easyui-lang-zh_CN.js"></script>
<script type="text/javascript"
	src="/adminthemes/new/js/jquery.blockUI.js"></script>
<script type="text/javascript"
	src="/adminthemes/new/js/jquery.loading.js"></script>
<link href="/adminthemes/new/css/main.css" rel="stylesheet"
	type="text/css" />
<link href="/adminthemes/new/css/style.css" rel="stylesheet"
	type="text/css" />
<script type="text/javascript" src="/adminthemes/js/BooCu.js"></script>
<script type="text/javascript"
	src="/adminthemes/new/js/ajaxupload.3.9.js"></script>
<script type="text/javascript" src="/frontthemes/js/easyuiUtil.js"></script>


[#include '/template/admin/include/common.html']

</head>
<body>

	<div id="bookinfo" style="display: none;"></div>
	<div id="loading"></div>
	<div class="main">
		<div style="overflow: hidden; border: false; animate: true;"
			class="easyui-accordion">
			<div title="筛选条件" data-options="selected:true">
				<div class="prosortd3">
					<p>发布站点</p>
					<p>
						<input type="radio" s_val="0" name="state"> 全部
					</p>
					<p>
						<input type="radio" s_val="1" name="state"> 中文站
					</p>
					<p>
						<input type="radio" s_val="2" name="state"> 英文站
					</p>
				</div>

				<div class="prosortd">
					<!-- 日期筛选 -->
					<p>日期筛选:</p>
					<p>
						<input type="radio" name="date"> 全部
					</p>
					<p>
						<input type="radio" s_val="0" name="date"> 今日发布
					</p>
					<p>
						<input type="radio" s_val="7" name="date"> 近一周发布
					</p>
					<p>
						<input type="radio" s_val="14" name="date"> 近二周发布
					</p>
					<p>
						<input type="radio" s_val="30" name="date"> 近一月发布
					</p>
				</div>
				<!-- 商品类型 -->
				<div class="prosortd1">
					<p>商品类型:</p>
					<p>
						<input type="radio" s_val="0" name="product"> 全部
					</p>
					<p>
						<input type="radio" s_val="1" name="product"> 产品销售
					</p>
					<p>
						<input type="radio" s_val="2" name="product"> 产品求购
					</p>
					<p>
						<input type="radio" s_val="3" name="product"> 产品租赁
					</p>
					<p>
						<input type="radio" s_val="4" name="product"> 产品求租
					</p>
					<p>
						<input type="radio" s_val="5" name="product"> 产品维修
					</p>
					<p>
						<input type="radio" s_val="6" name="product"> 产品求修
					</p>
				</div>
				<!--       <div class="prosortd2">
       <p>
          <input type="radio"  s_val="7"  name="product" >
         自动化测试方案</p>
        <p>
          <input type="radio"  s_val="8"  name="product">
         方案需求</p>
        <p>
          <input type="radio"  s_val="9" name="product">
          拍卖</p>
        <p>
          <input type="radio"  s_val="10"  name="product">
          招标</p>
        <p>
          <input type="radio"  s_val="11"    name="product">
          产品测试</p>
        <p>
          <input type="radio"  s_val="12"    name="product">
          测试需求</p>
          <p>
          <input type="radio"  s_val="12"    name="product">
          计量校准</p>
          </div> -->
			</div>

		</div>
		<div class="easyui-tabs">
			<div title="未审核的商品列表" style="padding: 10px;">
				<form id="memberform">
					<div id="tb" style="height: auto">
						<a href="javascript:void(0)" class="easyui-linkbutton"
							data-options="plain:true" onclick="refresh()">刷新</a> <a
							href="javascript:void(0)" class="button blueButton"
							data-options="plain:true" onclick="audit()">审核</a> <a
							href="javascript:void(0)" class="button blueButton"
							data-options="plain:true" onclick="reject()">驳回</a> <a
							href="javascript:void(0)" class="easyui-linkbutton"
							data-options="plain:true" onclick="del()">删除</a> <span
							style="float: right;"> <span id="simpleSearch"> <input
								id="searchKeyword" class="input_text" type="text" value=""
								size="30" style="width: 300px;" placeholder="会员名|型号"
								name="searchKeyWord"> <a href="javascript:void(0)"
								class="easyui-linkbutton" data-options="plain:true"
								onclick="searchAdvertBase()">搜索</a>
						</span>
						</span>
					</div>

					<div class="clear height10"></div>
					<div class="shadowBoxWhite tableDiv">
						<table class="easyui-datagrid"
							data-options="url:'/admin/prodoctMng/productAudit/nAuditData.json',pageList: [5,10,15,20],pageSize:10"
							pagination="true" id="memberdata" sortName="id" sortOrder="desc">
							<thead>
								<tr>
									<th data-options="field:'item.id',checkbox:true">id</th>
									<th
										data-options="field:'item.memberEntity.username',sortable:'true',width:100"
										formatter="userOperation">会员名</th>
									<th
										data-options="field:'item.display',sortable:'true',width:100 "
										formatter="displayOperation">促销</th>
									<th
										data-options="field:'item.productType.typeName',sortable:'true',width:100 ">商品类型</th>
									<th
										data-options="field:'item.productBrandEntity.name',width:100 ">品牌</th>
									<th
										data-options="field:'item.proNo',sortable:'true',width:100 "
										formatter="formatEdit">商品型号</th>
									<th
										data-options="field:'item.poption',sortable:'true',width:100 ">选件</th>
									<th
										data-options="field:'item.proName',sortable:'true',width:100 ">商品名称</th>
									<th
										data-options="field:'item.cycle',sortable:'true',width:100 ">交货周期</th>
									<th
										data-options="field:'item.cycleUnit',sortable:'true',width:100 ">交货周期单位</th>
									<th
										data-options="field:'item.sendCycle',sortable:'true',width:100 ">发货周期</th>
									<th
										data-options="field:'item.sendCycleUnit',sortable:'true',width:100 ">发货周期单位</th>
									<th
										data-options="field:'item.referencePrice',sortable:'true',width:100 ">全新参考价</th>
									<th
										data-options="field:'item.referencepriceType',sortable:'true',width:100 "
										formatter="typeOperation">全新参考价单位</th>
									<th
										data-options="field:'item.referencePriceLimit',sortable:'true',width:100 "
										formatter="priceOperation">全新参考价币别</th>
									<th
										data-options="field:'item.proCustomPrice',sortable:'true',width:100 ">来宾价格</th>
									<th
										data-options="field:'item.proCustomPriceType',sortable:'true',width:100 "
										formatter="typeOperation">来宾价格单位</th>
									<th
										data-options="field:'item.proMemberPrice',sortable:'true',width:100 ">客户价格</th>
									<th
										data-options="field:'item.proMemberPriceType',sortable:'true',width:100 "
										formatter="typeOperation">客户价格单位</th>
									<th
										data-options="field:'item.proPeer',sortable:'true',width:100 ">同行价格</th>
									<th
										data-options="field:'item.proPeerType',sortable:'true',width:100 "
										formatter="typeOperation">同行价格单位</th>
									<th
										data-options="field:'item.proVipPrice',sortable:'true',width:100 ">VIP价格</th>
									<th
										data-options="field:'item.proVipPriceType',sortable:'true',width:100 "
										formatter="typeOperation">VIP价格单位</th>
									<th data-options="field:'action',sortable:'true',width:100 " formatter="memberPriceEdit">会员等级价格</th>
									<th
										data-options="field:'createDate',sortable:'true',width:150 ">发布日期</th>
								</tr>
							</thead>
						</table>
					</div>
				</form>
			</div>
			<div title="已审核的商品列表" style="padding: 10px;">
				<form id="memberform1">
					<div id="tb" style="height: auto">
						<a href="javascript:void(0)" class="easyui-linkbutton" data-options="plain:true" onclick="refresh1()">刷新</a> 
						<a href="javascript:void(0)" class="button blueButton" data-options="plain:true" onclick="reject1()">驳回</a> 
						<a href="javascript:void(0)" class="button blueButton" data-options="plain:true" onclick="unAudit1()">反审核</a> 
							<a href="javascript:void(0)" class="button blueButton" data-options="plain:true" onclick="agree1()">促销</a> 
							<a href="javascript:void(0)" class="button blueButton" data-options="plain:true" onclick="cancel1()">取消促销</a> 
							<a href="javascript:void(0)" class="easyui-linkbutton" data-options="plain:true" onclick="del1()">删除</a> 
							<span style="float: right;"> <span id="simpleSearch"> 
							<input id="searchKeyword1" class="input_text" type="text" value=""
								size="30" style="width: 300px;" placeholder="会员名|型号|商品名"
								name="searchKeyWord"> <a href="javascript:void(0)"
								class="easyui-linkbutton" data-options="plain:true"
								onclick="searchAdvertBase1()">搜索</a>
						</span>
						</span>
					</div>

					<div class="clear height10"></div>
					<div class="shadowBoxWhite tableDiv">
						<table class="easyui-datagrid"
							data-options="url:'/admin/prodoctMng/productAudit/auditData.json',pageList: [5,10,15,20],pageSize:10"
							pagination="true" id="memberdata1" sortName="id" sortOrder="desc">
							<thead>
								<tr>
									<th data-options="field:'item.id',checkbox:true">id</th>
									<th
										data-options="field:'item.memberEntity.username',sortable:'true',width:100 "
										formatter="userOperation">会员名</th>
									<th
										data-options="field:'item.display',sortable:'true',width:100 "
										formatter="displayOperation">促销</th>
									<th
										data-options="field:'item.productType.typeName',sortable:'true',width:100 ">商品类型</th>
									<th
										data-options="field:'item.productBrandEntity.name',width:100 ">品牌</th>
									<th
										data-options="field:'item.proNo',sortable:'true',width:100 "
										formatter="formatEdit">商品型号</th>
									<th
										data-options="field:'item.poption',sortable:'true',width:100 ">选件</th>
									<th
										data-options="field:'item.proName',sortable:'true',width:100 ">商品名称</th>
									<th
										data-options="field:'item.cycle',sortable:'true',width:100 ">交货周期</th>
									<th
										data-options="field:'item.cycleUnit',sortable:'true',width:100 ">交货周期单位</th>
									<th
										data-options="field:'item.sendCycle',sortable:'true',width:100 ">发货周期</th>
									<th
										data-options="field:'item.sendCycleUnit',sortable:'true',width:100 ">发货周期单位</th>
									<th
										data-options="field:'item.referencePrice',sortable:'true',width:100 ">全新参考价</th>
									<th
										data-options="field:'item.referencepriceType',sortable:'true',width:100 "
										formatter="typeOperation">全新参考价单位</th>
									<th
										data-options="field:'item.referencePriceLimit',sortable:'true',width:100 "
										formatter="priceOperation">全新参考价币别</th>
									<th data-options="field:'item.proCustomPrice',sortable:'true',width:100 ">来宾价格</th>
									<th data-options="field:'item.proCustomPriceType',sortable:'true',width:100 " formatter="typeOperation">来宾价格单位</th>
									<th data-options="field:'item.proMemberPrice',sortable:'true',width:100 ">客户价格</th>
									<th data-options="field:'item.proMemberPriceType',sortable:'true',width:100 " formatter="typeOperation">客户价格单位</th>
									<th data-options="field:'item.proPeer',sortable:'true',width:100 ">同行价格</th>
									<th data-options="field:'item.proPeerType',sortable:'true',width:100 " formatter="typeOperation">同行价格单位</th>
									<th data-options="field:'item.proVipPrice',sortable:'true',width:100 ">VIP价格</th>
									<th data-options="field:'item.proVipPriceType',sortable:'true',width:100 " formatter="typeOperation">VIP价格单位</th>
									<th data-options="field:'action',sortable:'true',width:100 " formatter="memberPriceEdit">会员等级价格</th>
									<th data-options="field:'createDate',sortable:'true',width:150 ">发布日期</th>
								</tr>
							</thead>
						</table>
					</div>
				</form>
			</div>
			<div title="被驳回的商品列表" style="padding: 10px;">
				<form id="memberform2">
					<div id="tb" style="height: auto">
						<a href="javascript:void(0)" class="easyui-linkbutton"
							data-options="plain:true" onclick="refresh2()">刷新</a> <a
							href="javascript:void(0)" class="easyui-linkbutton"
							data-options="plain:true" onclick="del2()">删除</a> <span
							style="float: right;"> <span id="simpleSearch"> <input
								id="searchKeyword2" class="input_text" type="text" value=""
								size="30" style="width: 300px;" placeholder="会员名|型号"
								name="searchKeyWord"> <a href="javascript:void(0)"
								class="easyui-linkbutton" data-options="plain:true"
								onclick="searchAdvertBase2()">搜索</a>
						</span>
						</span>
					</div>

					<div class="clear height10"></div>
					<div class="shadowBoxWhite tableDiv">
						<table class="easyui-datagrid"
							data-options="url:'/admin/prodoctMng/productAudit/rejectData.json',pageList: [5,10,15,20],pageSize:10"
							pagination="true" id="memberdata2" sortName="id" sortOrder="desc">
							<thead>
								<tr>
									<th data-options="field:'item.id',checkbox:true">id</th>
									<th
										data-options="field:'item.memberEntity.username',sortable:'true',width:100 "
										formatter="userOperation">会员名</th>
									<th
										data-options="field:'item.display',sortable:'true',width:100 "
										formatter="displayOperation">促销</th>
									<th
										data-options="field:'item.productType.typeName',sortable:'true',width:100 ">商品类型</th>
									<th
										data-options="field:'item.productBrandEntity.name',width:100 ">品牌</th>
									<th
										data-options="field:'item.proNo',sortable:'true',width:100 "
										formatter="formatEdit">商品型号</th>
									<th
										data-options="field:'item.poption',sortable:'true',width:100 ">选件</th>
									<th
										data-options="field:'item.proName',sortable:'true',width:100 ">商品名称</th>
									<th
										data-options="field:'item.cycle',sortable:'true',width:100 ">交货周期</th>
									<th
										data-options="field:'item.cycleUnit',sortable:'true',width:100 ">交货周期单位</th>
									<th
										data-options="field:'item.sendCycle',sortable:'true',width:100 ">发货周期</th>
									<th
										data-options="field:'item.sendCycleUnit',sortable:'true',width:100 ">发货周期单位</th>
									<th
										data-options="field:'item.referencePrice',sortable:'true',width:100 ">全新参考价</th>
									<th
										data-options="field:'item.referencepriceType',sortable:'true',width:100 "
										formatter="typeOperation">全新参考价单位</th>
									<th
										data-options="field:'item.referencePriceLimit',sortable:'true',width:100 "
										formatter="priceOperation">全新参考价币别</th>
									<th
										data-options="field:'item.proCustomPrice',sortable:'true',width:100 ">来宾价格</th>
									<th
										data-options="field:'item.proCustomPriceType',sortable:'true',width:100 "
										formatter="typeOperation">来宾价格单位</th>
									<th
										data-options="field:'item.proMemberPrice',sortable:'true',width:100 ">客户价格</th>
									<th
										data-options="field:'item.proMemberPriceType',sortable:'true',width:100 "
										formatter="typeOperation">客户价格单位</th>
									<th
										data-options="field:'item.proPeer',sortable:'true',width:100 ">同行价格</th>
									<th
										data-options="field:'item.proPeerType',sortable:'true',width:100 "
										formatter="typeOperation">同行价格单位</th>
									<th
										data-options="field:'item.proVipPrice',sortable:'true',width:100 ">VIP价格</th>
									<th
										data-options="field:'item.proVipPriceType',sortable:'true',width:100 "
										formatter="typeOperation">VIP价格单位</th>
									<th data-options="field:'action',sortable:'true',width:100 " formatter="memberPriceEdit">会员等级价格</th>
									<th
										data-options="field:'createDate',sortable:'true',width:150 ">发布日期</th>
								</tr>
							</thead>
						</table>
					</div>
				</form>
			</div>
		</div>
		<div id="divdia" style="display: none;"></div>

	</div>
	<script type="text/javascript">

	$(".prosortd").find("input[type='radio']").change(function(){
		var time = $(this).attr("s_val");
		var keyword1 = $("#searchKeyword").val();
		var keyword2 = $("#searchKeyword1").val();
		var keyword3 = $("#searchKeyword2").val();
		var productTypeId = $("input[name='product']:checked").attr("s_val");
		var state = $("input[name='state']:checked").attr("s_val");
		$("#memberdata").datagrid("load",{
			productTypeId:productTypeId,
			keyword:keyword1,
			time:time,
			page:1,state:state
		});
		$("#memberdata1").datagrid("load",{
			productTypeId:productTypeId,
			keyword:keyword2,
			time:time,
			page:1,state:state
		});
		$("#memberdata2").datagrid("load",{
			productTypeId:productTypeId,
			keyword:keyword3,
			time:time,
			page:1,state:state
		});
	});
	
	$(".prosortd1").find("input[type='radio']").change(function(){
		var productTypeId = $(this).attr("s_val");
		var keyword1 = $("#searchKeyword").val();
		var keyword2 = $("#searchKeyword1").val();
		var keyword3 = $("#searchKeyword2").val();
		var time = $("input[name='date']:checked").attr("s_val");var state = $("input[name='state']:checked").attr("s_val");
		$("#memberdata").datagrid("load",{
			productTypeId:productTypeId,
			keyword:keyword1,
			time:time,
			page:1,state:state
		});
		$("#memberdata1").datagrid("load",{
			productTypeId:productTypeId,
			keyword:keyword2,
			time:time,
			page:1,state:state
		});
		$("#memberdata2").datagrid("load",{
			productTypeId:productTypeId,
			keyword:keyword3,
			time:time,
			page:1,state:state
		});
	});
	$(".prosortd2").find("input[type='radio']").change(function(){
		var keyword2 = $("#searchKeyword2").val();
		var keyword1 = $("#searchKeyword1").val();
		var keyword = $("#searchKeyword").val();
		var productTypeId = $(this).attr("s_val");
		var time = $("input[name='date']:checked").attr("s_val");var state = $("input[name='state']:checked").attr("s_val");
		$("#memberdata").datagrid("load",{
			productTypeId:productTypeId,
			keyword:keyword,
			time:time,
			page:1,state:state
		});
		$("#memberdata1").datagrid("load",{
			productTypeId:productTypeId,
			keyword:keyword1,
			time:time,
			page:1,state:state
		});
		$("#memberdata2").datagrid("load",{
			productTypeId:productTypeId,
			keyword:keyword2,
			time:time,
			page:1,state:state
		});
	});
	
	$(".prosortd3").find("input[type='radio']").change(function(){
		var keyword2 = $("#searchKeyword2").val();
		var keyword1 = $("#searchKeyword1").val();
		var keyword = $("#searchKeyword").val();
		var state = $(this).attr("s_val");var productTypeId = $("input[name='product']:checked").attr("s_val");
		var time = $("input[name='date']:checked").attr("s_val");
		$("#memberdata").datagrid("load",{
			productTypeId:productTypeId,
			keyword:keyword,
			time:time,
			page:1,state:state
		});
		$("#memberdata1").datagrid("load",{
			productTypeId:productTypeId,
			keyword:keyword1,
			time:time,
			page:1,state:state
		});
		$("#memberdata2").datagrid("load",{
			productTypeId:productTypeId,
			keyword:keyword2,
			time:time,
			page:1,state:state
		});
	});
	
	
	function searchAdvertBase(){
		var productTypeId = $("input[name='product']:checked").attr("s_val");
		var time = $("input[name='date']:checked").attr("s_val");
		var keyword = $("#searchKeyword").val();
		$("#memberdata").datagrid("load",{
			keyword:keyword,
			productTypeId:productTypeId,
			time:time,
			page:1
		});
	}
	function searchAdvertBase1(){
		var productTypeId = $("input[name='product']:checked").attr("s_val");
		var keyword = $("#searchKeyword1").val();
		var time = $("input[name='date']:checked").attr("s_val");
		$("#memberdata1").datagrid("load",{
			keyword:keyword,
			productTypeId:productTypeId,
			time:time,
			page:1
		});
	}
	function searchAdvertBase2(){
		var productTypeId = $("input[name='product']:checked").attr("s_val");
		var keyword = $("#searchKeyword2").val();
		var time = $("input[name='date']:checked").attr("s_val");
		$("#memberdata2").datagrid("load",{
			keyword:keyword,
			productTypeId:productTypeId,
			time:time,
			page:1
		});
	}
	function clearForm(map) {
		$(map["formId"]).form('clear');
	}
	
	function typeOperation(value, row, index){
		return "millionyuan" == value ? "万元" : "元"
	}
	
	function priceOperation(value, row, index){
		return "dollar" == value ? "美元" : "人民币"
	}
	
	function displayOperation(value, row, index){
		return "1" == value ? "促销" : "未促销"
	}
	
	//查看用户的详细信息
	function userOperation(value, row, index) {
		var val = "<a class='details' title='查看' href='javascript:void(0);' onclick='newTab(\""
			+ row.item.memberEntity.username + "-信息\",\"/admin/member/memberAudit/look_memberAudit.jspx?id="
			+ row.item.memberEntity.id + "\")' >"+row.item.memberEntity.username+"</a>";
		return val;
	}
	
 	//修改审核商品
	function formatEdit(value, row, index) {
		var val = "<a class='details' title='修改' href='javascript:void(0);' onclick='newTab(\""
			+ row.item.memberEntity.username
			+ "-信息\",\"/admin/prodoctMng/productAudit/edit_productAudit.jspx?id="
			+ row.item.id + "\")' >"+row.item.proNo+"</a>";
		return val;
	} 
 	//修改会员价格
	function memberPriceEdit(value, row, index) {
		var val = "<a class='edit' title='修改' href='javascript:void(0);' onclick='append("+row.item.id+","+row.item.weben+")' ></a>";
		return val;
	}
 	
	function submitForm(map) {
		var formflag = $(map["formId"]).form().form('validate');
		if (formflag) {
			$.Loading.show(map["loadshow"]);
			var options = {
				url : map["url"],
				type : "POST",
				dataType : 'json',
				success : function(result) {
					if (result.result== 1) {
						$.Loading.show(result.message);
						$(map["divDialog"]).dialog('close');
						$(map["gridreload"]).datagrid('reload');
					}
					if (result.result== 0) {
						$.Loading.error(result.message);
					}
					$.Loading.hide();
				},
				error : function(e) {
					alert("出现错误 ，请重试");
				}
			};
			$(map["formId"]).ajaxSubmit(options);
		}
	}
	
	
	function append(id,flag) {
		var map = {}; // Map map = new HashMap();
		map["href"] = "/admin/prodoctMng/productAudit/edit_memberPrice.jspx?id=" + id+"&&weben="+flag;
		map["formId"] = "#editForm";
		map["url"] = "/admin/prodoctMng/productAudit/save_edit_memberPrice.jspx?ajax=yes";
		map["title"] = "修改会员价格";
		map["loadshow"] = "正在修改......";
		map["divDialog"] = "#divdia";
		map["gridreload"] = "#memberdata1";
		addDialog(map);
	}
	
	function addDialog(map) {
		$(map["divDialog"]).show();
		$(map["divDialog"]).dialog({
			title : map["title"],
			width : 600,
			height : 400,
			closed : false,
			cache : false,
			href : map["href"],
			modal : true,
			buttons : [ {
				text : '保存',
				iconCls : 'icon-ok',
				handler : function() {
					var savebtn = $(this);
	　　				var disabled=savebtn.hasClass("l-btn-disabled");
	　　				if(!disabled){
						 submitForm(map,savebtn);
					}
				}
			}, {
				text : '清空',
				handler : function() {
					clearForm(map);
				}
			} ]
		});
	}
 	
	function refresh() {
		$("#memberdata").datagrid("load",{
			page:1
		});
	}
	function refresh1() {
		$("#memberdata1").datagrid("load",{
			page:1
		});
	}
	function refresh2() {
		$("#memberdata2").datagrid("load",{
			page:1
		});
	}
	
	function audit() {
		var rows = $("#memberdata").datagrid("getSelections");
		if(rows.length <1){
			$.Loading.error("请选择要审核的选项");
			return;
		}
		if(!confirm("确认要审核该选项?")){
			return;
		}
		var options = {
				url : "/admin/prodoctMng/productAudit/auditProductAudit.jspx?ajax=yes",
				type : "POST",
				dataType : 'json',
				success : function(result){
					$.Loading.success(result.message);
					if(result.result == 1) {
						var rows = $('#memberdata').datagrid("getSelections");
						for( var i =0; i<rows.length; i++){
							var index = $('#memberdata').datagrid('getRowIndex',
									rows[i]);
							$('#memberdata').datagrid('reload');
						}
					}
				},
				error : function(e) {
					$.Loading.error("出现错误 ，请重试");
				}
			};
			$('#memberform').ajaxSubmit(options);
		}
	function unAudit1(){
		var rows = $("#memberdata1").datagrid("getSelections");
		if(rows.length <1){
			$.Loading.error("请选择要反审核的选项");
			return;
		}
		if(!confirm("确认要反审核该选项?")){
			return;
		}
		var options = {
				url: "/admin/prodoctMng/productAudit/unAuditProductAudit.jspx?ajax=yes",
				type: "post",
				dataType:'json',
				success:function(result){
					$.Loading.success(result.message);
					if(result.result ==1){
						var rows =$('#memberdata1').datagrid("getSelections");
						for(var i=0; i<rows.length; i++){
							var index = $('#memberdata').datagrid('getRowIndex',
									rows[i]);
							$('#memberdata1').datagrid('reload');
						}
					}
				},
				error:function(){
					$.Loading.error("出现错误, 请重试");
				}
		};
		$('#memberform1').ajaxSubmit(options);
	}
	
	function agree1(){//促销方法
		var rows = $("#memberdata1").datagrid("getSelections");
		if(rows.length <1){
			$.Loading.error("请选择要促销的选项");
			return;
		}
		if(!confirm("确认要促销该选项吗?")){
			return;
		}
		var options = {
				url: "/admin/prodoctMng/productAudit/agreeProductAudit.jspx?ajax=yes",
				type: "post",
				dataType:'json',
				success:function(result){
					$.Loading.success(result.message);
					if(result.result ==1){
						var rows =$('#memberdata1').datagrid("getSelections");
						for(var i=0; i<rows.length; i++){
							var index = $('#memberdata').datagrid('getRowIndex',
									rows[i]);
							$('#memberdata1').datagrid('reload');
						}
					}
				},
				error:function(){
					$.Loading.error("出现错误, 请重试");
				}
		};
		$('#memberform1').ajaxSubmit(options);
	}
	
	//取消促销的方法
	function cancel1() {
		var rows = $('#memberdata1').datagrid("getSelections");
		if (rows.length < 1) {
			$.Loading.error("请选择要取消的选项");
			return;
		}
		if (!confirm("确认取消选中的该选项？")) {
			return;
		}
		var options = {
			url : "/admin/index/sales/cancel?ajax=yes",
			type : "POST",
			dataType : 'json',
			success : function(result) {
				$.Loading.success(result.message);
				if (result.result==1) {
					var rows = $('#memberdata1').datagrid("getSelections");
					for ( var i = 0; i < rows.length; i++) {
						var index = $('#memberdata1').datagrid('getRowIndex',rows[i]);
						$('#memberdata1').datagrid('reload');
					}
				}
			},
			error:function(e) {
				$.Loading.error("出现错误 ，请重试");
			}
		};
		$('#memberform1').ajaxSubmit(options);
	}
	
	
	function reject(){
		var rows = $("#memberdata").datagrid("getSelections");
		if(rows.length < 1){
			$.Loading.error("请选择要驳回的选项");
			return;
		}
		if(!confirm("确认要驳回该选项?")){
			return;
		}
		var options = {
				url : "/admin/prodoctMng/productAudit/rejectProductAudit.jspx?ajax=yes",
				type : "POST",
				dataType : 'json',
				success : function(result) {
					$.Loading.success(result.message);
					if(result.result == 1) {
						var rows = $('#memberdata').datagrid("getSelections");
						for( var i =0; i<rows.length; i++){
							var index = $('#memberdata').datagrid('getRowIndex',
									rows[i]);
							$('#memberdata').datagrid('reload');
						}
					}
				},
				error : function(e) {
					$.Loading.error("出现错误 ，请重试");
				}
			};
			$('#memberform').ajaxSubmit(options);
		}
	
	function reject1(){
		var rows = $("#memberdata1").datagrid("getSelections");
		if(rows.length < 1){
			$.Loading.error("请选择要驳回的选项");
			return;
		}
		if(!confirm("确认要驳回该选项?")){
			return;
		}
		var options = {
				url : "/admin/prodoctMng/productAudit/rejectProductAudit.jspx?ajax=yes",
				type : "POST",
				dataType : 'json',
				success : function(result) {
					$.Loading.success(result.message);
					if(result.result == 1) {
						var rows = $('#memberdata1').datagrid("getSelections");
						for( var i =0; i<rows.length; i++){
							var index = $('#memberdata1').datagrid('getRowIndex',
									rows[i]);
							$('#memberdata1').datagrid('reload');
						}
					}
				},
				error : function(e) {
					$.Loading.error("出现错误 ，请重试");
				}
			};
			$('#memberform1').ajaxSubmit(options);
		}
	
	function del() {
		var rows = $("#memberdata").datagrid("getSelections");
		if(rows.length < 1){
			$.Loading.error("请选择要删除的选项");
			return;
		}
		if(!confirm("确认要删除该选项?")){
			return;
		}
		var options = {
				url: "/admin/prodoctMng/productAudit/deleteProductAudit.jspx?ajax=yes",
				type : "POST",
				dataType: 'json',
				success : function(result) {
					$.Loading.success(result.message);
					if(result.result == 1) {
						var rows = $('#memberdata').datagrid("getSelections");
						for( var i =0; i<rows.length; i++){
							var index = $('#memberdata').datagrid('getRowIndex',
									rows[i]);
							$('#memberdata').datagrid('deleteRow',index);
						}
					}
				},
				error : function(e){
					$.Loading.error("出现错误, 请重试");
				}
				};	
		$('#memberform').ajaxSubmit(options);
	}
	
	function del1() {
		var rows = $("#memberdata1").datagrid("getSelections");
		if(rows.length < 1){
			$.Loading.error("请选择要删除的选项");
			return;
		}
		if(!confirm("确认要删除该选项?")){
			return;
		}
		var options = {
				url: "/admin/prodoctMng/productAudit/deleteProductAudit.jspx?ajax=yes",
				type : "POST",
				dataType: 'json',
				success : function(result) {
					$.Loading.success(result.message);
					if(result.result == 1) {
						var rows = $('#memberdata1').datagrid("getSelections");
						for( var i =0; i<rows.length; i++){
							var index = $('#memberdata1').datagrid('getRowIndex',
									rows[i]);
							$('#memberdata1').datagrid('deleteRow',index);
						}
					}
				},
				error : function(e){
					$.Loading.error("出现错误, 请重试");
				}
				};	
		$('#memberform1').ajaxSubmit(options);
	}
	
	function del2() {
		var rows = $("#memberdata2").datagrid("getSelections");
		if(rows.length < 1){
			$.Loading.error("请选择要删除的选项");
			return;
		}
		if(!confirm("确认要删除该选项?")){
			return;
		}
		var options = {
				url: "/admin/prodoctMng/productAudit/deleteProductAudit.jspx?ajax=yes",
				type : "POST",
				dataType: 'json',
				success : function(result) {
					$.Loading.success(result.message);
					if(result.result == 1) {
						var rows = $('#memberdata2').datagrid("getSelections");
						for( var i =0; i<rows.length; i++){
							var index = $('#memberdata2').datagrid('getRowIndex',
									rows[i]);
							$('#memberdata2').datagrid('deleteRow',index);
						}
					}
				},
				error : function(e){
					$.Loading.error("出现错误, 请重试");
				}
				};	
		$('#memberform2').ajaxSubmit(options);
	}
	
</script>
</body>
</html>