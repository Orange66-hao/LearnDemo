<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>注册 - 晧辰仪联网</title>
[#include '/template/front/include/csslist.html' /]
<style>
.loginw{ position:relative; left:125px; top:60px; z-index:888; width:485px; height:375px; background-color:#fff;
box-shadow:1px 0px 3px #e6e6e6 inset,3px 0px 5px #d2d2d2,0px 3px 3px #e6e6e6 inset,0px 3px 5px #d2d2d2; -webkit-box-shadow:1px 0px 3px #e6e6e6 inset,3px 0px 5px #d2d2d2,0px 3px 3px #e6e6e6 inset,0px 3px 5px #d2d2d2; -moz-box-shadow:1px 0px 3px #e6e6e6 inset,3px 0px 5px #d2d2d2,0px 3px 3px #e6e6e6 inset,0px 3px 5px #d2d2d2; overflow:hidden; }

.loginnav{ clear:both; height:50px; line-height:50px; font-size:18px; font-family:"Microsoft Yahei"; background-color:#C2E4FF; }
.loginnav li{ float:left; width:100%; }

.loginform{ clear:both; width:370px; padding:15px 30px; }
.loginformd .row{ clear:both; padding:10px 0; height:34px; line-height:34px;}
.loginformd .row .x{ padding-right:5px; color:#f70000; font-family:"宋体"; font-style:normal; }
.loginformd .row .l{ float:left; width:70px; padding-right:10px; text-align:right; }
.loginformd .row .r{ float:left; width:280px; }
.loginformd .row .fl{ float:left; width:38%; padding-right:6%; }
.loginformd .row .txt{ width:96%; padding:0 2%; height:32px; line-height:32px; border:1px #ccc solid; }
.loginformd .row .txt2{ width:96%; padding:0 2%; border:1px #ccc solid; }
.loginformd .row .txt1{ width:40%; }
.loginformd .row .btn{border: 0; width:126px; height:40px; line-height:40px; background:url(/statics/front/images/ico21.png) no-repeat; color:#fff; text-align:center; font-size:18px; display:block; }
.loginformd .row .linkd a{ margin-right:25px; font-size:13px; color:#00a1fc; }
.loginformd .row .wjmm{ padding-left:15px; background:url(../images/ico22.png) center left no-repeat; }
</style>
</head>
<body>
<!--top-->
[#include '/template/front/include/header.html' /]
<!--./top--> 
 <!--loading-->
 <div class="listloadingd" id="indexLoading" ></div>
 <!--./loading-->
 <div class="indexContent">
<!--content-->
<div class="main userd">
<div class="umaintitd">当前位置：<a href="/" style="text-decoration:none;">首页</a> &gt; <a href="/user/user" style="text-decoration:none;">会员中心 </a>&gt; <a href="javascript:void;" style="text-decoration:none;"><span>快捷发布</span></a></div>
  <!--usernav-->
[#include '/template/front/include/usernav.html' /]
  <!--./usernav--> 
  
  <!--umainr-->
  <div class="umainr">
    <div class="umainrtitd"><span>快捷发布</span></div>
    
    <!--upublishd-->
    <div class="upublishd">
      <div class="upubnavd">
        <ul>
          <li><a href="/fastSale">产品销售</a></li>
          <li><a href="/fastBuy">产品求购</a></li>
          <li><a href="/fastRent">产品租赁</a></li>
          <li><a href="/fastWantRent">产品求租</a></li>
          <li><a href="/fastRepair">产品维修</a></li>
          <li><a href="/fastWantRepair">产品求修</a></li>
          <li><a href="#">计量校准</a></li>
        </ul>
      </div>
      <!--./upronavd--> 
      
      <!--快捷发布-->
      <div style="height:1050px;">
	      <!--loginwd-->
	      <div class="loginw">	      
	        <div class="logincontd loginformd">
	          <form name="n_loginForm" id="n_loginForm">
	         	<div class="row">
	         		<p style="padding-left:75px;font-size:14px;">请填写以下资料, 注册成功即可发布您的消息。</p>
	          	</div>
	          	<div class="row">
	              <p class="l"><i class="x">*</i>联系人：</p>
	              <p class="r">
	                <input type="text" name="contacts" id="contacts" class="txt">
	              </p>
	              <p class="annotate"></p>
	            </div>
	            <div class="row">
	              <p class="l"><i class="x">*</i>手机：</p>
	              <p class="r">
	                <input type="text" name="mobile" id="mobile" class="txt">
	              </p>
	              <p class="annotate"></p>
	            </div>
	            <div class="row">
	              <p class="l"><i class="x">*</i>邮箱：</p>
	              <p class="r">
	                <input type="text" name="email" id="email" class="txt">
	              </p>
	              <p class="annotate"></p>
	            </div>
	            <div class="row">
	              <p class="l">验证码：</p>
	              <div class="r">
	                <p class="fl">
	                  <input type="text" name="captcha" id="captcha" class="txt">
	                </p>
	                <p class="fl"><a href="javascript:;"><img id="captchImg" src="/captcha?captchaId=${captchaId}"></a></p>
	              </div>
	              <p class="annotate"></p>
	            </div>
	            <div class="row">
	              <p class="l">&nbsp;</p>
	              <p class="r"><input type="submit" value="注    册"  class="btn" id="normalBtn"></p>
	            </div>
	          </form>
	        </div>
	       </div>
	        <!--./logincontd-->        

      </div>
      <!--./upformd--> 
      
    </div>
    <!--./upublishd--> 
  </div>
  <!--./umainr--> 
</div>
<!--./content--> 
</div>
<!--foot--> 
[#include '/template/front/include/footer2.html' /]
<!--./foot--> 

[#include '/template/front/include/jslist.html' /]
[#-- validate 验证器 --]
<script type="text/javascript" src="/statics/validate/jquery.validate.min.js"></script>
<script type="text/javascript" src="/statics/validate/jquery.validate.method.min.js"></script>
[#-- 上传图片 --]
<script type="text/javascript" src="/adminthemes/new/js/ajaxupload.3.9.js"></script>
<script type="text/javascript">var redirectUrl = "[#if redirectUrl??]${redirectUrl}[#else]${base}[/#if]", modulus = "${modulus}", exponent = "${exponent}" , captchaId="${captchaId}";</script>
<script>
var $captchaImg = $("#captcha")
$nForm =$("#n_loginForm"), $nBtn = $nForm.find(":submit") ,

//验证码
$("#captchImg").click(function(){
	$(this).prop("src","/captcha?captchaId="+captchaId)
});
$(function(){
	$nForm.validate({
		rules:{
			contacts:{
				required:true
			},
			mobile:{
				required:true,
				pattern:/^1[2-9]\d{9}$/
			},
			email:{
				required:true,
				pattern:/^(([^()[\]\\.,;:\s@\"]+(\.[^()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,
				remote:{ 
					url:"/regist/check_email",
					type:"post",
					cache:false
				}
			},
		},
		messages:{
			contacts:{
				required:"请输入联系人"
			},
			mobile:{
				required:"请输入手机号",
				pattern:"手机号码格式不正确"
			},
			email:{
				required:"请输入邮箱",
				pattern:"邮箱格式不正确",
				remote:"该邮箱已注册"
			}
		},
		errorPlacement:function(error,element){
			element.closest("div.row").find(".annotate").text(error.text());
		},
		unhighlight: function(element){
			$(element).closest("div.row").find(".annotate").text("");
		},
		submitHandler:function(form){
			$nBtn.prop("disabled", true);
			$.ajax({
				url:"/fastRegister/fastRegister",
				data:$nForm.serialize()+"&captchaId="+captchaId,
				cache:false,
				type:"post",
				dataType:"json",
				beforeSend:function(request,settings){
					//request.setRequestHeader("token", $.cookie("token"));
					$nForm.find(".btn").val(" 注 册 中 ... ");
				},
				success:function(message){
					if(message.type=="success"){
						alert("保存成功，系统自动为您生成了用户和密码，请在注册的邮箱地址查看并激活账号！");
						window.location = "/fastRegister_sub.jhtml?email="+$("#email").val();
					}else{
						alert(message.cont);
						$captchaImg.val("");
						$nForm.find(".btn").val(" 注   册 ");
						$("#captchImg").click();
						$nBtn.prop("disabled", false);
					}
				},
				error:function(){
					$captchaImg.val("");
					$nForm.find(".btn").val(" 注   册 ");
					$("#captchImg").click();
					$nBtn.prop("disabled", false);
				}
			});
		}
		
	});
});
</script>
</body>
</html>
