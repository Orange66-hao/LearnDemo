
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=9" > </meta>
<title>嘉捷惠-后台管理</title>
<script type="text/javascript" src="/adminthemes/new/js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="/adminthemes/new/js/jquery-form-2.33.js"></script>

<link rel="stylesheet" type="text/css" href="/adminthemes/new/js/easy-ui/themes/gray/easyui.css"/>    
<link rel="stylesheet" type="text/css" href="/adminthemes/new/js/easy-ui/themes/icon.css"/>  
<script type="text/javascript" src="/adminthemes/new/js/easy-ui/jquery.easyui.min.js"></script>
<script type="text/javascript" src="/adminthemes/new/js/easy-ui/easyui-lang-zh_CN.js"></script>
<script type="text/javascript" src="/adminthemes/new/js/jquery.blockUI.js"></script>
<script type="text/javascript" src="/adminthemes/new/js/jquery.loading.js"></script>
<link href="/adminthemes/new/css/main.css" rel="stylesheet" type="text/css" />
<link href="/adminthemes/new/css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/adminthemes/new/js/ajaxupload.3.9.js"></script>
<script type="text/javascript" src="/editor/ckeditor362/ckeditor.js"></script>
</head>
<body>
<div class="main" style="background-color: white;">
	<div class="easyui-panel" style="border-style: none;">
		<form id="editForm" method="post" class="validate">
			<table>
				<tr>
					<th>品牌</th>
					<td><input class="easyui-combobox combo" type="text" 
						name="brandId" data-options="url:'/admin/basedata/brand/get_brand_names.jspx',method:'get',valueField:'id',
						textField:'text', width:307,require:true" style="height:30px"></input>
					</td>
				</tr>
				<tr>
					<th>型号</th>
					<td><input class="input_text easyui-validatebox" type="text" data-options="required:true" 
						name="proNo"  ></input>
					</td>
				</tr>
				<tr>
					<th>商品名称</th>
					<td><input class="input_text easyui-validatebox" type="text"  data-options="required:true" 
						name="proName"  ></input>
					</td>
				</tr>
				<tr>
					<th>商品英文名称</th>
					<td><input class="input_text easyui-validatebox" type="text" 
						name="proNameEn"  ></input>
					</td>
				</tr>
				 <tr>
					<th>设备类目</th>
					<td ><select style="width:307px;height:30px;" class="easyui-combotree" url="/admin/basedata/productclass/combotreeData.json" name="proClassId" />
					</td>
				</tr>
				<tr>
					<th>产品分类</th>
					<td ><select style="width:307px;height:30px;" multiple class="easyui-combotree" url="/admin/industyClass/combotreeData.json" name="indClassId" id="indClassId" />
					</td>
				</tr>
			 	<tr>
					<th>商品图片</th>
					<td><input id="exap" type="hidden" name="image"/>
						<img class="picImg" id="img" src=""style="width:80px;height:80px"/>
						<input class="button blueButton" type="button" id="btnPreViewImg" value="上传图片"/>
					</td>
				</tr>
				<tr>
					<th>产品描述</th>
					<td ><textarea id="proSynopsis" name="proSynopsis" class="ckeditor" ></textarea>
					</td>
				</tr>
				<tr>
					<th>英文描述</th>
					<td ><textarea id="proSynopsisEn" name="proSynopsisEn" class="ckeditor" ></textarea>
					</td>
				</tr>
				<tr>
					<th>详细信息</th>
					<td ><textarea id="proContent" name="proContent" class="ckeditor" ></textarea>
					</td>
				</tr>
				<tr>
					<th>英文详细信息</th>
					<td ><textarea id="proContentEn" name="proContentEn" class="ckeditor" ></textarea>
					</td>
				</tr>
			</table>
		</form>
	</div>
	<div class="buttonWrap fixed">
		<a id="searchAdvance" class="easyui-linkbutton" onclick="submitForm()"
			href="javascript:;">提交</a>
	</div>
</div>
<script>
	initAjaxUploadImg('btnPreViewImg','exap','img');
	
	$(function () {
	    CKEDITOR.replace('proSynopsis', { height: '240px', width: '600px' });
	    CKEDITOR.replace('proSynopsisEn', { height: '240px', width: '600px' });
	    CKEDITOR.replace('proContent', { height: '240px', width: '600px' });
	    CKEDITOR.replace('proContentEn', { height: '240px', width: '600px' });
	    
	});
	$("#isUnit").find("[name=isUnit]").change(function(){
		if($(this).val()==0){
			$("#proUnit").hide();
			$("#proUnit").prev().hide();
		}else{
			$("#proUnit").show();
			$("#proUnit").prev().show();
		}
	});
	function submitForm(){
		var formflag = $("#editForm").form().form('validate');
		if (formflag) {
			for(instance in CKEDITOR.instances){
				CKEDITOR.instances[instance].updateElement();
			}
			$.Loading.show("正在增加......");
			var options = {
				url : "/admin/basedata/basedata/save_basedata.jspx?ajax=yes",
				type : "POST",
				dataType : 'json',
				success : function(result) {
					if(result.result==1){
						$.Loading.success(result.message);
					}
					if(result.result==0){ 
						$.Loading.error(result.message);
					}
					$.Loading.hide();
				},
				error : function(e) {
					alert("出现错误 ，请重试");
				}
			};
			$("#editForm").ajaxSubmit(options);
		}
	}
</script>
</body>