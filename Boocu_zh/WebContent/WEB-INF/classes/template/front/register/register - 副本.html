<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>注册 - 晧辰仪联网</title>
<link rel="stylesheet" href="/statics/front/css/login.css" />
[#include '/template/front/include/csslist.html' /]
</head>
<body>
<!--top-->
<div class="toplogind">
  <div class="main">
    <div class="logod"><a href="/"><img src="/statics/front/images/logo.png"></a></div>
    <div class="titd">用户注册</div>
  </div>
</div>
<!--./top--> 

<!--content-->
<div class="main">
  <div class="mainregd">
    <div class="regnav">
      <ul>
      	    <li class="on"><a href="javascript:;" >手机号快捷注册</a></li>
        <li ><a href="javascript:;">个人用户注册</a></li>
        <li><a href="javascript:;">企业用户注册</a></li>
       
      </ul>
    </div>
    <!--./regnav--> 
    <div class="bc-fuwutiaokuan">
            <div class="bc-fwi"><span class="bc-fws">服务条款</span> <span class="bc-fwc">关闭</span></div>
            <div class="bc-fw-tt"><span>晧辰仪器设备物联网 服 务 条 款</span></div>
            <div class="bc-fw-zxyd"><span>请仔细阅读本协议</span></div>
            <div class="bc-fw-zxyd2"><span>晧辰仪器设备物联网依据以下条件和条款提供您所享有的服务</span></div>

            <div class="bc-neirong">
                <p>欢迎您注册并使用晧辰仪器设备物联网的服务,在注册及使用前请您仔细阅读本服务条款协议。本服务协议阐述之条款和条件适用于您使用中国化工仪器网所提供的各种工具和服务。</p>
                <p>
                    1、接受条款。
                    通过首页进入中国化工仪器网网站即表示您同意自己已经与中国化工仪器网订立本协议，且您
                    将受本协议的条款和条件 ("条款") 约束。中国化工仪器网可随时自行全权决定更改"条款"。
                    如"条款"有任何变更，中国化工仪器网将在本网站上刊载公告，通知予您。如您不同意相关变
                    更，必须停止使用"服务"。经修订的"条款"一经在中国化工仪器网网站公布后，立即自动生效。
                </p>
                <p>欢迎您注册并使用晧辰仪器设备物联网的服务,在注册及使用前请您仔细阅读本服务条款协议。本服务协议阐述之条款和条件适用于您使用中国化工仪器网所提供的各种工具和服务。</p>
                <p>
                    1、接受条款。
                    通过首页进入中国化工仪器网网站即表示您同意自己已经与中国化工仪器网订立本协议，且您
                    将受本协议的条款和条件 ("条款") 约束。中国化工仪器网可随时自行全权决定更改"条款"。
                    如"条款"有任何变更，中国化工仪器网将在本网站上刊载公告，通知予您。如您不同意相关变
                    更，必须停止使用"服务"。经修订的"条款"一经在中国化工仪器网网站公布后，立即自动生效。
                </p>
                <p>欢迎您注册并使用晧辰仪器设备物联网的服务,在注册及使用前请您仔细阅读本服务条款协议。本服务协议阐述之条款和条件适用于您使用中国化工仪器网所提供的各种工具和服务。</p>
                <p>
                    1、接受条款。
                    通过首页进入中国化工仪器网网站即表示您同意自己已经与中国化工仪器网订立本协议，且您
                    将受本协议的条款和条件 ("条款") 约束。中国化工仪器网可随时自行全权决定更改"条款"。
                    如"条款"有任何变更，中国化工仪器网将在本网站上刊载公告，通知予您。如您不同意相关变
                    更，必须停止使用"服务"。经修订的"条款"一经在中国化工仪器网网站公布后，立即自动生效。
                </p>
                <p>欢迎您注册并使用晧辰仪器设备物联网的服务,在注册及使用前请您仔细阅读本服务条款协议。本服务协议阐述之条款和条件适用于您使用中国化工仪器网所提供的各种工具和服务。</p>
                <p>
                    1、接受条款。
                    通过首页进入中国化工仪器网网站即表示您同意自己已经与中国化工仪器网订立本协议，且您
                    将受本协议的条款和条件 ("条款") 约束。中国化工仪器网可随时自行全权决定更改"条款"。
                    如"条款"有任何变更，中国化工仪器网将在本网站上刊载公告，通知予您。如您不同意相关变
                    更，必须停止使用"服务"。经修订的"条款"一经在中国化工仪器网网站公布后，立即自动生效。
                </p>
            </div>
        </div>
        
         <div class="regformd"  >
      <form id="phoneRegist" action="/" method="post" enctype="multipart/form-data" name="regForm" >
        <div class="row">
          <p class="l"><i class="x">*</i>手机号：</p>
          <p class="r">
            <input type="text" name="username"  class="txt">
          </p>
          <p class="rr"></p>
        </div>
        <div class="row">
          <p class="l"><i class="x">*</i>密 码：</p>
          <p class="r">
            <input type="password" name="password" id ='passwordPhone1' class="txt">
          </p>
          <p class="rr"></p>
        </div>
        <div class="row">
          <p class="l"><i class="x">*</i>再次输入密码：</p>
          <p class="r">
            <input type="password" name="password2" id="password2" class="txt">
          </p>
          <p class="rr"></p>
        </div>
        <div class="row">
          <p class="l"><i class="x">*</i>短信验证码：</p>
          <div class="r">
            <p class="fl w1">
              <input type="text" name="text" class="txt txt1">
            </p>
            &nbsp;&nbsp;
            <p class="fl w1">
              <input type="button" class="sendText" name="sendText" id="sendText" value="发送验证码">
            </p>
             <p class="rr"></p>
          </div>
        </div>
        <div class="row tkd">
          <p class="l">&nbsp;</p>
          <p class="r">
            <input type="checkbox" name="ckTK" id="ckTK" checked>
            我已阅读并同意<a href="#" class="blue" target="_blank">《晧辰仪联网服务条款》</a> </p>
        </div>
         <div class="row">
          <p class="l">&nbsp;</p>
          <p class="r"><input type="button" value="提交" class="subbtn" style="border: 0px;"></p>
        </div>
      </form>
  </div>
        
    <!--个人注册-->
    <div class="regformd" style="display:none;">
      <form id="perRegist" action="/" method="post" enctype="multipart/form-data" name="regForm" id="regForm">
      <input type="text" name="memberShip" id="memberShip1" value="personal" style="display:none;">
        <div class="row">
          <p class="l"><i class="x">*</i>登录名：</p>
          <p class="r">
            <input type="text" name="username" id="username" class="txt">
          </p>
          <p class="rr"></p>
        </div>
        <div class="row">
          <p class="l"><i class="x">*</i>密 码：</p>
          <p class="r">
            <input type="password" name="password1" id="password" class="txt">
            <input type="hidden" name="password" id="passwordRsa" class="txt">
          </p>
          <p class="rr"></p>
        </div>
        <div class="row">
          <p class="l"><i class="x">*</i>再次输入密码：</p>
          <p class="r">
            <input type="password" name="password2" id="password2" class="txt">
          </p>
          <p class="rr"></p>
        </div>
        <div class="row">
          <p class="l"><i class="x">*</i>邮 箱：</p>
          <p class="r">
            <input type="text" name="email" id="email" class="txt">
          </p>
          <p class="rr"></p>
        </div>
        <div class="row">
          <p class="l">联系人：</p>
          <p class="r">
            <input type="text" name="realName" id="realName" class="txt">
          </p>
          <p class="rr"></p>
        </div>
        <div class="row">
          <p class="l">手机号码：</p>
          <p class="r">
            <input type="text" name="mobile" id="mobile" class="txt">
          </p>
           <p class="rr"></p>
        </div>
        <div class="row">
          <p class="l">身份证号码：</p>
          <p class="r">
            <input type="text" name="identityNo" id="identityNo" class="txt">
          </p>
           <p class="rr"></p>
        </div>
        <div class="row">
          <p class="l">常用仪器：</p>
          <div class="r">
            <p class="fl w1">
              <input type="text" name="brandName" id="brandName" class="txt txt1" placeholder="品牌">
            </p>
            <p class="fl w1">
              <input type="text" name="productClassName" id="productClassName" class="txt txt1" placeholder="型号">
            </p>
            <p class="fl w1">
              <input type="text" name="proName" id="proName" class="txt txt1" placeholder="名称">
            </p>
             <p class="rr"></p>
          </div>
        </div>
        <div class="row">
          <p class="l">主营产品：</p>
          <p class="r">
            <input type="text" name="mainProduct" id="mainProduct" class="txt">
          </p>
           <p class="rr"></p>
        </div>
        <div class="row">
          <p class="l">工作单位：</p>
          <p class="r">
            <input type="text" name="coName" id="coName" class="txt">
          </p>
        </div>
        <div class="row">
          <p class="l">职 位：</p>
          <p class="r">
            <input type="text" name="wordPost" id="wordPost" class="txt">
          </p>
           <p class="rr"></p>
        </div>
        <div class="row sf">
          <p class="l">身份证正面：</p>
          <div class="r">
            <p class="fl w2 identifyImg" name="identifyImgFront">
            </p>
             <p class="rr"></p>
            <p class="fl w3"><img src="/statics/front/images/temp/p9_1.jpg"></p>
          </div>
        </div>
        <div class="row sf">
          <p class="l">身份证反面：</p>
          <div class="r">
            <p class="fl w2 identifyImg" name="identifyImgBack">
            </p>
             <p class="rr"></p>
            <p class="fl w3"><img src="/statics/front/images/temp/p9_2.jpg"></p>
          </div>
        </div>
        <div class="row">
          <p class="l">固定电话：</p><!-- 拼成固话 todo -->
          <div class="r">
            <p class="fl w4">
              <input type="text" name="txtAre" id="txtAre" class="txt txt1" placeholder="区号">
            </p>
            <p class="fl w5">
              <input type="text" name="txtTel" id="txtTel" class="txt txt1" placeholder="电话">
            </p>
            <p class="fl w4">
              <input type="text" name="txtExt" id="txtExt" class="txt txt1" placeholder="分机">
            </p>
             <p class="rr"></p>
          </div>
        </div>
        <div class="row">
          <p class="l">QQ号码：</p>
          <p class="r">
            <input type="text" name="qq" id="qq" class="txt">
          </p>
           <p class="rr"></p>
        </div>
        <div class="row">
          <p class="l">微信号：</p>
          <p class="r">
            <input type="text" name="weixin" id="weixin" class="txt">
          </p>
           <p class="rr"></p>
        </div>
        <div class="row">
          <p class="l">微博号：</p>
          <p class="r">
            <input type="text" name="weibo" id="weibo" class="txt">
          </p>
           <p class="rr"></p>
        </div>
        <div class="row">
          <p class="l"><i class="x">*</i>验证码：</p>
          <div class="r">
            <p class="fl w1">
              <input type="text" name="captcha" id="captcha" class="txt txt1">
            </p>
            <p class="fl w5" style="padding-left:15px;"><a href="javascript:;"><img id="captchaImg" src="/captcha?captchaId=${captchaId}"></a></p>
             <p class="rr"></p>
          </div>
        </div>
        <div class="row tkd">
          <p class="l">&nbsp;</p>
          <p class="r">
            <input type="checkbox" name="ckTK" id="ckTK" checked>
            我已阅读并同意<a href="javascript:void;" class="zhc-fwtk">《晧辰仪联网服务条款》</a> </p>
        </div>
        <div class="row">
          <p class="l">&nbsp;</p>
          <p class="r"><input type="submit" value="提交" class="subbtn" style="border: 0px;"></p>
        </div>
      </form>
    </div>
    <!--./regformd--> 
    
    <!--企业注册-->
    <div class="regformd" style="display:none;">
      <form  id="enRegist" action="/" method="post" enctype="multipart/form-data" name="regForm" id="regForm">
        <input type="text" name="memberShip" id="memberShip2" value="enterprise" style="display:none;">
        <div class="row">
          <p class="l"><i class="x">*</i>企业登录名：</p>
          <p class="r">
            <input type="text" name="username" id="username" class="txt">
          </p>
          <p class="rr"></p>
        </div>
        <div class="row">
          <p class="l"><i class="x">*</i>密 码：</p>
          <p class="r">
            <input type="password" name="password1" id="password1" class="txt">
            <input type="hidden" name="password" id="passwordRsa1" class="txt">
          </p>
          <p class="rr"></p>
        </div>
        <div class="row">
          <p class="l"><i class="x">*</i>再次输入密码：</p>
          <p class="r">
            <input type="password" name="password2" id="password2" class="txt">
          </p>
          <p class="rr"></p>
        </div>
        <div class="row">
          <p class="l"><i class="x">*</i>邮箱：</p>
          <p class="r">
            <input type="text" name="email" id="email" class="txt">
          </p>
          <p class="rr"></p>
        </div>
        <div class="row">
          <p class="l"><i class="x">*</i>公司名称：</p>
          <p class="r">
            <input type="text" name="coName" id="coName" class="txt">
          </p>
           <p class="rr">和营业执照保持一致</p>
        </div>
        <div class="row">
          <p class="l">职 务：</p>
          <p class="r">
            <input type="text" name="wordPost" id="wordPost" class="txt">
          </p>
           <p class="rr"></p>
        </div>
        <div class="row">
          <p class="l">联系人：</p>
          <p class="r">
            <input type="text" name="realName" id="realName" class="txt">
          </p>
          <p class="rr"></p>
        </div>
        <div class="row">
          <p class="l">常用仪器：</p>
          <div class="r">
            <p class="fl w1">
              <input type="text" name="brandName" id="brandName" class="txt txt1" placeholder="品牌">
            </p>
            <p class="fl w1">
              <input type="text" name="productClassName" id="productClassName" class="txt txt1" placeholder="型号">
            </p>
            <p class="fl w1">
              <input type="text" name="proName" id="proName" class="txt txt1" placeholder="名称">
            </p>
             <p class="rr"></p>
          </div>
        </div>
        <div class="row">
          <p class="l">公司地址：</p>
          <p class="r">
            <input type="text" name="address" id="address" class="txt">
          </p>
           <p class="rr"></p>
        </div>
        <div class="row">
          <p class="l">详细地址：</p>
          <p class="r">
            <input type="text" name="deAddress" id="deAddress" class="txt">
          </p>
           <p class="rr"></p>
        </div>
        <div class="row">
          <p class="l">主营产品：</p>
          <p class="r">
            <input type="text" name="mainProduct" id="mainProduct" class="txt">
          </p>
           <p class="rr"></p>
        </div>
        <div class="row">
        	<p class="l">营业执照号码：</p>
        	<p class="r">
        		<input type="text" name="licenseNo" id="licenseNo" class="txt">
        	</p>
        	<p class="rr">和营业执照须保持一致</p>
        </div>
        <div class="row sf">
          <p class="l">营业执照：</p>
          <div class="r">
            <p class="fl w2 licenseImg" name="licenseImg">
            </p>
             <p class="rr"></p>
            <p class="fl w3"><img src="/statics/front/images/temp/p9_1.jpg"></p>
          </div>
        </div>
        <div class="row">
          <p class="l">固定电话：</p><!-- 拼成固话 todo -->
          <div class="r">
            <p class="fl w4">
              <input type="text" name="txtAre" id="txtAre" class="txt txt1" placeholder="区号">
            </p>
            <p class="fl w5">
              <input type="text" name="txtTel" id="txtTel" class="txt txt1" placeholder="电话">
            </p>
            <p class="fl w4">
              <input type="text" name="txtExt" id="txtExt" class="txt txt1" placeholder="分机">
            </p>
             <p class="rr"></p>
          </div>
        </div>
        <div class="row">
          <p class="l">手机号码：</p>
          <p class="r">
            <input type="text" name="mobile" id="mobile" class="txt">
          </p>
           <p class="rr"></p>
        </div>
        <div class="row">
          <p class="l">公司传真：</p>
          <p class="r">
            <input type="text" name="fax" id="fax" class="txt">
          </p>
           <p class="rr"></p>
        </div>
        <div class="row">
          <p class="l">公司网址：</p>
          <p class="r">
            <input type="text" name="url" id="url" class="txt">
          </p>
           <p class="rr"></p>
        </div>
        <div class="row">
          <p class="l">QQ号码：</p>
          <p class="r">
            <input type="text" name="qq" id="qq" class="txt">
          </p>
           <p class="rr"></p>
        </div>
        <div class="row">
          <p class="l">微信号：</p>
          <p class="r">
            <input type="text" name="weixin" id="weixin" class="txt">
          </p>
           <p class="rr"></p>
        </div>
        <div class="row">
          <p class="l"><i class="x">*</i>验证码：</p>
          <div class="r">
            <p class="fl w1">
              <input type="text" name="captcha" id="captcha" class="txt txt1">
            </p>
            <p class="fl w5" style="padding-left:15px;"><a href="javascript:;"><img id="captchImg" src="/captcha?captchaId=${captchaId}"></a></p>
             <p class="rr"></p>
          </div>
        </div>
        <div class="row tkd">
          <p class="l">&nbsp;</p>
          <p class="r">
            <input type="checkbox" name="ckTK" id="ckTK" checked>
            我已阅读并同意<a href="javascript:void;" class="zhc-fwtk">《晧辰仪联网服务条款》</a> </p>
        </div>
        <div class="row">
          <p class="l">&nbsp;</p>
          <p class="r"><input type="submit" value="提交" class="subbtn" style="border: 0px;"></p>
        </div>
      </form>
    </div>
    <!--./regformd--> 
    
   
</div>
<!--./content--> 
[#include '/template/front/include/footer.html' /]
[#include '/template/front/include/jslist.html' /]
[#-- RSA加密 --]
<script type="text/javascript" src="${base}/adminthemes/js/tools/rsa/jsbn.min.js?version=${setting.basic.siteVersion}"></script>
<script type="text/javascript" src="${base}/adminthemes/js/tools/rsa/prng4.min.js?version=${setting.basic.siteVersion}"></script>
<script type="text/javascript" src="${base}/adminthemes/js/tools/rsa/rng.min.js?version=${setting.basic.siteVersion}"></script>
<script type="text/javascript" src="${base}/adminthemes/js/tools/rsa/rsa.min.js?version=${setting.basic.siteVersion}"></script>
<script type="text/javascript" src="${base}/adminthemes/js/tools/base/base64.min.js?version=${setting.basic.siteVersion}"></script>
[#-- validate 验证器 --]
<script type="text/javascript" src="/statics/validate/jquery.validate.min.js"></script>
<script type="text/javascript" src="/statics/validate/jquery.validate.method.min.js"></script>
[#-- 上传图片 --]
<script type="text/javascript" src="/adminthemes/new/js/ajaxupload.3.9.js"></script>
<script type="text/javascript">var redirectUrl = "[#if redirectUrl??]${redirectUrl}[#else]${base}[/#if]", modulus = "${modulus}", exponent = "${exponent}" , captchaId="${captchaId}";</script>
<script type="text/javascript">
var $captcha= $("#captcha");
var $perForm = $("#perRegist");
var $enForm = $("#enRegist");
var $phoneForm = $("#phoneRegist");
var rsaKey = new RSAKey();
rsaKey.setPublic(b64tohex(modulus), b64tohex(exponent));

//初始化上传图片
$(".identifyImg").attr("url","/fileUpload/img.jspx").each(function(){
	$(this).imgUpload();
});
$(".licenseImg").attr("url","/fileUpload/img.jspx").each(function(){
	$(this).imgUpload();
});
//切换登录方式
$(".regnav li").click(function(){
	$(".regnav li").removeClass("on");
	$(this).addClass("on");
	$(".regformd").hide();
	$(".regformd").eq($(this).index()).fadeIn(200);
});

//验证码变换
$("#captchaImg").click(function(){
	$(this).prop("src","/captcha?captchaId="+captchaId)
});
$("#captchImg").click(function(){
	$(this).prop("src","/captcha?captchaId="+captchaId)
});

$(function(){
    $("span.bc-fwc").click(function () {
        $("div.bc-fuwutiaokuan").hide();
    });
    $(".zhc-fwtk").click(function () {
        $("div.bc-fuwutiaokuan").show();
    });
	var validate = $("#perRegist").validate({
		rules:{
			username:{
				required:true,
				pattern: /^[0-9a-z_A-Z\u4e00-\u9fa5]+$/,
				minlength:5,
				maxlength:20,
				remote:{
					url:"/regist/check_username",
					type:"post",
					cache:false
				}
			},
			password1:{
				required:true,
				pattern: /^[0-9a-z_A-Z\u4e00-\u9fa5]+$/,
				minlength:5,
				maxlength:20,
			},
			password2:{
				required:true,
				equalTo:"#password"
			},
			email:{
				required:true,
				pattern:/^(([^()[\]\\.,;:\s@\"]+(\.[^()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,
				remote:{ 
					url:"/regist/check_email",
					type:"post",
					cache:false
				}
			},
			contacts:{
				required:true
			},
			mobile:{
				required:true,
				pattern:/^1[2-9]\d{9}$/
			},
			identityNo:{
				pattern:/^((\d{15})|(\d{17}(?:\d|x|X)))$/
			}
			
		},
		messages:{
			username:{
				required:"请输入用户名",
				pattern: "用户名只允许包含中文、英文、数字、下划线",
				minlength: "请输入5-20位用户名",
				maxlength: "请输入5-20位用户名",
				remote:"该用户名已存在"
			},
			password1:{
				required:"请输入密码",
				pattern: "密码只允许英文数字及符号^&\"<>",
				minlength: "密码必须在5-20位之间",
				maxlength: "密码必须在5-20位之间",
			},
			password2:{
				required:"请再次输入密码",
				equalTo: "两次密码输入不一致之间"
			},
			email:{
				required:"请输入邮箱",
				pattern:"请输入正确的邮箱格式",
				remote:"该邮箱已注册"
			},
			contacts:{
				required:"请输入联系人"
			},
			mobile:{
				required:"请输入手机号码",
				pattern:"请输入正确的手机号码格式"
			},
			identityNo : {
				pattern:"请输入正确的身份证格式"
			}
		},
		errorPlacement:function(error,element){
			element.closest(".row").find(".rr").text(error.text());
		},
		unhighlight:function(element){
			$(element).closest(".row").find(".rr").text("");
		},
		submitHandler:function(form){
			$("#passwordRsa").val(hex2b64(rsaKey.encrypt($("#password").val())));
			$(this).find(".subbtn").prop("disabled",true);
			$.ajax({
				url:"/register/register",
				data:$perForm.serialize()+"&captchaId="+captchaId,
				dataType:"json",
				cache:false,
				type:"post",
				beforeSend:function(){
					$perForm.find(".subbtn").val("注册中...");
				},
				success:function(message){
					if(message.type == "success"){
						alert("注册成功,请去注册的邮箱地址激活!")
						window.location = "/register_sub.jhtml";
					}else{
						alert(message.cont);
						$captcha.val("");
						$perForm.find(".subbtn").val(" 注 册 ");
						$perForm.find(".subbtn").prop("disabled", false);
					}
				},
				error:function(){
					$captcha.val("");
					$perForm.find(".subbtn").val(" 注 册 ");
					$perForm.find(".subbtn").prop("disabled", false);
				}
			});
		}
	});
});
$(function(){
	var validate = $("#enRegist").validate({
		rules:{
			username:{
				required:true,
				pattern: /^[0-9a-z_A-Z\u4e00-\u9fa5]+$/,
				minlength:5,
				maxlength:20,
				remote:{
					url:"/regist/check_username",
					type:"post",
					cache:false
				}
			},
			password1:{
				required:true,
				pattern: /^[0-9a-z_A-Z\u4e00-\u9fa5]+$/,
				minlength:5,
				maxlength:20
			},
			password2:{
				required:true,
				equalTo:"#password1"
			},
			email:{
				required:true,
				pattern:/^(([^()[\]\\.,;:\s@\"]+(\.[^()[\]\\.,;:\s@\"]+)*)|(\".+\"))@((\[[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\.[0-9]{1,3}\])|(([a-zA-Z\-0-9]+\.)+[a-zA-Z]{2,}))$/,
				remote:{ 
					url:"/regist/check_email",
					type:"post",
					cache:false
				}
			},
			coName:{
				required:true
			},
			mobile:{
				pattern:/^1[2-9]\d{9}$/
			},
			identityNo:{
				pattern:/^((\d{15})|(\d{17}(?:\d|x|X)))$/
			}
			
		},
		messages:{
			username:{
				required:"请输入用户名",
				pattern: "用户名只允许包含中文、英文、数字、下划线",
				minlength: "请输入5-20位用户名",
				maxlength: "请输入5-20位用户名",
				remote:"该用户名已存在"
			},
			password1:{
				required:"请输入密码",
				pattern: "密码只允许英文数字及符号^&\"<>",
				minlength:"密码必须在5-20位之间",
				maxlength:"密码必须在5-20位之间"
			},
			password2:{
				required:"请再次输入密码",
				equalTo: "两次密码输入不一致之间"
			},
			email:{
				required:"请输入邮箱",
				pattern:"请输入正确的邮箱格式",
				remote:"该邮箱已注册"
			},
			coName:{
				required:"请输入公司名称"
			},
			mobile:{
				pattern:"请输入正确的手机号码格式"
			}
		},
		errorPlacement:function(error,element){
			element.closest(".row").find(".rr").text(error.text());
		},
		unhighlight:function(element){
			$(element).closest(".row").find(".rr").text("");
		},
		submitHandler:function(form){
			$("#passwordRsa1").val(hex2b64(rsaKey.encrypt($("#password1").val())));
			$(this).find(".subbtn").prop("disabled",true);
			$.ajax({
				url:"/register/register",
				data:$enForm.serialize()+"&captchaId="+captchaId,
				dataType:"json",
				cache:false,
				type:"post",
				beforeSend:function(){
					$enForm.find(".subbtn").val("注册中...");
				},
				success:function(message){
					if(message.type == "success"){
						alert("注册成功,请去注册的邮箱地址激活!");
						window.location = "/register_sub.jhtml";
					}else{
						alert(message.cont);
						$captcha.val("");
						$enForm.find(".subbtn").val(" 注 册 ");
						$enForm.find(".subbtn").prop("disabled", false);
					}
				},
				error:function(){
					$captcha.val("");
					$enForm.find(".subbtn").val(" 注 册 ");
					$enForm.find(".subbtn").prop("disabled", false);
				}
			});
		}
	});
});
$(function(){
	var validate2 = $("#phoneRegist").validate({
		rules:{
			username:{
				required:true,
				pattern: /^1[2-9]\d{9}$/,
				minlength:10,
				maxlength:11,
				remote:{
					url:"/regist/check_username",
					type:"post",
					cache:false
				}
			},
			password:{
				required:true,
				pattern: /^[0-9a-z_A-Z\u4e00-\u9fa5]+$/,
				minlength:5,
				maxlength:20
			},
			password2:{
				required:true,
				equalTo:"#passwordPhone1"
			},
			text:{
				require:true
			}
		},
		messages:{
			username:{
				required:"请输入手机号码",
				pattern: "手机号码格式不正确",
				minlength: "请输入10~11位用户名",
				maxlength: "请输入10~11位用户名",
				remote:"该手机号已存在"
			},
			password:{
				required:"请输入密码",
				pattern: "密码只允许英文数字及符号^&\"<>",
				minlength:"密码必须在5-20位之间",
				maxlength:"密码必须在5-20位之间"
			},
			password2:{
				required:"请再次输入密码",
				equalTo: "两次密码输入不一致之间"
			},
			text:{
				require:"请输入短信验证码"
			}
		},
		errorPlacement:function(error,element){
			element.closest(".row").find(".rr").text(error.text());
		},
		unhighlight:function(element){
			$(element).closest(".row").find(".rr").text("");
		},
		submitHandler:function(form){
			alert(123);
			/* var pwd = $(this).find("input[name='password']").val();
			$(this).find("input[name='password']").val(hex2b64(rsaKey.encrypt(pwd)));
			$(this).find(".subbtn").prop("disabled",true);
			$.ajax({
				url:"/register/phoneRegister",
				data:$phoneForm.serialize(),
				dataType:"json",
				cache:false,
				type:"post",
				beforeSend:function(){
					$phoneForm.find(".subbtn").val("注册中...");
				},
				success:function(message){
					if(message.type == "success"){
						window.location = "/index.jhtml";
					}else{
						alert(message.cont);
						$phoneForm.find("input[name='text']").val("");
						$phoneForm.find(".subbtn").val(" 注 册 ");
						$phoneForm.find(".subbtn").prop("disabled", false);
					}
				},
				error:function(){
					$phoneForm.find("input[name='text']").val("");
					$phoneForm.find(".subbtn").val(" 注 册 ");
					$phoneForm.find(".subbtn").prop("disabled", false);
				}
			}); */
		}
	});
	
	$("#phoneRegist").find(".subbtn").on("click",function(){
		$.ajax({
			url:"/register/phoneRegister",
			data:$phoneForm.serialize(),
			dataType:"json",
			cache:false,
			type:"post",
			beforeSend:function(){
				$phoneForm.find(".subbtn").val("注册中...");
			},
			success:function(message){
				if(message.type == "success"){
					alert("注册成功!!");
					window.location = "/login.jhtml";
					
				}else{
					alert(message.cont);
					$phoneForm.find("input[name='text']").val("");
					$phoneForm.find(".subbtn").val(" 注 册 ");
					$phoneForm.find(".subbtn").prop("disabled", false);
				}
			},
			error:function(){
				$phoneForm.find("input[name='text']").val("");
				$phoneForm.find(".subbtn").val(" 注 册 ");
				$phoneForm.find(".subbtn").prop("disabled", false);
			}
		})
	})
	
	$("#sendText").on("click",function(){
		var phone = $(this).closest("form").find("input[name='username']").val();
		console.log(phone);
		sendPhoneText(phone);
	})
	
});

function sendPhoneText(phone){
	$.ajax({
		url:"/text/sendRegistTwo",
		data:{username:phone},
		dataType:"json",
		type:"post",
		success:function(){
			alert("发送成功!");			
		},
		error:function(){
			alert("网络异常,请重试!");
		}
	});
}
</script>
</body>
</html>
