<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<script type="text/javascript" src="/frontthemes/js/sumodelcollection.js"></script>
<!--下面两个是品牌选项框提示选择下拉选项的样式-->
<link rel="stylesheet" href="/statics/front/css/postbirdAlertBox.min.css" />
<script type="text/javascript" src="/statics/front/js/postbirdAlertBox.min.js"></script>
<div class="main" style="background-color: white;">
	<div class="easyui-panel" style="border-style: none;">
		<form id="addForm" method="post" class="validate">
			<table>
				<tr style="display:none">
					<th>id</th>
					<td><input class="input_text easyui-validatebox" type="text"  id="id"
							   name="id" data-options="" value="${item.id}" ></input>
					</td>
				</tr>
				<tr>
					<th>品牌</th>
					<td>
						<select style="width: 308px; height: 36px;"
								class="easyui-combobox"
								name="su_brand" id="su_brand_coll" data-options="multiple:'true',cascadeCheck:false,valueField:'id',textField:'text',editable:false"/> </select>
					</td>
				</tr>
				<tr>
				<tr>
					<th>公司名</th>
					<td>
						<input class="easyui-validatebox" id="name" name="name" style="width: 308px; height: 36px;" data-options="value:${item.name}"/>
						<input type="hidden" id=name_fujian value="true"/>
					</td>
					<td><span class="rr_model" style="color: red"></span></td>
				</tr>
				<tr>
					<th>公司网站</th>
					<td>
						<input style="width: 300px; height: 21px;" class="input_text easyui-validatebox" type="text" id="su_website_coll"
							   name="su_website" data-options="required:false" value="${item.website}"></input>
					</td>
				</tr>
				<tr>
					<th>行业分类</th>
					<td>

						<!-- <select style="width: 308px; height: 36px;"
										class="easyui-combobox"
										 name="su_industry_class" data-options="url:'/admin/suIndustyClass/combotreeData.json',valueField:'id',textField:'text',editable:true,multiple:true"
										id="su_industry_class_coll" required="required"/> </select> -->
						<input style="width: 300px; height: 21px;" class="input_text easyui-validatebox" type="text" id="su_industry_class_coll"
							   name="su_industry_class" data-options="required:false" value="${item.su_industry_class}"></input>

					</td>
				</tr>
				<tr>
					<th>性质</th>
					<td>
						<select style="width: 308px; height: 36px;" id="type" name="type" class="input_text" required="required">
							[#if item.type=1]
							<option value="1" selected="selected">进口生产厂商</option>
							<option value="2">国产生产厂商</option>
							<option value="3">进口代理商</option>
							<option value="4">国产代理商</option>
							<option value="5">进口经销商</option>
							<option value="6">国产经销商</option>
							<option value="7">二手同行</option>
							<option value="8">系统集成商</option>
							[#else]
							[#if item.type=2]
							<option value="1">进口生产厂商</option>
							<option value="2" selected="selected">国产生产厂商</option>
							<option value="3">进口代理商</option>
							<option value="4">国产代理商</option>
							<option value="5">进口经销商</option>
							<option value="6">国产经销商</option>
							<option value="7">二手同行</option>
							<option value="8">系统集成商</option>
							[#else]
							[#if item.type=3]
							<option value="1">进口生产厂商</option>
							<option value="2">国产生产厂商</option>
							<option value="3" selected="selected">进口代理商</option>
							<option value="4">国产代理商</option>
							<option value="5">进口经销商</option>
							<option value="6">国产经销商</option>
							<option value="7">二手同行</option>
							<option value="8">系统集成商</option>
							[#else]
							[#if item.type=4]
							<option value="1">进口生产厂商</option>
							<option value="2">国产生产厂商</option>
							<option value="3">进口代理商</option>
							<option value="4" selected="selected">国产代理商</option>
							<option value="5">进口经销商</option>
							<option value="6">国产经销商</option>
							<option value="7">二手同行</option>
							<option value="8">系统集成商</option>
							[#else]<!--没选时默认为生产厂商-->
							[#if item.type=5]
							<option value="1">进口生产厂商</option>
							<option value="2">国产生产厂商</option>
							<option value="3">进口代理商</option>
							<option value="4">国产代理商</option>
							<option value="5" selected="selected">进口经销商</option>
							<option value="6">国产经销商</option>
							<option value="7">二手同行</option>
							<option value="8">系统集成商</option>
							[#else]
							[#if item.type=6]
							<option value="1">进口生产厂商</option>
							<option value="2">国产生产厂商</option>
							<option value="3">进口代理商</option>
							<option value="4">国产代理商</option>
							<option value="5">进口经销商</option>
							<option value="6" selected="selected">国产经销商</option>
							<option value="7">二手同行</option>
							<option value="8">系统集成商</option>
							[#else]
							[#if item.type=7]
							<option value="1">进口生产厂商</option>
							<option value="2">国产生产厂商</option>
							<option value="3">进口代理商</option>
							<option value="4">国产代理商</option>
							<option value="5">进口经销商</option>
							<option value="6">国产经销商</option>
							<option value="7" selected="selected">二手同行</option>
							<option value="8">系统集成商</option>
							[#else]
							[#if item.type=8]
							<option value="1">进口生产厂商</option>
							<option value="2">国产生产厂商</option>
							<option value="3">进口代理商</option>
							<option value="4">国产代理商</option>
							<option value="5">进口经销商</option>
							<option value="6">国产经销商</option>
							<option value="7">二手同行</option>
							<option value="8" selected="selected">系统集成商</option>
							[#else]
							<option value="" selected="selected">请选择</option>
							<option value="1">进口生产厂商</option>
							<option value="2">国产生产厂商</option>
							<option value="3">进口代理商</option>
							<option value="4">国产代理商</option>
							<option value="5">进口经销商</option>
							<option value="6">国产经销商</option>
							<option value="7">二手同行</option>
							<option value="8">系统集成商</option>
							[/#if]
							[/#if]
							[/#if]
							[/#if]
							[/#if]
							[/#if]
							[/#if]
							[/#if]
						</select>

					</td>
				</tr>

				<tr id="multiple_list">
					<th>主营设备品牌</th>
					<td >
						<select style="width: 140px; height: 36px;"  class="easyui-combobox" name="brand" id="brand"></select>
						型号<input class="input_text easyui-validatebox" style="width: 100px" type="text"
									 id="model" name="model" data-options="required:false" onblur="additional(0, null, this, null, null)"/>
						<input class="input_text easyui-validatebox" style="display:none" type="number" value="1"
									 id="number" name="number" data-options="required:false" onblur="additional(0, null, null, this, null)"/>
						名称<select style="width: 140px; height: 36px;"  class="easyui-combotree" name="su_productclass_name" id="su_productclass_name"></select>
						<a href="javascript:void(0)" class="button blueButton"
						   data-options="iconCls:'icon-add',plain:true" onclick="addInput()">再加一个型号</a>
					</td>
					<td><span class="rr_brand_and_model" style="color: red"></span></td>
				</tr>
				<th>常用仪器名称</th>
					<td>

						<!-- <select style="width: 308px; height: 36px;"
										class="easyui-combobox"
										  data-options="url:'/admin/basedata/suproductclass/get_sumember_names.jspx',multiple:true,valueField:'id',textField:'text',editable:false"
										id="su_productclass_coll" name="su_productclass" required="required"/> </select> -->
						<input style="width: 300px; height: 21px;" class="input_text easyui-validatebox" type="text" id="su_productclass_coll"
							   name="su_productclass" data-options="required:false" value="${item.su_productclass}"></input><span style="color:red">* 多个请用逗号隔开</span>
					</td>
				</tr>
				<tr>
					<th>常用仪器品牌型号</th>
					<td>

						<input style="width: 300px; height: 21px;" class="input_text easyui-validatebox" type="text" id="su_productclass_type_coll"
							   name="su_productclass" data-options="required:false" value="${item.su_productclass_type}"></input><span style="color:red">* 多个请用逗号隔开</span>
					</td>
				</tr>
				<!--<tr>
					<th>品牌</th>
					<td>

						&lt;!&ndash; <select style="width: 308px; height: 36px;"
										class="easyui-combobox"
										 name="su_brand"
										id="su_brand_coll" data-options="multiple:true,valueField:'id',textField:'text',editable:false" required="required"/> </select>
										<input type="hidden" id=su_brand_fujian value="true"/> &ndash;&gt;
					</td>
				</tr>-->
				<!-- <tr>
					<th ">型号</th>
					<td>

						<select style="width: 308px; height: 36px;"
										class="easyui-combobox"
										 name="su_model"
										id="su_model_coll" data-options="multiple:true,cascadeCheck:false,valueField:'id',textField:'text',editable:false" required="required"/> </select>
										<input type="hidden" id=su_model_fujian value="true"/>
					</td>
				</tr> -->
				<tr>
					<th>订阅内容</th>
					<td>
						<input style="width: 300px; height: 21px;" class="input_text easyui-validatebox" type="text" id="su_subscribe_content_coll"
							   name="subscribe_content" data-options="required:false" value="${item.subscribe_content}"></input>
					</td>
				</tr>
				<tr id="trr1" >
					<th id="trr2">联系人</th>
					<td>
						<input style="width: 308px; height: 36px;"
							   class="easyui-combobox"
							   name="contact" data-options="valueField:'id',textField:'text',multiple:'true',editable:false"
							   id="contact" required="required"/>
					</td>
				</tr>
				<tr>
					<th>采购责任人</th>
					<td>
						<input style="width: 308px; height: 36px;"
							   class="easyui-combobox"
							   url="/admin/suMember/get_sumember_names.jspx" name="blame_buy" data-options="valueField:'id',textField:'text',editable:false"
							   id="blame_buy"/>
					</td>
				</tr>
				<tr>
					<th>跟单责任人</th>
					<td>
						<input style="width: 308px; height: 36px;"
							   class="easyui-combobox"
							   url="/admin/suMember/get_sumember_names.jspx" name="blame" data-options="valueField:'id',textField:'text',editable:false"
							   id="blame" required="required"/>
					</td>
				</tr>
				<tr>
					<th>等级</th>
					<td>
						<select style="width: 308px; height: 36px;" id="grade" name="grade" class="input_text" required="required">
							[#if item.grade=1]
							<option value="1" selected="selected">一级</option>
							<option value="2">二级</option>
							<option value="3">三级</option>
							<option value="4">四级</option>
							<option value="5">五级</option>
							<option value="6">六级</option>
							<option value="7">七级</option>
							<option value="8">八级</option>
							<option value="9">九级</option>
							[#else]
							[#if item.grade=2]
							<option value="1">一级</option>
							<option value="2" selected="selected">二级</option>
							<option value="3">三级</option>
							<option value="4">四级</option>
							<option value="5">五级</option>
							<option value="6">六级</option>
							<option value="7">七级</option>
							<option value="8">八级</option>
							<option value="9">九级</option>
							[#else]
							[#if item.grade=3]
							<option value="1">一级</option>
							<option value="2">二级</option>
							<option value="3" selected="selected">三级</option>
							<option value="4">四级</option>
							<option value="5">五级</option>
							<option value="6">六级</option>
							<option value="7">七级</option>
							<option value="8">八级</option>
							<option value="9">九级</option>
							[#else]
							[#if item.grade=4]
							<option value="1">一级</option>
							<option value="2">二级</option>
							<option value="3">三级</option>
							<option value="4" selected="selected">四级</option>
							<option value="5">五级</option>
							<option value="6">六级</option>
							<option value="7">七级</option>
							<option value="8">八级</option>
							<option value="9">九级</option>
							[#else]
							[#if item.grade=5]
							<option value="1">一级</option>
							<option value="2">二级</option>
							<option value="3">三级</option>
							<option value="4">四级</option>
							<option value="5" selected="selected">五级</option>
							<option value="6">六级</option>
							<option value="7">七级</option>
							<option value="8">八级</option>
							<option value="9">九级</option>
							[#else]
							[#if item.grade=6]
							<option value="1">一级</option>
							<option value="2">二级</option>
							<option value="3">三级</option>
							<option value="4">四级</option>
							<option value="5">五级</option>
							<option value="6" selected="selected">六级</option>
							<option value="7">七级</option>
							<option value="8">八级</option>
							<option value="9">九级</option>
							[#else]
							[#if item.grade=7]
							<option value="1">一级</option>
							<option value="2">二级</option>
							<option value="3">三级</option>
							<option value="4">四级</option>
							<option value="5">五级</option>
							<option value="6">六级</option>
							<option value="7" selected="selected">七级</option>
							<option value="8">八级</option>
							<option value="9">九级</option>
							[#else]
							[#if item.grade=8]
							<option value="1">一级</option>
							<option value="2">二级</option>
							<option value="3">三级</option>
							<option value="4">四级</option>
							<option value="5">五级</option>
							<option value="6">六级</option>
							<option value="7">七级</option>
							<option value="8" selected="selected">八级</option>
							<option value="9">九级</option>
							[#else]
							[#if item.grade=9]
							<option value="1">一级</option>
							<option value="2">二级</option>
							<option value="3">三级</option>
							<option value="4">四级</option>
							<option value="5">五级</option>
							<option value="6">六级</option>
							<option value="7">七级</option>
							<option value="8">八级</option>
							<option value="9" selected="selected">九级</option>
							[#else]
							<option value="1" selected="selected">一级</option>
							<option value="2">二级</option>
							<option value="3">三级</option>
							<option value="4">四级</option>
							<option value="5">五级</option>
							<option value="6">六级</option>
							<option value="7">七级</option>
							<option value="8">八级</option>
							<option value="9">九级</option>
							[/#if]
							[/#if]
							[/#if]
							[/#if]
							[/#if]
							[/#if]
							[/#if]
							[/#if]
							[/#if]
						</select>

					</td>
				</tr>
				<tr>
					<th>计量时间</th>
					<td>
						<select style="width: 308px; height: 36px;" id="measurement_time" name="measurement_time" class="input_text" required="required">
							[#if item.measurement_time=1]
							<option value="1" selected="selected">一月</option>
							<option value="2">二月</option>
							<option value="3">三月</option>
							<option value="4">四月</option>
							<option value="5">五月</option>
							<option value="6">六月</option>
							<option value="7">七月</option>
							<option value="8">八月</option>
							<option value="9">九月</option>
							<option value="10">十月</option>
							<option value="11">十一月</option>
							<option value="12">十二月</option>
							[#else]
							[#if item.measurement_time=2]
							<option value="1">一月</option>
							<option value="2" selected="selected">二月</option>
							<option value="3">三月</option>
							<option value="4">四月</option>
							<option value="5">五月</option>
							<option value="6">六月</option>
							<option value="7">七月</option>
							<option value="8">八月</option>
							<option value="9">九月</option>
							<option value="10">十月</option>
							<option value="11">十一月</option>
							<option value="12">十二月</option>
							[#else]
							[#if item.measurement_time=3]
							<option value="1">一月</option>
							<option value="2">二月</option>
							<option value="3" selected="selected">三月</option>
							<option value="4">四月</option>
							<option value="5">五月</option>
							<option value="6">六月</option>
							<option value="7">七月</option>
							<option value="8">八月</option>
							<option value="9">九月</option>
							<option value="10">十月</option>
							<option value="11">十一月</option>
							<option value="12">十二月</option>
							[#else]
							[#if item.measurement_time=4]
							<option value="1">一月</option>
							<option value="2">二月</option>
							<option value="3">三月</option>
							<option value="4" selected="selected">四月</option>
							<option value="5">五月</option>
							<option value="6">六月</option>
							<option value="7">七月</option>
							<option value="8">八月</option>
							<option value="9">九月</option>
							<option value="10">十月</option>
							<option value="11">十一月</option>
							<option value="12">十二月</option>
							[#else]
							[#if item.measurement_time=5]
							<option value="1">一月</option>
							<option value="2">二月</option>
							<option value="3">三月</option>
							<option value="4">四月</option>
							<option value="5" selected="selected">五月</option>
							<option value="6">六月</option>
							<option value="7">七月</option>
							<option value="8">八月</option>
							<option value="9">九月</option>
							<option value="10">十月</option>
							<option value="11">十一月</option>
							<option value="12">十二月</option>
							[#else]
							[#if item.measurement_time=6]
							<option value="1">一月</option>
							<option value="2">二月</option>
							<option value="3">三月</option>
							<option value="4">四月</option>
							<option value="5">五月</option>
							<option value="6" selected="selected">六月</option>
							<option value="7">七月</option>
							<option value="8">八月</option>
							<option value="9">九月</option>
							<option value="10">十月</option>
							<option value="11">十一月</option>
							<option value="12">十二月</option>
							[#else]
							[#if item.measurement_time=7]
							<option value="1">一月</option>
							<option value="2">二月</option>
							<option value="3">三月</option>
							<option value="4">四月</option>
							<option value="5">五月</option>
							<option value="6">六月</option>
							<option value="7" selected="selected">七月</option>
							<option value="8">八月</option>
							<option value="9">九月</option>
							<option value="10">十月</option>
							<option value="11">十一月</option>
							<option value="12">十二月</option>
							[#else]
							[#if item.measurement_time=8]
							<option value="1">一月</option>
							<option value="2">二月</option>
							<option value="3">三月</option>
							<option value="4">四月</option>
							<option value="5">五月</option>
							<option value="6">六月</option>
							<option value="7">七月</option>
							<option value="8" selected="selected">八月</option>
							<option value="9">九月</option>
							<option value="10">十月</option>
							<option value="11">十一月</option>
							<option value="12">十二月</option>
							[#else]
							[#if item.measurement_time=9]
							<option value="1">一月</option>
							<option value="2">二月</option>
							<option value="3">三月</option>
							<option value="4">四月</option>
							<option value="5">五月</option>
							<option value="6">六月</option>
							<option value="7">七月</option>
							<option value="8">八月</option>
							<option value="9" selected="selected">九月</option>
							<option value="10">十月</option>
							<option value="11">十一月</option>
							<option value="12">十二月</option>
							[#else]
							[#if item.measurement_time=10]
							<option value="1">一月</option>
							<option value="2">二月</option>
							<option value="3">三月</option>
							<option value="4">四月</option>
							<option value="5">五月</option>
							<option value="6">六月</option>
							<option value="7">七月</option>
							<option value="8">八月</option>
							<option value="9">九月</option>
							<option value="10" selected="selected">十月</option>
							<option value="11">十一月</option>
							<option value="12">十二月</option>
							[#else]
							[#if item.measurement_time=11]
							<option value="1">一月</option>
							<option value="2">二月</option>
							<option value="3">三月</option>
							<option value="4">四月</option>
							<option value="5">五月</option>
							<option value="6">六月</option>
							<option value="7">七月</option>
							<option value="8">八月</option>
							<option value="9">九月</option>
							<option value="10">十月</option>
							<option value="11" selected="selected">十一月</option>
							<option value="12">十二月</option>
							[#else]
							[#if item.measurement_time=12]
							<option value="1">一月</option>
							<option value="2">二月</option>
							<option value="3">三月</option>
							<option value="4">四月</option>
							<option value="5">五月</option>
							<option value="6">六月</option>
							<option value="7">七月</option>
							<option value="8">八月</option>
							<option value="9">九月</option>
							<option value="10">十月</option>
							<option value="11">十一月</option>
							<option value="12" selected="selected">十二月</option>
							[#else]
							<option value="1" selected="selected">一月</option>
							<option value="2">二月</option>
							<option value="3">三月</option>
							<option value="4">四月</option>
							<option value="5">五月</option>
							<option value="6">六月</option>
							<option value="7">七月</option>
							<option value="8">八月</option>
							<option value="9">九月</option>
							<option value="10">十月</option>
							<option value="11">十一月</option>
							<option value="12">十二月</option>
							[/#if]
							[/#if]
							[/#if]
							[/#if]
							[/#if]
							[/#if]
							[/#if]
							[/#if]
							[/#if]
							[/#if]
							[/#if]
							[/#if]
						</select>

					</td>
				</tr>
				<tr>
					<th>是否订阅邮件</th>
					<td>
						<select style="width: 308px; height: 36px;" id="isAcceptEmail" name="isAcceptEmail" class="input_text" required="required">
							[#if item.isAcceptEmail=1]
							<option value="1" selected="selected">是</option>
							<option value="0">否</option>
							[#else]
							[#if item.isAcceptEmail=0]
							<option value="1">是</option>
							<option value="0" selected="selected">否</option>
							[#else]
							<option value="1" selected="selected">是</option>
							<option value="0">否</option>
							[/#if]
							[/#if]
						</select>

					</td>
				</tr>
				<tr>
					<th>订阅周期</th>
					<td>
						<select style="width: 308px; height: 36px;" id="rate" name="rate" class="input_text" required="required">
							[#if item.rate=1]
							<option value="1" selected="selected">当天</option>
							<option value="2">当周</option>
							<option value="3">当月</option>
							[#else]
							[#if item.rate=2]
							<option value="1">当天</option>
							<option value="2" selected="selected">当周</option>
							<option value="3">当月</option>
							[#else]
							[#if item.rate=3]
							<option value="1">当天</option>
							<option value="2">当周</option>
							<option value="3" selected="selected">当月</option>
							[#else]
							<option value="1">当天</option>
							<option value="2">当周</option>
							<option value="3" selected="selected">当月</option>
							[/#if]
							[/#if]
							[/#if]
						</select>

					</td>
				</tr>

			</table>
			<input type="button"   class="input_text2 easyui-validatebox"   value="添加公司"  onclick="appendsucompanyname()" style="left: 525px;top: 58px;position: absolute;"/>
			<!-- <input type="button"   class="input_text2 easyui-validatebox"   value="添加行业"  onclick="appendsuindustryclass()" style="left: 515px;top: 103px;position: absolute;"/> -->
			<!-- <input type="button"   class="input_text2 easyui-validatebox"   value="添加主营产品"  onclick="appendsumajor()" style="left: 515px;top: 147px;position: absolute;"/>
			<input type="button"   class="input_text2 easyui-validatebox" id="ddd"  value="添加常用仪器"  onclick="appendsuproductclasstwo()" style="left: 515px;top: 195px;position: absolute;"/> -->
			<!-- <input type="button"   class="input_text2 easyui-validatebox" id="ddd"  value="添加品牌"  onclick="appendsubrand()" style="left: 515px;top: 240px;position: absolute;"/>
			<input type="button"   class="input_text2 easyui-validatebox" id="ddd"  value="添加型号"  onclick="appendsumodel()" style="left: 515px;top: 280px;position: absolute;"/> -->
			<input type="button"   class="input_text2 easyui-validatebox"   value="添加常用联系人"  onclick="appendcontact(id,'${item.name}')" style="left: 525px;top: 470px;position: absolute;"/>
			<input type="button"   class="input_text2 easyui-validatebox"   value="添加采购/跟单责任人"  onclick="appendsumember()" style="left: 525px;top: 530px;position: absolute;"/>
		</form>
	</div>
</div>

<script type="text/javascript">
    $('#su_brand_coll').combobox({
        url:'/admin/basedata/brand/get_brand_names.jspx?',
        onLoadSuccess:function(){
            if("${item.su_brand}"!=""){
                $('#su_brand_coll').combobox('setValues','${item.su_brand}'.split(','));
            }

        }
    });
/*    $('#major_product_coll').combotree({
        width:300,
        method:'get',
        url: '/productClass/combotreeData.json',
        multiple: true,
        onlyLeafCheck:true,
        onLoadSuccess: function (e) {//编辑页面数据回显
            $('#major_product_coll').combotree('setValues',"${item.major_product}".split(','))
        }
    });*/

    /* $("#su_productclass11").combotree({
        checkbox:true,
        multiple:true,
        cascadeCheck:true,
        required:false,
        url:'/admin/basedata/suproductclass/combotreeData.json',
        onSelect:function(node){
            if(node.attributes.parent_type_id == '0'){
                $("#su_productclass11").combotree('clear');
                alert('提示',"请选择详细类别");
                return false;
            }
        }
    }); */

    /*    $("#su_productclass11").combotree({
           url:'/admin/basedata/suproductclass/combotreeData.json',
           checkbox: true,
           cascadeCheck: true,
           multiple:true,
           onCheck: function (node, checked) {
               if (checked) {
                   var parentNode = $("#su_productclass11").tree('getParent', node.target);
               alert(parentNode);
                   if (parentNode != null) {
                       $("#su_productclass11").tree('check', parentNode.target);
                   }
               } else {
                   var childNode = $("#su_productclass11").tree('getChildren', node.target);
                   if (childNode.length > 0) {
                       for (var i = 0; i < childNode.length; i++) {
                           $("#su_productclass11").tree('uncheck', childNode[i].target);
                       }
                   }
               }
           }
       }); */




    /*   $('#su_industry_class_coll').combobox({
         url: '/admin/suIndustyClass/combotreeData.json',
         onLoadSuccess:function(node,data){
             if('${item.su_industry_class}' != ''){
                 var da='${item.su_industry_class}';
                 var ary =da.split(",");
                 var a = new Array();
                 $.each(ary,function(i,item){//因后台取出的值是字符串，combotree将字符串组作为一个整体，故需将字符串按，截取并重新放入array数组。组成combotree识别的[a,b,c]模式（该步骤是获取后台的主营产品品牌等分类数组，使combotree选中已经选中的值）
                     a[i] = item;
                     })
                 $('#su_industry_class_coll').combobox('setValues', a);
             }
          }

     });   */



    /*  $('#major_product_coll').combobox({
   url: '/admin/suMajor/get_major_names.jspx?su_industry_id='+'${item.su_industry_class}',
   onLoadSuccess:function(node,data){
       if('${item.major_product}' != '' && $("#major_product_fujian").val() == 'true' ){//$("#major_product_fujian").val() == 'true' 下面代码只在页面第一次加载时运行，防止在选择行业分类重新加载树时，下面代码依然运行。造成树无法clear干净
           var da='${item.major_product}';
           var ary =da.split(",");
           var a = new Array();
           $.each(ary,function(i,item){//因后台取出的值是字符串，combotree将字符串组作为一个整体，故需将字符串按，截取并重新放入array数组。组成combotree识别的[a,b,c]模式（该步骤是获取后台的主营产品品牌等分类数组，使combotree选中已经选中的值）
               a[i] = item;
               })
           $('#major_product_coll').combobox('setValues', a);
       }
    }

});  */

    /*  $('#su_productclass_coll').combobox({    
	    url: '/admin/basedata/suproductclass/get_sumember_names.jspx',
	    onLoadSuccess:function(node,data){ 
	    	if('${item.su_productclass}' != ''){
	            var da='${item.su_productclass}';
	            var ary =da.split(",");
	            var a = new Array();
	            $.each(ary,function(i,item){//因后台取出的值是字符串，combotree将字符串组作为一个整体，故需将字符串按，截取并重新放入array数组。组成combotree识别的[a,b,c]模式（该步骤是获取后台的主营产品品牌等分类数组，使combotree选中已经选中的值）
	            	a[i] = item;
	            	})
		    	$('#su_productclass_coll').combobox('setValues', a);
	    	}
         }  
	    
	});   */
    /*  $('#su_brand_coll').combobox({    
	   // url: '/admin/suBrand/get_model_names.jspx',
	    url: '/admin/suBrand/get_sumember_names.jspx?su_product_id='+'${item.su_productclass}',
	    onLoadSuccess:function(node,data){ 
	    	if('${item.su_brand}' != ''  && $("#su_brand_fujian").val() == 'true' ){
	            var da='${item.su_brand}';
	            var ary =da.split(",");
	            var a = new Array();
	            $.each(ary,function(i,item){//因后台取出的值是字符串，combotree将字符串组作为一个整体，故需将字符串按，截取并重新放入array数组。组成combotree识别的[a,b,c]模式（该步骤是获取后台的主营产品品牌等分类数组，使combotree选中已经选中的值）
	            	a[i] = item;
	            	})
		    	$('#su_brand_coll').combobox('setValues', a);
	    	}
         }  
	    
	});   */
    /*  $('#su_model_coll').combobox({    
	    //url: '/admin/suModel/get_names_two.jspx',
	    url: '/admin/suModel/get_sumember_names.jspx?su_model_id='+'${item.su_brand}',
	    onLoadSuccess:function(node,data){ 
	    	if('${item.su_model}' != ''   && $("#su_model_fujian").val() == 'true' ){
	            var da='${item.su_model}';
	            var ary =da.split(",");
	            var a = new Array();
	            $.each(ary,function(i,item){//因后台取出的值是字符串，combotree将字符串组作为一个整体，故需将字符串按，截取并重新放入array数组。组成combotree识别的[a,b,c]模式（该步骤是获取后台的主营产品品牌等分类数组，使combotree选中已经选中的值）
	            	a[i] = item;
	            	})
		    	$('#su_model_coll').combobox('setValues', a);
	    	}
         }  
	    
	});   */
    $('#contact').combobox({
        //url: '/admin/suContacts/get_sumember_names.jspx',
        url: '/admin/suContacts/get_sumember_names.jspx?su_company_id='+'${item.name}',
        onLoadSuccess:function(node,data){
            if('${item.contact}' != ''  && $("#name_fujian").val() == 'true' ){
                var da='${item.contact}';
                var ary =da.split(",");
                var a = new Array();
                $.each(ary,function(i,item){//因后台取出的值是字符串，combotree将字符串组作为一个整体，故需将字符串按，截取并重新放入array数组。组成combotree识别的[a,b,c]模式（该步骤是获取后台的主营产品品牌等分类数组，使combotree选中已经选中的值）
                    a[i] = item;
                })
                $('#contact').combobox('setValues', a);
            }
        }
    });
    $('#blame_buy').combobox({
        url: '/admin/suMember/get_sumember_names.jspx',
        onLoadSuccess:function(node,data){
            if('${item.blame_buy}' != ''){
                var da='${item.blame_buy}';
                var ary =da.split(",");
                var a = new Array();
                $.each(ary,function(i,item){//因后台取出的值是字符串，combotree将字符串组作为一个整体，故需将字符串按，截取并重新放入array数组。组成combotree识别的[a,b,c]模式（该步骤是获取后台的主营产品品牌等分类数组，使combotree选中已经选中的值）
                    a[i] = item;
                })
                $('#blame_buy').combobox('setValues', a);
            }
        }
    });
    $('#blame').combobox({
        url: '/admin/suMember/get_sumember_names.jspx',
        onLoadSuccess:function(node,data){
            if('${item.blame}' != ''){
                var da='${item.blame}';
                var ary =da.split(",");
                var a = new Array();
                $.each(ary,function(i,item){//因后台取出的值是字符串，combotree将字符串组作为一个整体，故需将字符串按，截取并重新放入array数组。组成combotree识别的[a,b,c]模式（该步骤是获取后台的主营产品品牌等分类数组，使combotree选中已经选中的值）
                    a[i] = item;
                })
                $('#blame').combobox('setValues', a);
            }
        }
    });



    var condition_company=true;
    $("#name").combobox({
        required:true,
        valueField:'id',
        textField:'text',
        editable:true,
        url:'/admin/suCompanyName/get_sumember_names.jspx',
        onSelect:function(node){
            $.ajax({
                url:"/admin/SuModelCollection/register.jspx",
                data:{name:node.id,edit_name:'${item.name}'},
                dataType:"json",
                type:"post",
                success:function(msg){
                    if(msg.cont == 'false'){
                        $(".rr_model").text('数据已存在，请修改！');
                        condition_company=false;
                        return false;
                    }
                    if(msg.cont == 'true'){
                        $(".rr_model").text('');
                        condition_company=true;
                        return true;
                    }
                },
                error:function(){
                    alert("网络异常,请重试!");
                    return false;
                }
            });

            $("#contact").combobox('clear');
            $("#name_fujian").val('false');
            var url ='/admin/suContacts/get_sumember_names.jspx?su_company_id='+node.id;
            $("#contact").combobox('reload',url);//input框中有树方法

        }
    });

    /*  $("#su_productclass_coll").combobox({
       onSelect:function(node){
                   var id=$("#su_productclass_coll").combobox('getValues');
                   var url ='/admin/suBrand/get_sumember_names.jspx?su_product_id='+id.toString();
                   $("#su_brand_coll").combobox('reload',url);//input框中有树方法

                   var id2=$("#su_brand_coll").combobox('getValues');
                   var url2 ='/admin/suModel/get_sumember_names.jspx?su_model_id='+id2.toString();
                   $("#su_model_coll").combobox('reload',url2);//input框中有树方法

       },
       onUnselect:function(node){
                   var id=$("#su_productclass_coll").combobox('getValues');
                   $("#su_brand_coll").combobox('clear');//刷新前，先清空树
                   $("#su_model_coll").combobox('clear');//刷新前，先清空树
                   $("#su_brand_fujian").val('false');
                   $("#su_model_fujian").val('false');
                   console.log($("#su_brand_coll").combobox('getValues'));
                   var url ='/admin/suBrand/get_sumember_names.jspx?su_product_id='+id.toString();
                   $("#su_brand_coll").combobox('reload',url);//input框中有树方法

                   var id2=$("#su_brand_coll").combobox('getValues');
                   var url2 ='/admin/suModel/get_sumember_names.jspx?su_model_id='+id2.toString();
                   $("#su_model_coll").combobox('reload',url2);//input框中有树方法

       }
   });  */

    /* $("#su_brand_coll").combobox({
        onSelect:function(node){
                    var id=$("#su_brand_coll").combobox('getValues');
                    var url ='/admin/suModel/get_sumember_names.jspx?su_model_id='+id.toString();
                    $("#su_model_coll").combobox('reload',url);//input框中有树方法

        },
        onUnselect:function(node){
                    var id=$("#su_brand_coll").combobox('getValues');
                    $("#su_model_coll").combobox('clear');//刷新前，先清空树
                    $("#su_model_fujian").val('false');
                    var url ='/admin/suModel/get_sumember_names.jspx?su_model_id='+id.toString();
                    $("#su_model_coll").combobox('reload',url);//input框中有树方法

        }
    });  */

    /* $("#su_industry_class_coll").combobox({
        onSelect:function(node){
                    var id=$("#su_industry_class_coll").combobox('getValues');
                    $("#major_product_coll").combobox('clear');//刷新前，先清空树
                    $("#major_product_fujian").val('false');
                    //combobox.Items.Remove(combobox.SelectedItem);
                    // $("#su_productclass").combobox('clear');//刷新前，先清空树
                    //$("#su_brand").combobox('clear');//刷新前，先清空树
                    //$("#su_model").combobox('clear');//刷新前，先清空树
                    var url ='/admin/suMajor/get_major_names.jspx?su_industry_id='+id.toString();
                    $("#major_product_coll").combobox('reload',url);//input框中有树方法

        },
        onUnselect:function(node){
                    var id=$("#su_industry_class_coll").combobox('getValues');
                    $("#major_product_coll").combobox('clear');//刷新前，先清空树
                    $("#major_product_fujian").val('false');
                    // $("#su_productclass").combobox('clear');//刷新前，先清空树
                    //$("#su_brand").combobox('clear');//刷新前，先清空树
                    //$("#su_model").combobox('clear');//刷新前，先清空树
                    var url ='/admin/suMajor/get_major_names.jspx?su_industry_id='+id.toString();
                    $("#major_product_coll").combobox('reload',url);//input框中有树方法

        }
    });  */

    /* 	$("#major_product").combobox({
            onSelect:function(node){
                        var id=$("#major_product").combobox('getValues');
                        var url ='/admin/basedata/suproductclass/get_sumember_names.jspx?su_major_id='+id.toString();
                        $("#su_productclass").combobox('reload',url);//input框中有树方法

            },
            onUnselect:function(node){
                        var id=$("#major_product").combobox('getValues');
                        $("#su_productclass").combobox('clear');//刷新前，先清空树
                        var url ='/admin/basedata/suproductclass/get_sumember_names.jspx?su_major_id='+id.toString();
                        $("#su_productclass").combobox('reload',url);//input框中有树方法

            }
        });  */

    //该方法判断公司是否为下拉选择，当为直接输入时，提醒，并禁止保存（当combobox失去焦点时触发）
    $("#name").combobox('textbox').bind('blur', function(e) {
        var name=$("#name").combobox('getValue');
        if(isNaN(name)){ //isNaN()函数，如果传入的参数是数字返回false,否则返回true
            $(".rr_model").text('不可输入，请下拉选择！');
            condition_company=false;
            return false;
        }

        $.ajax({
            url:"/admin/SuModelCollection/register.jspx",
            data:{name:name},
            dataType:"json",
            type:"post",
            success:function(msg){
//				if(msg.cont == 'false' && name !='${item.name}'){
//					$(".rr_model").text('数据已存在，请修改！');
//					condition_company=false;
//					return false;
//				}
                if(msg.cont == 'true' && name !='${item.name}'){
                    $(".rr_model").text('');
                    condition_company=true;
                    return true;
                }
            },
            error:function(){
                alert("网络异常,请重试!");
                return false;
            }
        });
        $("#contact").combobox('clear');
        var url ='/admin/suContacts/get_sumember_names.jspx?su_company_id='+name;
        $("#contact").combobox('reload',url);//input框中有树方法



    });

</script>
	