
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=9" > </meta>
<title>云图商城-后台管理</title>
<style type="text/css">
body{
	margin:0px;
	font-family:Arial,"宋体",Verdana,sans-serif;
	font-size:12px;
}
html,body {padding: 0;margin: 0; overflow-x:hidden; overflow-y:auto;}
dl,dd{margin:0px}
ul{
	list-style-type:none;
	margin:0px;
	padding:0px;
}
</style>

<script type="text/javascript" src="/adminthemes/new/js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="/adminthemes/new/js/jquery-form-2.33.js"></script>
<script type="text/javascript" src="/statics/js/area_sql.js"></script>
<link rel="stylesheet" type="text/css" href="/adminthemes/new/js/easy-ui/themes/gray/easyui.css"/>    
<link rel="stylesheet" type="text/css" href="/adminthemes/new/js/easy-ui/themes/icon.css"/>  
<script type="text/javascript" src="/adminthemes/new/js/easy-ui/jquery.easyui.min.js"></script>
<script type="text/javascript" src="/adminthemes/new/js/easy-ui/easyui-lang-zh_CN.js"></script>
<script type="text/javascript" src="/adminthemes/new/js/jquery.blockUI.js"></script>
<script type="text/javascript" src="/adminthemes/new/js/jquery.loading.js"></script>
<link href="/adminthemes/new/css/main.css" rel="stylesheet" type="text/css" />
<link href="/adminthemes/new/css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/adminthemes/js/BooCu.js"></script>
<script type="text/javascript" src="/adminthemes/new/js/ajaxupload.3.9.js"></script>
<script type="text/javascript" src="/frontthemes/js/easyuiUtil.js"></script>
[#include '/template/admin/include/common.html']

</head>
<body>
 
<div id="bookinfo" style="display: none;"></div>
<div id="loading"></div>
<div class="main">
<div class="easyui-tabs">
	<div title="已审核的品牌列表" style="padding:10px;">
	<form id="memberform">
		<div id="tb" style="height: auto">
			<a href="javascript:void(0)" class="button blueButton"
				data-options="plain:true" onclick="nAudit()">反审核</a>
		    <a href="javascript:append()" class="button blueButton" 
				data-options="iconCls:'icon-add',plain:true" onclick="append(0,map)" >添加</a>
			<a href="javascript:void(0)" class="easyui-linkbutton"
				data-options="plain:true" id="btnDel">删除</a>
			<a href="javascript:void(0)" class="easyui-linkbutton" id="hre3"
			   data-options="plain:true" onclick="orderExport()">导出</a>
			<span style="float: right;"> 
				<span id="simpleSearch">
					<input id="searchKeyword" class="input_text" type="text" value="" size="30" style="width: 300px;"
					placeholder="请输入品牌名称" name="searchKeyWord"> 
					<a href="javascript:void(0)" class="easyui-linkbutton" 
					data-options="plain:true" onclick="searchAdvertBase()">搜索</a>
				</span>
			</span>
		</div>
		
		<div class="clear height10"></div>
		<div class="shadowBoxWhite tableDiv">
		<table class="easyui-datagrid"
			data-options="url:'/admin/basedata/brand/audit.json',pageList: [5,10,15,20],pageSize:10,fitColumns:'true'"
			pagination="true" id="memberdata" sortName="id" sortOrder="desc" >
			<thead>
				<tr>
					<th data-options="field:'id',checkbox:true"></th>
					<th data-options="field:'name',width:$(this).width()*0.1,sortable:'true'">品牌名称(中文)</th>
					<th data-options="field:'nameEn',width:$(this).width()*0.1,sortable:'true'" >品牌名称(英文)</th>
					<th data-options="field:'image',width:$(this).width()*0.1,sortable:'true'" formatter="formatImg" >商标</th>
					<th data-options="field:'country',width:$(this).width()*0.2,sortable:'true'">国家</th>
					<th data-options="field:'sort',width:$(this).width()*0.1,sortable:'true'">排序</th>
					<th data-options="field:'area',width:$(this).width()*0.1,sortable:'true'">字母区域</th>
					<th data-options="field:'isRecommend',width:$(this).width()*0.1,sortable:'true'">是否推荐</th>
					<th data-options="field:'status',width:$(this).width()*0.1,sortable:'true'">状态</th>
					<th data-options="field:'action',width:$(this).width()*0.1,align:'center'" formatter="formatOperation">操作</th>
				</tr>
			</thead>
		</table>
		</div>
	</form>
	</div>
	<div title="未审核的品牌列表" style="padding:10px;">
	<form id="memberform1">
		<div id="tb" style="height: auto">
		    <a href="javascript:void(0)" class="button blueButton" 
				data-options="plain:true" onclick="audit()">审核</a>
 			<a href="javascript:void(0)" class="easyui-linkbutton"
				data-options="plain:true" id="btnDel1" onclick="del1()">删除</a>
				
			<span style="float: right;"> 
				<span id="simpleSearch">
					<input id="searchKeyword1" class="input_text" type="text" value="" size="30" style="width: 300px;"
					placeholder="请输入品牌名称" name="searchKeyWord"> 
					<a href="javascript:void(0)" class="easyui-linkbutton" 
					data-options="plain:true" onclick="searchAdvertBase1()">搜索</a>
				</span>
			</span>
		</div>
		
		<div class="clear height10"></div>
		<div class="shadowBoxWhite tableDiv">
		<table class="easyui-datagrid"
			data-options="url:'/admin/basedata/brand/nAudit.json',pageList: [5,10,15,20],pageSize:10,fitColumns:'true'"
			pagination="true" id="memberdata1" sortName="id" sortOrder="desc" >
			<thead>
				<tr>
					<th data-options="field:'id',checkbox:true"></th>
					<th data-options="field:'name',width:$(this).width()*0.1,sortable:'true'">品牌名称(中文)</th>
					<th data-options="field:'nameEn',width:$(this).width()*0.1,sortable:'true'" >品牌名称(英文)</th>
					<th data-options="field:'image',width:$(this).width()*0.1,sortable:'true'" formatter="formatImg" >商标</th>
					<th data-options="field:'country',width:$(this).width()*0.2,sortable:'true'">国家</th>
					<th data-options="field:'sort',width:$(this).width()*0.1,sortable:'true'">排序</th>
					<th data-options="field:'area',width:$(this).width()*0.1,sortable:'true'">字母区域</th>
					<th data-options="field:'isRecommend',width:$(this).width()*0.1,sortable:'true'">是否推荐</th>
					<th data-options="field:'status',width:$(this).width()*0.1,sortable:'true'">状态</th>
					<th data-options="field:'action',width:$(this).width()*0.1,align:'center'" formatter="formatOperation">操作</th>
				</tr>
			</thead>
		</table>
		</div>
	</form>
	</div>
	</div>
	<div id="divdia" style="display: none;"></div>

</div>
<script type="text/javascript">
	var map = {};
	$(function(){
		map["indexFormId"] = "#memberform";
		//删除设置
		map["delUrl"] = "/admin/basedata/brand/delete_brand.jspx";
		map["btnDel"] ="#btnDel";
		$(map["btnDel"]).on("click",function(){del(map);});
		//增加,修改弹出框设置
		map["tableId"] = "#memberdata";
		map["width"] = 600;
		map["height"] =500;
		map["divDialog"] = "#divdia";
	});
	
	function append(id,map) {
		if (!id) {
			map["href"] = "/admin/basedata/brand/add_brand.jspx";
			map["formId"] = "#addForm";
			map["url"] = "/admin/basedata/brand/save_brand.jspx?ajax=yes";
			map["title"] = "添加品牌信息";
			map["loadshow"] = "正在添加......";
		} else {
			map["href"] = "/admin/basedata/brand/edit_brand.jspx?id=" + id;
			map["formId"] = "#editForm";
			map["url"] = "/admin/basedata/brand/save_edit_brand.jspx?ajax=yes";
			map["title"] = "修改品牌信息";
			map["loadshow"] = "正在修改......";
		}
		addDialog(map);
	}
	//关键字搜索
	function searchAdvertBase(){
		var keyword = $("#searchKeyword").val();
		$("#memberdata").datagrid("load",{
			keyword:keyword,
			page:1
		});
	}
	
	//关键字搜索
	function searchAdvertBase1(){
		var keyword = $("#searchKeyword1").val();
		$("#memberdata1").datagrid("load",{
			keyword:keyword,
			page:1
		});
	}
	
	//审核
	function audit() {
		var rows = $("#memberdata1").datagrid("getSelections");
		if(rows.length <1){
			$.Loading.error("请选择要审核的选项");
			return;
		}
		if(!confirm("确认要审核该选项?")){
			return;
		}
		var options = {
				url : "/admin/basedata/brand/auditBrand.jspx?ajax=yes",
				type : "POST",
				dataType : 'json',
				success : function(result){
					$.Loading.success(result.message);
					if(result.result == 1) {
							$('#memberdata1').datagrid('reload');
						}
				},
				error : function(e) {
					$.Loading.error("出现错误 ，请重试");
				}
			};
			$('#memberform1').ajaxSubmit(options);
		}
	
	//反审核
	function nAudit(){
		var rows = $("#memberdata").datagrid("getSelections");
		if(rows.length<1){
			$.Loading.error("请选择要反审核的选项");
			return;
		}
		if(!confirm("确认要反审核该选项?")){
			return;
		}
		var options = {
				url : "/admin/basedata/brand/nAuidt_brand.jspx?ajax=yes",
				type : "POST",
				dataType : "json",
				success : function(result){
					$.Loading.success(result.message);
					if(result.result==1){
						$("#memberdata").datagrid('reload');
					}
				},
				error : function(){
					$.Loading.error("出现错误, 请重试!");
				}
		};
		$('#memberform').ajaxSubmit(options);
	}
    function orderExport(){
        window.location.href = "/admin/basedata/brand/orderExport.jspx";
    }
    function del1(){
		var rows = $("#memberdata1").datagrid("getSelections");
		if(rows.length<1){
			$.Loading.error("请选择要删除的项");
			return;
		}
		if(!confirm("确认要删除选中的该信息")){
			return;
		}
		var options = {
				url: "/admin/basedata/brand/delete_brand.jspx?ajax=yes",
				type : "POST",
				dataType: 'json',
				success : function(result) {
					$.Loading.success(result.message);
					if(result.result == 1) {
						var rows = $('#memberdata1').datagrid("getSelections");
						for( var i =0; i<rows.length; i++){
							var index = $('#memberdata1').datagrid('getRowIndex',
									rows[i]);
							$('#memberdata1').datagrid('deleteRow',index);
						}
					}
				},
				error : function(e){
					$.Loading.error("出现错误, 请重试");
				}
				};	
		$('#memberform1').ajaxSubmit(options);
	}
</script>
</body>
</html>