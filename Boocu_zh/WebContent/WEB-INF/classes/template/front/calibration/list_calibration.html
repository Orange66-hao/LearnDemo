<!DOCTYPE html>
<html>
<head>
<meta charset="utf-8">
<title>计量校准 - 晧辰仪联网</title>
[#include '/template/front/include/csslist.html' /]
<style>
.picd{position:relative;width:268px;height:175px;}
.picd img{position:absolute;bottom:0;top:0;left:0;right:0;margin:auto;vertical-align: middle;max-width:268px;_width:expression(this.width > 268px ? "268px" : this.width);max-height:175px;_height:expression(this.height > 175px ? "175px" : this.height);}
</style>
</head>
<body>

[#include '/template/front/include/header.html' /]
 <!--loading-->
 <div class="listloadingd" id="indexLoading" ></div>
 <!--./loading-->
<!--content-->
<div class="indexContent">
<!--content-->
<div class="main"> 
  
  <!--listtypepd-->
  <div class="listtypepd"> 
   [#include '/template/front/include/condition.html' /]
  <!--prolistpd-->
  <div class="prolistpd">
    <div class="maintit">
      <h3>商品列表</h3>
    </div>
    
    <!--promainl-->
    <div class="promainl"> 
      <!--prosortd-->
      <div class="prosortd">
        <p>综合排序</p>
        <p>
          <input type="radio"  s_val="desc"  name="popuOrder" >
          人气从高到低</p>
        <p>
          <input type="radio"  s_val="asc"  name="popuOrder">
          人气从低到高</p>
        <p>
          <input type="radio"  s_val="desc" name="priceOrder">
          价格从高到低</p>
        <p>
          <input type="radio"  s_val="asc"  name="priceOrder">
          价格从低到高</p>
        <p>
          <input type="radio"  s_val="0"    name="isNew">
          二手</p>
        <p>
          <input type="radio"  s_val="1"    name="isNew">
          新品</p>
        <p>
          <input type="radio"  s_val="1"    name="isSelf">
          自营商品</p>
        <p><a href="javascript:void(0);">发货地</a></p>
      </div>
      <!--./prosortd--> 
      
      <div class="pageList">
      [#include '/template/front/include/dataLists/calibrationList.html' /]
    	</div> 
      
    </div>
    <!--./promainl--> 
    
        <!--promainr-->
    <div class="promainr">
       [#list imageList as item]
      <div class="prorpiculd"> 
        <!--li-->
        <div class="prorpiclid"><a href="/product/${item.id}.jhtml" target="_blank">
      	<div class="picd"><img class="lazy" src="${item.proOriginal1}" data-original="${item.proOriginal1}"></div>
          <div class="infod">
			<h3>产品型号：${item.productBrandEntity.name} ${item.proNo}</h3>
       		<p>促销价<span><span class="f">       		
       		[#if priceType??]
         		[#if priceType=='VIP']
         			[#if item.proVipPrice?? && item.proVipPrice != 0] 
         				${item.proVipPrice}${message("PriceUnit."+item.proVipPriceLimit)}
         			[#else]
         			电议
           			[/#if]
         		[/#if]
         		[#if priceType=='同行']
         			[#if item.proPeer?? && item.proPeer != 0] 
         				${item.proPeer}${message("PriceUnit."+item.proPeerLimit)}
         			[#else]
         			电议
           			[/#if]
         		[/#if]
         		[#if priceType=='客户']
         			[#if item.proMemberPrice?? && item.proMemberPrice != 0] 
         				${item.proMemberPrice}${message("PriceUnit."+item.proMemberPriceLimit)}
         			[#else]
         			电议
           			[/#if]
         		[/#if]
         	[#else]
       			[#if item.proCustomPrice?? && item.proCustomPrice != 0] 
         				${item.proCustomPrice}${message("PriceUnit."+item.proCustomPriceLimit)}
         		[#else]
         			电议
           		[/#if]
           [/#if]</span></span></p>
            <i class="bg1"></i></div>
          </a></div>
        <!--./li--> 
      </div>
      [/#list]
    </div>
    <!--./promainr--> 
    
  </div>
  <!--./prolistpd--> 
    <!-- 搜索条件的隐藏表单 add by fang 20150907-->
  <form method="post" style="display: none" id="searchForm"
					action="/productRepair">
					<input name="serTypeIds" value="${typeId}" /> 
					<input name="indClass" value="" /> 
					<input name="proClass" value="" /> 
					<input name="brands" value="" /> 
					<input name="brandste" value="" /> 
					<input name="indClasste" value="" /> 
					<input name="proClasste" value="" /> 
					<input name="serTypeIdste" value="" /> 
					<input name="keyword" value="" />
					<!-- 综合排序 -->
					<input name="popuOrder" value="" /> 
					<input name="priceOrder" value="" /> 
					<input name="isSelf" value="" /> 
					<input name="isNew" value="" /> 
					<input name="outputPlace" value="" />
					<!-- 综合排序 -->

					<!-- 分页-->
					<input name="pageNum" value="" />
				</form>
<!-- 搜索条件的隐藏表单--> 
</div>

<!--./content--> 
</div>
</div>
[#include '/template/front/include/footer.html' /]
[#include '/template/front/include/jslist.html' /]
</body>
<script type="text/javascript">
if('${popuOrder}' =='desc'){
	$("#popuOrder").attr("checked", true);
} if('${popuOrder}' =='asc'){
	$("#popuOrder2").attr("checked", true);
}

	if('${priceOrder}' =='desc'){
	$("#priceOrder").attr("checked", true);
}if('${priceOrder}' =='asc'){
	$("#priceOrder2").attr("checked", true);
}

if('${isSelf}' =='1'){
	$("#isSelf").attr("checked", true);
}

if('${isNew}' =='0'){
	$("#isNew").attr("checked", true);
}if('${isNew}' =='1'){
	$("#isNew2").attr("checked", true);
}  

//加载时，如果有查询条件的话，进行条件过滤（该问题是，修改分页方式，而产生的bug，进而用此方法解决）
if('${isNew}' != null && '${isNew}' != ''){
		$(".listtypelid").show();
		$("#seletedCons").show();
	var  bb=null;
	if("${isNew}" == '0'){
		bb="二手";
	}
	if("${isNew}" == '1'){
		bb="新品";
	}
	// 显示已选条件
	whereItem = "<div class='wlid' s_type='"
			+ 'isNew'
			+ "' s_id='"
			+ "${isNew}"
			+ "' ><p>"
			+ bb
			+ "</p><p class='ico'><a href='javascript:;' onclick='remCondition(this,"
			+ true + ");'></a></p></div>";
	$(".whered").append(whereItem);
}
if('${popuOrder}' != null && '${popuOrder}' != ''){
	$(".listtypelid").show();
	$("#seletedCons").show();
	var  bb=null;
	if("${popuOrder}" == 'asc'){
		bb="人气从低到高";
	}
	if("${popuOrder}" == 'desc'){
		bb="人气从高到低";
	}
	// 显示已选条件
	whereItem = "<div class='wlid' s_type='"
			+ 'popuOrder'
			+ "' s_id='"
			+ "${popuOrder}"
			+ "' ><p>"
			+ bb
			+ "</p><p class='ico'><a href='javascript:;' onclick='remCondition(this,"
			+ true + ");'></a></p></div>";
	$(".whered").append(whereItem);
}
if('${priceOrder}' != null && '${priceOrder}' != ''){
	$(".listtypelid").show();
	$("#seletedCons").show();
	var  bb=null;
	if("${priceOrder}" == 'asc'){
		bb="价格从低到高";
	}
	if("${priceOrder}" == 'desc'){
		bb="价格从高到低";
	}
	// 显示已选条件
	whereItem = "<div class='wlid' s_type='"
			+ 'priceOrder'
			+ "' s_id='"
			+ "${priceOrder}"
			+ "' ><p>"
			+ bb
			+ "</p><p class='ico'><a href='javascript:;' onclick='remCondition(this,"
			+ true + ");'></a></p></div>";
	$(".whered").append(whereItem);
}
if('${isSelf}' != null && '${isSelf}' != ''){
	$(".listtypelid").show();
	$("#seletedCons").show();
	var  bb=null;
	if("${isSelf}" == '1'){
		bb="自营商品";
	}
	// 显示已选条件
	whereItem = "<div class='wlid' s_type='"
			+ 'isSelf'
			+ "' s_id='"
			+ "${isSelf}"
			+ "' ><p>"
			+ bb
			+ "</p><p class='ico'><a href='javascript:;' onclick='remCondition(this,"
			+ true + ");'></a></p></div>";
	$(".whered").append(whereItem);
}
if('${brands2}' != null && '${brands2}' != ''){
	$(".listtypelid").show();
	$("#seletedCons").show();
	// 显示已选条件
	whereItem = "<div class='wlid' s_type='"
			+ 'brands'
			+ "' s_id='"
			+ "${brands2}"
			+ "' ><p>"
			+ "${brandste2}"
			+ "</p><p class='ico'><a href='javascript:;' onclick='remCondition(this,"
			+ true + ");'></a></p></div>";
	$(".whered").append(whereItem);
}
if('${indClass2}' != null && '${indClass2}' != ''){
	$(".listtypelid").show();
	$("#seletedCons").show();
	// 显示已选条件
	whereItem = "<div class='wlid' s_type='"
			+ 'indClass'
			+ "' s_id='"
			+ "${indClass2}"
			+ "' ><p>"
			+ "${indClasste2}"
			+ "</p><p class='ico'><a href='javascript:;' onclick='remCondition(this,"
			+ true + ");'></a></p></div>";
	$(".whered").append(whereItem);
}
if('${proClass2}' != null && '${proClass2}' != ''){
	$(".listtypelid").show();
	$("#seletedCons").show();
	// 显示已选条件
	whereItem = "<div class='wlid' s_type='"
			+ 'proClass'
			+ "' s_id='"
			+ "${proClass2}"
			+ "' ><p>"
			+ "${proClasste2}"
			+ "</p><p class='ico'><a href='javascript:;' onclick='remCondition(this,"
			+ true + ");'></a></p></div>";
	$(".whered").append(whereItem);
}
if('${serTypeIdste2}' != null && '${serTypeIdste2}' != ''){
	$(".listtypelid").show();
	$("#seletedCons").show();
	// 显示已选条件
	whereItem = "<div class='wlid' s_type='"
			+ 'serTypeIds'
			+ "' s_id='"
			+ "${serTypeIds2}"
			+ "' ><p>"
			+ "${serTypeIdste2}"
			+ "</p><p class='ico'><a href='javascript:;' onclick='remCondition(this,"
			+ true + ");'></a></p></div>";
	$(".whered").append(whereItem);
}




//增加条件
function addCondition(obj) {
	var $this = $(obj), isExist = false, isTypeExist = false, whereItem = "", text = "";
	// 是否是综合排序
	var isCooOrder = false;
	var id = $this.attr("s_val");
	var type = $this.closest(".listtypelid").attr("id"), isMutCheck = isMutiple($this
			.closest(".listtypelid"));
	if (!type) {
		// 综合排序时情况
		type = $this.attr("name");
		isCooOrder = true;
		text = $this.parent().text();
	} else {
		text = $this.text();
	}

	if (isMutCheck) {
		// 多选 add by fang 20150916
		// 增加条件到表单条件
		var beforeid = $("#searchForm").find("input[name='" + type + "']")
				.attr("value");
		
		var isNull = $.trim(beforeid) == "";
		if ($this.closest("li").hasClass("on")) {
			$this.closest("li").removeClass("on");
			var values = beforeid.split(",");
			var delIndex = 0;
			for ( var index in values) {
				if (values[index] == id) {
					delIndex = index;
				}
			}
			values.splice(delIndex, 1);
			$("#searchForm").find("input[name='" + type + "']").attr("value",
					values.join(","));
		} else {
			$("#searchForm").find("input[name='" + type + "']").attr("value",
					beforeid + (isNull ? "" : ",") + id);
			$this.closest("li").addClass("on");
		}
	} else {
		// 单选
		// 表单条件增添20150908
		//加载时，如果有查询条件的话，将条件添加到searchForm中，进而返回到后台（该问题是，修改分页方式，而产生的bug，进而用此方法解决）
		if('${isNew}' != null && '${isNew}' != ''){
			$("#searchForm").find("input[name='isNew']").attr("value", "${isNew}");
		}
		
		if('${popuOrder}' != null && '${popuOrder}' != ''){
			$("#searchForm").find("input[name='popuOrder']").attr("value", "${popuOrder}");
		}
		
		if('${priceOrder}' != null && '${priceOrder}' != ''){
			$("#searchForm").find("input[name='priceOrder']").attr("value", "${priceOrder}");
		}
		
		if('${isSelf}' != null && '${isSelf}' != ''){
			$("#searchForm").find("input[name='isSelf']").attr("value", "${isSelf}");
		}
		
		if('${brands2}' != null && '${brands2}' != ''){
			$("#searchForm").find("input[name='brands']").attr("value", "${brands2}");
			$("#searchForm").find("input[name='brandste']").attr("value", "${brandste2}");
		}
		if('${indClass2}' != null && '${indClass2}' != ''){
			$("#searchForm").find("input[name='indClass']").attr("value", "${indClass2}");
			$("#searchForm").find("input[name='indClasste']").attr("value", "${indClasste2}");
		}
		if('${proClass2}' != null && '${proClasste2}' != ''){
			$("#searchForm").find("input[name='proClass']").attr("value", "${proClass2}");
			$("#searchForm").find("input[name='proClasste']").attr("value", "${proClasste2}");
		}
		if('${serTypeIds2}' != null && '${serTypeIds2}' != ''){
			$("#searchForm").find("input[name='serTypeIds']").attr("value", "${serTypeIds2}");
			$("#searchForm").find("input[name='serTypeIdste']").attr("value", "${serTypeIdste2}");
		}
		if('${keyword}' != null && '${keyword}' != ''){
			$("#searchForm").find("input[name='keyword']").attr("value", "${keyword}");
		}

		
		$("#searchForm").find("input[name='" + type + "']").attr("value", id);
			if(type == 'brands'){
				$("#searchForm").find("input[name='" + "brandste" + "']").attr("value", text);
			}
			if(type == 'indClass'){
				$("#searchForm").find("input[name='" + "indClasste" + "']").attr("value", text);
			}
			if(type == 'proClass'){
				$("#searchForm").find("input[name='" + "proClasste" + "']").attr("value", text);
			}
			if(type == 'serTypeIds'){
				$("#searchForm").find("input[name='" + "serTypeIdste" + "']").attr("value", text);
			}
		
		$("#seletedCons").show();
		if (!isCooOrder) {
			$this.closest(".listtypelid").find("li").removeClass("on");
			$this.closest("li").addClass("on");
		}
		$(".whered .wlid").each(function() {
			if ($(this).attr("s_type") == type) {
				isTypeExist = true;
				if ($(this).attr("s_id") == id) {
					isExist = true;
				}
				$(this).remove();
			}
		});

		// 显示已选条件
		whereItem = "<div class='wlid' s_type='"
				+ type
				+ "' s_id='"
				+ id
				+ "' ><p>"
				+ text
				+ "</p><p class='ico'><a href='javascript:;' onclick='remCondition(this,"
				+ isCooOrder + ");'></a></p></div>";
		$(".whered").append(whereItem);
		// 提交表单数据
		submitPost();
	}

}
</script>
</html>
