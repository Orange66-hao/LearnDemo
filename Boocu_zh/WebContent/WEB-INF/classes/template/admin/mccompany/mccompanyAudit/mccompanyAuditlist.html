
<!DOCTYPE html PUBLIC "-//W3C//DTD HTML 4.01//EN"
   "http://www.w3.org/TR/html4/strict.dtd">

<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=utf-8" />
<meta http-equiv="X-UA-Compatible" content="IE=9" > </meta>
<title>云图商城-后台管理</title>
<style type="text/css">
body{
	margin:0px;
	font-family:Arial,"宋体",Verdana,sans-serif;
	font-size:12px;
}
html,body {padding: 0;margin: 0; overflow-x:hidden; overflow-y:auto;}
dl,dd{margin:0px}
ul{
	list-style-type:none;
	margin:0px;
	padding:0px;
	
}
.prosortd{ clear:both;  margin-left:10px; overflow:hidden; zoom:1; }
.prosortd p{ float:left; padding-right:120px; font-size:14px;}
.prosortd1{ clear:both; margin-left:10px; overflow:hidden; zoom:1; }
.prosortd1 p{ float:left; padding-right:150px; font-size:14px;}
.prosortd2{ clear:both; margin-left:240px; overflow:hidden; zoom:1; }
.prosortd2 p{ float:left; padding-right:150px; font-size:14px;}
</style>
<script type="text/javascript" src="/editor/ckeditor362/ckeditor.js"></script>
<script type="text/javascript" src="/adminthemes/new/js/jquery-1.8.3.min.js"></script>
<script type="text/javascript" src="/adminthemes/new/js/jquery-form-2.33.js"></script>
<script type="text/javascript" src="/statics/js/area_sql.js"></script>
<link rel="stylesheet" type="text/css" href="/adminthemes/new/js/easy-ui/themes/gray/easyui.css"/>    
<link rel="stylesheet" type="text/css" href="/adminthemes/new/js/easy-ui/themes/icon.css"/>  
<script type="text/javascript" src="/adminthemes/new/js/easy-ui/jquery.easyui.min.js"></script>
<script type="text/javascript" src="/adminthemes/new/js/easy-ui/easyui-lang-zh_CN.js"></script>
<script type="text/javascript" src="/adminthemes/new/js/jquery.blockUI.js"></script>
<script type="text/javascript" src="/adminthemes/new/js/jquery.loading.js"></script>
<link href="/adminthemes/new/css/main.css" rel="stylesheet" type="text/css" />
<link href="/adminthemes/new/css/style.css" rel="stylesheet" type="text/css" />
<script type="text/javascript" src="/adminthemes/js/BooCu.js"></script>
<script type="text/javascript" src="/adminthemes/new/js/ajaxupload.3.9.js"></script>
<script type="text/javascript" src="/frontthemes/js/easyuiUtil.js"></script>


[#include '/template/admin/include/common.html']

</head>
<body>
 
<div id="bookinfo" style="display: none;"></div>
<div id="loading"></div>
<div class="main">
<!-- <div title="筛选条件" data-options="selected:true">
	 <div class="prosortd">
	 会员等级
        <p>会员等级: </p>
        <p>
          <input type="radio"  name="memberGradeId" >
          全部</p>
        <p>
          <input type="radio"  s_val="客户"  name="memberGradeId">
          客户</p>
        <p>
          <input type="radio"  s_val="VIP" name="memberGradeId">
    VIP</p>
        <p>
          <input type="radio"  s_val="同行"  name="memberGradeId">
          同行</p>
       <p>
          <input type="radio"  s_val="VIP同行"  name="memberGradeId">
    VIP同行</p>
       <p>
          <input type="radio"  s_val="内部员工"  name="memberGradeId">
         内部员工</p>
        <p>
          <input type="radio"  s_val="回收供应商" name="memberGradeId">
    回收供应商</p>
        <p>
          <input type="radio"  s_val="初级会员"  name="memberGradeId">
          初级会员</p>
    </div>
	</div> -->
<div class="easyui-tabs">
	
	<div title="未审核的客户列表" style="padding:10px;">
	<form id="memberform2">
		<div id="tb" style="height: auto">
		    <a href="javascript:void(0)" class="button blueButton" 
				data-options="plain:true" onclick="invocation2()">审核</a>
			<!-- <a href="javascript:void(0)" class="easyui-linkbutton"
				data-options="plain:true" onclick="forbid2()">禁用</a>
		 	<a href="javascript:void(0)" class="easyui-linkbutton"
				data-options="plain:true" onclick="del2()">删除</a> -->
				
			<span style="float: right;padding-right:350px"> 
				责任人：<span id="simpleSearch">
					<input style="width: 110px; height: 30px;"
										class="easyui-combobox"
										url="/admin/mcMember/get_mcmember_names.jspx" name="mode_blame" data-options="valueField:'id',textField:'text',editable:true"
										id="mode_blame"/>
					<a href="javascript:void(0)" class="easyui-linkbutton"
					data-options="plain:true" onclick="searchByBlame()" >搜索</a>
				</span>
			</span>
		</div>
		
		<div class="clear height10"></div>
		<div class="shadowBoxWhite tableDiv">
		<table class="easyui-datagrid" id="dataList"
					data-options="url:'/admin/ModelCollection/getGroupData.jspx?subscribe_status=0',pageList: [5,10,15,20],pageSize:10,fitColumns:'true',rownumbers:'true'" nowrap="false"
			pagination="true" sortName="create_date" sortOrder="desc" idField="id" treeField="name" checkbox="true">
			<thead>
				<tr>
				 	<th data-options="field:'id',checkbox:true">id</th>
					<th data-options="field:'mc_industry_class',hidden:true"></th>
					<th data-options="field:'mc_industry_class_name',width:$(this).width()*0.08,sortable:'true' ,align: 'center'">行业分类</th>
					<th data-options="field:'name_id',hidden:true" formatter="formatup"></th>
					<th data-options="field:'name',width:$(this).width()*0.15,sortable:'true' ,align: 'center'" formatter="companyOperation">公司名称</th>
					<th data-options="field:'major_product',hidden:true" formatter="formatup"></th>
					<th data-options="field:'major_product_name',width:$(this).width()*0.18,sortable:'true',align: 'center'" formatter="formatup">主营产品</th>
					<th data-options="field:'mc_productclass',hidden:true" formatter="formatup"></th>
					<th data-options="field:'mc_productclass_name',width:$(this).width()*0.18,sortable:'true',align: 'center'" formatter="formatup">常用仪器</th>
					<th data-options="field:'brand',hidden:true" formatter="formatup"></th>
					<th data-options="field:'brand_name',width:$(this).width()*0.15,sortable:'true',align: 'center'" formatter="formatup">品牌型号</th>
					<th data-options="field:'subscribe_content',width:$(this).width()*0.15,sortable:'true',align: 'center'" formatter="formnull">订阅内容</th>
					<!-- <th data-options="field:'mc_model',hidden:true" formatter="formatup"></th>
					<th data-options="field:'mc_model_name',width:$(this).width()*0.2,sortable:'true',align: 'center'" formatter="formatup">型号</th> -->
					<th data-options="field:'contact',hidden:true" formatter="formatup"></th>
					<th data-options="field:'contact_name',width:$(this).width()*0.07,sortable:'true',align: 'center'" formatter="contactOperation">联系人</th>
					<th data-options="field:'blame',hidden:true" formatter="formatup"></th>
					<th data-options="field:'blame_name',width:$(this).width()*0.06,sortable:'true',align: 'center'" formatter="">责任人</th>
					<!-- <th data-options="field:'grade',width:$(this).width()*0.05,sortable:'true',align: 'center'" formatter="formatupgrade">等级</th> -->
					<!-- <th data-options="field:'measurement_time',width:$(this).width()*0.05,sortable:'true',align: 'center'" formatter="formatupmeasurement_time">计量时间</th> -->
					<!-- <th data-options="field:'ckZt',width:$(this).width()*0.05,sortable:'true',align: 'center'" formatter="formatupckzt">订阅邮件</th>
					<th data-options="field:'rate',width:$(this).width()*0.07,sortable:'true',align: 'center'" formatter="formatuprate">订阅周期</th> -->
					<th data-options="field:'introducer',width:$(this).width()*0.06,sortable:'true',align: 'center'" formatter="">介绍人</th>
					<th data-options="field:'create_date',width:$(this).width()*0.08,sortable:'true',align: 'center'" formatter="formdate">创建时间</th>
					<th id="th1"
						data-options="field:'action',width:$(this).width()*0.06,align:'center'"
						formatter="formatOperation">操作</th>
				</tr>
			</thead>
		</table>
		</div>
	</form>
	</div>
	<div title="审核的客户列表" style="padding:10px;">
	<form id="memberform3">
		<!-- <div id="tb" style="height: auto">
		    <a href="javascript:void(0)" class="button blueButton" 
				data-options="plain:true" onclick="unInvocation3()">反审核</a>
			<a href="javascript:void(0)" class="easyui-linkbutton"
				data-options="plain:true" onclick="forbid3()">禁用</a>
			<a href="javascript:void(0)" class="easyui-linkbutton"
				data-options="plain:true" onclick="del3()">删除</a>
				
			<span style="float: right;"> 
				<span id="simpleSearch">
					<input id="searchKeyword3" class="input_text" type="text" value="" size="30" style="width: 300px;"
					placeholder="请输入会员名" name="searchKeyWord"> 
					<a href="javascript:void(0)" class="easyui-linkbutton" 
					data-options="plain:true" onclick="searchAdvertBase3()">搜索</a>
				</span>
			</span>
		</div> -->
		
		<div class="clear height10"></div>
		<div class="shadowBoxWhite tableDiv">
		<table class="easyui-datagrid" id="dataList1"
					data-options="url:'/admin/ModelCollection/getGroupData.jspx?subscribe_status=1',pageList: [5,10,15,20],pageSize:10,fitColumns:'true',rownumbers:'true'" nowrap="false"
			pagination="true" sortName="create_date" sortOrder="desc" idField="id" treeField="name" checkbox="true">
			<thead>
				<tr>
				 	<th data-options="field:'id',checkbox:true">id</th>
							<th data-options="field:'mc_industry_class',hidden:true"></th>
							<th data-options="field:'mc_industry_class_name',width:$(this).width()*0.08,sortable:'true' ,align: 'center'">行业分类</th>
							<th data-options="field:'name_id',hidden:true" formatter="formatup"></th>
							<th data-options="field:'name',width:$(this).width()*0.15,sortable:'true' ,align: 'center'" formatter="companyOperation">公司名称</th>
							<th data-options="field:'major_product',hidden:true" formatter="formatup"></th>
							<th data-options="field:'major_product_name',width:$(this).width()*0.18,sortable:'true',align: 'center'" formatter="formatup">主营产品</th>
							<th data-options="field:'mc_productclass',hidden:true" formatter="formatup"></th>
							<th data-options="field:'mc_productclass_name',width:$(this).width()*0.18,sortable:'true',align: 'center'" formatter="formatup">常用仪器</th>
							<th data-options="field:'brand',hidden:true" formatter="formatup"></th>
							<th data-options="field:'brand_name',width:$(this).width()*0.15,sortable:'true',align: 'center'" formatter="formatup">品牌型号</th>
							<th data-options="field:'subscribe_content',width:$(this).width()*0.15,sortable:'true',align: 'center'" formatter="formnull">订阅内容</th>
							<!-- <th data-options="field:'mc_model',hidden:true" formatter="formatup"></th>
							<th data-options="field:'mc_model_name',width:$(this).width()*0.2,sortable:'true',align: 'center'" formatter="formatup">型号</th> -->
							<th data-options="field:'contact',hidden:true" formatter="formatup"></th>
							<th data-options="field:'contact_name',width:$(this).width()*0.07,sortable:'true',align: 'center'" formatter="contactOperation">联系人</th>
							<th data-options="field:'blame',hidden:true" formatter="formatup"></th>
							<th data-options="field:'blame_name',width:$(this).width()*0.06,sortable:'true',align: 'center'" formatter="">责任人</th>
							<!-- <th data-options="field:'grade',width:$(this).width()*0.05,sortable:'true',align: 'center'" formatter="formatupgrade">等级</th> -->
							<!-- <th data-options="field:'measurement_time',width:$(this).width()*0.05,sortable:'true',align: 'center'" formatter="formatupmeasurement_time">计量时间</th> -->
							<!-- <th data-options="field:'ckZt',width:$(this).width()*0.05,sortable:'true',align: 'center'" formatter="formatupckzt">订阅邮件</th>
							<th data-options="field:'rate',width:$(this).width()*0.07,sortable:'true',align: 'center'" formatter="formatuprate">订阅周期</th> -->
							<th data-options="field:'introducer',width:$(this).width()*0.06,sortable:'true',align: 'center'" formatter="">介绍人</th>
							<th data-options="field:'create_date',width:$(this).width()*0.08,sortable:'true',align: 'center'" formatter="formdate">创建时间</th>
							<!-- <th id="th1"
								data-options="field:'action',width:$(this).width()*0.06,align:'center'"
								formatter="formatOperation">操作</th> -->
				</tr>
			</thead>
		</table>
		</div>
	</form>
	</div>

	</div>
	<div id="divdia" style="display: none;"></div>

</div>
<script type="text/javascript">
function formatOperation(value, row, index) {
	var val = "<a class='edit' title='修改' href='javascript:void(0);' onclick='append("+row.id+")' ></a>";
	return val;
}
function formdate(value, row, index) {
	if(value != null){
		return new Date(value).format("yyyy-MM-dd");
	}
	
}
function formatup(value, row, index) {
	var va=value+"";
	return va.replace(/^,+/,"").replace(/,+$/,"");
}
//查看公司的详细信息
function companyOperation(value, row, index) {
	var str='';
	   $.each( row.name_id, function(i, n){//将有多个联系人的数据，用a标签拼接成多个，用逗号隔开
				var val = "<a class='details' title='查看' href='javascript:void(0);' onclick='newTab(\""
					+ row.name[i]
					+ "-信息\",\"/admin/mcCompanyName/edit_memberGrade.jspx?company_type=companyshow&id="
					+n + "\")' >"+row.name[i]+"</a>";
					str=str+val+',';
		});   
	  return str.replace(/^,+/,"").replace(/,+$/,"");//正则去掉末尾的逗号
	
}
function formnull(value, row, index) {
	if(value == 'undefined'){
		return null;
	}
	return value;
}
//查看联系人的详细信息
function contactOperation(value, row, index) {
	var str='';
	   $.each( row.contact, function(i, n){//将有多个联系人的数据，用a标签拼接成多个，用逗号隔开
				var val = "<a class='details' title='查看' href='javascript:void(0);' onclick='newTab(\""
					+ row.contact_name[i]
					+ "-信息\",\"/admin/mcContacts/edit_memberGrade.jspx?contact_type=contactshow&id="
					+n + "\")' >"+row.contact_name[i]+"</a>";
					str=str+val+',';
		});   
	  return str.replace(/^,+/,"").replace(/,+$/,"");//正则去掉末尾的逗号
	
}
	function searchByBlame(){
		var mode_blame = $("#mode_blame").combobox('getValues');
		/* $.ajax({  
	           type: "POST",  
	           url="/admin/ModelCollection/getGroupData.jspx",
			 　　//我们用text格式接收
			　　 //dataType: "text",   
			　　//json格式接收数据  
	           dataType: "json",  
	           data:  "subscribe_status="+1+"&mode_blame="+mode_blame[0],  

	           success: function (jsonStr) {
	           	
	           }  
	    });   */
		 $("#dataList").datagrid('options').queryParams = {
			 	mode_blame:mode_blame.toString(),
			};
		$("#dataList").datagrid('reload'); 
	}
/* 	$("#memberGradeId").combobox({
		onSelect:function(){
			var gride = $(this).attr("s_val");
			var keyword1 = $("#searchKeyword1").val();
			var keyword2 = $("#searchKeyword2").val();
			var keyword3 = $("#searchKeyword3").val();
			var keyword0 = $("#searchKeyword0").val();
			$("#memberdata1").datagrid("load", {
				gride:gride,
				keyword:keyword1,
				page:1
			});
			$("#memberdata2").datagrid("load", {
				gride:gride,
				keyword:keyword2,
				page:1
			});
			$("#memberdata3").datagrid("load", {
				gride:gride,
				keyword:keyword3,
				page:1
			});
			$("#memberdata0").datagrid("load", {
				gride:gride,
				keyword:keyword0,
				page:1
			});
		}
	}); */
	
	$(".prosortd").find("input[type='radio']").change(function(){
		var gride = $(".prosortd").find("input[name='memberGradeId']:checked").attr("s_val");
		var keyword1 = $("#searchKeyword1").val();
		var keyword2 = $("#searchKeyword2").val();
		var keyword3 = $("#searchKeyword3").val();
		var keyword0 = $("#searchKeyword0").val();
		$("#memberdata1").datagrid("load",{
			gride:gride,
			keyword:keyword1,
			page:1
		});
		$("#memberdata2").datagrid("load",{
			gride:gride,
			keyword:keyword2,
			page:1
		});
		$("#memberdata3").datagrid("load",{
			gride:gride,
			keyword:keyword3,
			page:1
		});
		$("#memberdata0").datagrid("load",{
			gride:gride,
			keyword:keyword0,
			page:1
		});
	});
	function append(id) {
		var map = {}; // Map map = new HashMap();
		if (!id) {
			map["href"] = "/admin/ModelCollection/add_modelcollection.jspx";
			map["formId"] = "#addForm";
			map["url"] = "/admin/ModelCollection/doAdd_memberGrade.jspx?ajax=yes";
			map["title"] = "添加信息";
			map["loadshow"] = "正在添加......";
		} else {
			map["href"] = "/admin/ModelCollection/edit_memberGrade.jspx?id=" + id;
			map["formId"] = "#editForm";
			map["url"] = "/admin/ModelCollection/doEdit_memberGrade.jspx?ajax=yes";
			map["title"] = "修改信息";
			map["loadshow"] = "正修改......";
		}
		map["divDialog"] = "#divdia";
		map["gridreload"] = "#dataList";
		addDialog(map);
	}
	function submitForm(map) {
		var data = {};
		data.id=$("#id").val();
		//data.mc_industry_class=$("#mc_industry_class_coll").combobox('getValues').toString();
		data.mc_industry_class=$("#mc_industry_class_coll").val();
		
		//data.major_product=$("#major_product_coll").combotree('getValues').toString();
		data.major_product=$("#major_product_coll").val();
		
		data.grade=$("#grade").val();
		data.measurement_time=$("#measurement_time").val();
		data.ckZt=$("#ckZt").val();
		data.rate=$("#rate").val();
		data.subscribeContent=$("#subscribe_content").val();
		var contact2=$("#contact").combobox('getValues');
		data.contact=contact2.toString();
		
		//data.mc_productclass=$("#mc_productclass_coll").combobox('getValues').toString();
		data.mc_productclass=$("#mc_productclass_coll").val();
		
		var mc_brand2=$("#mc_brand_coll").val();
		data.mc_brand=mc_brand2.toString();
		
		/* 	var mc_model2=$("#mc_model_coll").combobox('getValues');
		data.mc_model=mc_model2.toString(); */
		
		var blame2=$("#blame").combobox('getValues');
		data.blame=blame2.toString();
		//介绍人
		var mc_introducer2=$("#mc_introducer_coll").val();
		data.introducer=mc_introducer2.toString(); //介绍人的字段introducer 需要和持久化类的属性名对应
		
		data.name=$("#name").combobox('getValue');  
		var formflag = $(map["formId"]).form().form('validate');

		console.log(data);
		if (formflag && condition_company) {
			$.Loading.show(map["loadshow"]);
			var options = {
				url : map["url"],
				type : "POST",
				dataType : 'json',
				data:data,
				success : function(result) {
					if (result.result == 1) {
						$.Loading.show(result.message);
						$(map["divDialog"]).dialog('close');
						$(map["gridreload"]).datagrid('reload');
					}
					if (result.result == 0) {
						$.Loading.error(result.message);
					}
					$.Loading.hide();
				},
				error : function(e) {
					alert("出现错误 ，请重试");
				}
			};
			$.ajax(options);
		}
	}
	
	function append1(id) {
		var map = {}; // Map map = new HashMap();
		if (id != null) {
			map["href"] = "/admin/member/memberAudit/edit_memberAudit.jspx?id=" + id;
			map["formId"] = "#editForm";
			map["url"] = "/admin/member/memberAudit/save_edit_memberAudit.jspx?ajax=yes";
			map["title"] = "修改资料信息";
			map["loadshow"] = "正修改......";
		}
		map["divDialog"] = "#divdia";
		map["gridreload"] = "#memberdata1";
		addDialog(map);
	}
	
	function append2(id) {
		var map = {}; // Map map = new HashMap();
		if (id != null) {
			map["href"] = "/admin/member/memberAudit/edit_memberAudit.jspx?id=" + id;
			map["formId"] = "#editForm";
			map["url"] = "/admin/member/memberAudit/save_edit_memberAudit.jspx?ajax=yes";
			map["title"] = "修改资料信息";
			map["loadshow"] = "正修改......";
		}
		map["divDialog"] = "#divdia";
		map["gridreload"] = "#memberdata2";
		addDialog(map);
	}
	
	function append3(id) {
		var map = {}; // Map map = new HashMap();
		if (id != null) {
			map["href"] = "/admin/member/memberAudit/edit_memberAudit.jspx?id=" + id;
			map["formId"] = "#editForm";
			map["url"] = "/admin/member/memberAudit/save_edit_memberAudit.jspx?ajax=yes";
			map["title"] = "修改资料信息";
			map["loadshow"] = "正修改......";
		}
		map["divDialog"] = "#divdia";
		map["gridreload"] = "#memberdata3";
		addDialog(map);
	}
	
	function append0(id) {
		var map = {}; // Map map = new HashMap();
		if (id != null) {
			map["href"] = "/admin/member/memberAudit/edit_memberAudit.jspx?id=" + id;
			map["formId"] = "#editForm";
			map["url"] = "/admin/member/memberAudit/save_edit_memberAudit.jspx?ajax=yes";
			map["title"] = "修改资料信息";
			map["loadshow"] = "正修改......";
		}
		map["divDialog"] = "#divdia";
		map["gridreload"] = "#memberdata0";
		addDialog(map);
	}
	
	function addDialog(map) {
		$(map["divDialog"]).show();
		$(map["divDialog"]).dialog({
			title : map["title"],
			width : 900,
			height : 685,
			closed : false,
			cache : false,
			href : map["href"],
			modal : true,
			buttons : [ {
				text : '保存',
				iconCls : 'icon-ok',
				handler : function() {
					for(instance in CKEDITOR.instances){
						CKEDITOR.instances[instance].updateElement();
					}
					var savebtn = $(this);
	　　				var disabled=savebtn.hasClass("l-btn-disabled");
	　　				if(!disabled){
						 submitForm(map,savebtn);
					}
				}
			}, {
				text : '清空',
				handler : function() {
					clearForm(map);
				}
			} ]
		});
	}
	
	function clearForm(map) {
		$(map["formId"]).form('clear');
	}
	
	function userTypeOperation(value, row, index){
		return "buyer" == value ?"买家":("seller" == value ?"卖家":"买家和卖家")
	}
	
	function memberShipOperation(value, row, index){
		return value == "personal" ?"个人":"企业";
	}
	//未激活修改
	function formatOperation1(value, row, index) {
		var val = "<a class='edit' title='修改' href='javascript:void(0);' onclick='append1("+row.item.id+")' ></a>";
		return val;
	}
	//未审核修改
	function formatOperation2(value, row, index) {
		var val = "<a class='edit' title='修改' href='javascript:void(0);' onclick='append2("+row.item.id+")' ></a>";
		return val;
	}
	//审核修改
	function formatOperation3(value, row, index) {
		var val = "<a class='edit' title='修改' href='javascript:void(0);' onclick='append3("+row.item.id+")' ></a>";
		return val;
	}
	//禁用修改
	function formatOperation0(value, row, index) {
		var val = "<a class='edit' title='修改' href='javascript:void(0);' onclick='append0("+row.item.id+")' ></a>";
		return val;
	}
	//查看用户的详细信息
	function userOperation(value, row, index) {
		var val = "<a class='details' title='查看' href='javascript:void(0);' onclick='newTab(\""
			+ row.item.username
			+ "-信息\",\"/admin/member/memberAudit/look_memberAudit.jspx?id="
			+ row.item.id + "\")' >"+row.item.username+"</a>";
		return val;
	}
	
		//未审核审核
	function invocation2(){
		var rows = $("#dataList").datagrid("getSelections");
		if(rows.length < 1){
			$.Loading.error("请选择要审核的客户");
			return;
		}
		for(var i=0;i<rows.length;i++){
			if(rows[i].subscribe_content==''||rows[i].subscribe_content==undefined){
				$.Loading.error("请确认订阅内容");
				return;
			}
		}
		if(!confirm("确认要审核该用户?")){
			return;
		}
		var options = {
				url : "/admin/ModelCollection/mcCompanyAudit/invocation.jspx?ajax=yes",
				type : "POST",
				dataType : 'json',
				success : function(result) {
					$.Loading.success(result.message);					
					if (result.result == 1) {
						var rows = $('#dataList').datagrid("getSelections");
						for ( var i = 0; i < rows.length; i++) {
							var rowIndex = $('#dataList').datagrid('getRowIndex',
									rows[i]);
							$('#dataList').datagrid('clearSelections');
							$('#dataList').datagrid('reload');
						}
					}
				},
				error : function(e) {
					$.Loading.error("出现错误 ，请重试");
				}
			};
			$('#memberform2').ajaxSubmit(options);
		}
		
	//禁用 审核
	function invocation0(){
		var rows = $("#memberdata0").datagrid("getSelections");
		if(rows.length < 1){
			$.Loading.error("请选择要审核的用户");
			return;
		}
		if(!confirm("确认要审核该用户?")){
			return;
		}
		var options = {
				url : "/admin/member/memberAudit/invocation.jspx?ajax=yes",
				type : "POST",
				dataType : 'json',
				success : function(result) {
					$.Loading.success(result.message);					
					if (result.result == 1) {
						var rows = $('#memberdata0').datagrid("getSelections");
						for ( var i = 0; i < rows.length; i++) {
							var rowIndex = $('#memberdata0').datagrid('getRowIndex',
									rows[i]);
							$('#memberdata0').datagrid('reload');
						}
					}
				},
				error : function(e) {
					$.Loading.error("出现错误 ，请重试");
				}
			};
			$('#memberform0').ajaxSubmit(options);
		}
	//未审核禁用
	function forbid2() {
		var rows = $("#memberdata2").datagrid("getSelections");
		if(rows.length < 1){
			$.Loading.error("请选择要禁用的用户");
			return;
		}
		if(!confirm("确认要禁用该用户?")){
			return;
		}
		var options = {
				url: "/admin/member/memberAudit/forbid.jspx?ajax=yes",
				type : "POST",
				dataType: 'json',
				success : function(result) {
					$.Loading.success(result.message);
					if(result.result == 1) {
						var rows = $('#memberdata2').datagrid("getSelections");
						for( var i =0; i<rows.length; i++){
							var index = $('#memberdata2').datagrid('getRowIndex',
									rows[i]);
							$('#memberdata2').datagrid('reload');
						}
					}
				},
				error : function(e){
					$.Loading.error("出现错误, 请重试");
				}
				};	
		$('#memberform2').ajaxSubmit(options);
	}
	//审核禁用
	function forbid3() {
		var rows = $("#memberdata3").datagrid("getSelections");
		if(rows.length < 1){
			$.Loading.error("请选择要禁用的用户");
			return;
		}
		if(!confirm("确认要禁用该用户?")){
			return;
		}
		var options = {
				url: "/admin/member/memberAudit/forbid.jspx?ajax=yes",
				type : "POST",
				dataType: 'json',
				success : function(result) {
					$.Loading.success(result.message);
					if(result.result == 1) {
						var rows = $('#memberdata3').datagrid("getSelections");
						for( var i =0; i<rows.length; i++){
							var index = $('#memberdata3').datagrid('getRowIndex',
									rows[i]);
							$('#memberdata3').datagrid('reload');
						}
					}
				},
				error : function(e){
					$.Loading.error("出现错误, 请重试");
				}
				};	
		$('#memberform3').ajaxSubmit(options);
	}
	
	//未激活  激活
	function unInvocation1(){
		var rows = $("#memberdata1").datagrid("getSelections");
		if(rows.length < 1){
			$.Loading.error("请选择要激活的用户");
			return;
		}
		if(!confirm("确认要激活该用户?")){
			return;
		}
		var options = {
				url : "/admin/member/memberAudit/unInvocation.jspx?ajax=yes",
				type : "POST",
				dataType : 'json',
				success : function(result) {
					$.Loading.success(result.message);					
					if (result.result == 1) {
						var rows = $('#memberdata1').datagrid("getSelections");
						for ( var i = 0; i < rows.length; i++) {
							var rowIndex = $('#memberdata1').datagrid('getRowIndex',
									rows[i]);
							$('#memberdata1').datagrid('reload');
						}
					}
				},
				error : function(e) {
					$.Loading.error("出现错误 ，请重试");
				}
			};
			$('#memberform1').ajaxSubmit(options);
		}
	
	//审核反审核
	function unInvocation3(){
		var rows = $("#memberdata3").datagrid("getSelections");
		if(rows.length < 1){
			$.Loading.error("请选择要反审核的用户");
			return;
		}
		if(!confirm("确认要反审核该用户?")){
			return;
		}
		var options = {
				url : "/admin/member/memberAudit/unInvocation.jspx?ajax=yes",
				type : "POST",
				dataType : 'json',
				success : function(result) {
					$.Loading.success(result.message);					
					if (result.result == 1) {
						var rows = $('#memberdata3').datagrid("getSelections");
						for ( var i = 0; i < rows.length; i++) {
							var rowIndex = $('#memberdata3').datagrid('getRowIndex',
									rows[i]);
							$('#memberdata3').datagrid('reload');
						}
					}
				},
				error : function(e) {
					$.Loading.error("出现错误 ，请重试");
				}
			};
			$('#memberform3').ajaxSubmit(options);
		}
	
	//启用
	function unInvocation0(){
		var rows = $("#memberdata0").datagrid("getSelections");
		if(rows.length < 1){
			$.Loading.error("请选择要启用的用户");
			return;
		}
		if(!confirm("确认要启用该用户?")){
			return;
		}
		var options = {
				url : "/admin/member/memberAudit/unInvocation.jspx?ajax=yes",
				type : "POST",
				dataType : 'json',
				success : function(result) {
					$.Loading.success("启用成功");					
					if (result.result == 1) {
						var rows = $('#memberdata0').datagrid("getSelections");
						for ( var i = 0; i < rows.length; i++) {
							var rowIndex = $('#memberdata0').datagrid('getRowIndex',
									rows[i]);
							$('#memberdata0').datagrid('reload');
						}
					}
				},
				error : function(e) {
					$.Loading.error("出现错误 ，请重试");
				}
			};
			$('#memberform0').ajaxSubmit(options);
		}
	
	//真实删除用户所有数据
	function del1() {
		var rows = $("#memberdata1").datagrid("getSelections");
		if(rows.length < 1){
			$.Loading.error("请选择要删除的选项");
			return;
		}
		if(!confirm("确认要删除该选项?")){
			return;
		}
		var options = {
				url: "/admin/member/memberAudit/delete_memberAudit.jspx?ajax=yes",
				type : "POST",
				dataType: 'json',
				success : function(result) {
					$.Loading.success(result.message);
					if(result.result == 1) {
						var rows = $('#memberdata1').datagrid("getSelections");
						for( var i =0; i<rows.length; i++){
							var index = $('#memberdata1').datagrid('getRowIndex', rows[i]);
							$('#memberdata1').datagrid('deleteRow',index);
						}
					}
				},
				error : function(e){
					$.Loading.error("出现错误, 请重试");
				}
				};	
		$('#memberform1').ajaxSubmit(options);
	}
	
	//真实删除用户所有数据
	function del2() {
		var rows = $("#memberdata2").datagrid("getSelections");
		if(rows.length < 1){
			$.Loading.error("请选择要删除的选项");
			return;
		}
		if(!confirm("确认要删除该选项?")){
			return;
		}
		var options = {
				url: "/admin/member/memberAudit/delete_memberAudit.jspx?ajax=yes",
				type : "POST",
				dataType: 'json',
				success : function(result) {
					$.Loading.success(result.message);
					if(result.result == 1) {
						var rows = $('#memberdata2').datagrid("getSelections");
						for( var i =0; i<rows.length; i++){
							var index = $('#memberdata2').datagrid('getRowIndex', rows[i]);
							$('#memberdata2').datagrid('deleteRow',index);
						}
					}
				},
				error : function(e){
					$.Loading.error("出现错误, 请重试");
				}
				};	
		$('#memberform2').ajaxSubmit(options);
	}
	
	//真实删除用户所有数据
	function del3() {
		var rows = $("#memberdata3").datagrid("getSelections");
		if(rows.length < 1){
			$.Loading.error("请选择要删除的选项");
			return;
		}
		if(!confirm("确认要删除该选项?")){
			return;
		}
		var options = {
				url: "/admin/member/memberAudit/delete_memberAudit.jspx?ajax=yes",
				type : "POST",
				dataType: 'json',
				success : function(result) {
					$.Loading.success(result.message);
					if(result.result == 1) {
						var rows = $('#memberdata3').datagrid("getSelections");
						for( var i =0; i<rows.length; i++){
							var index = $('#memberdata3').datagrid('getRowIndex', rows[i]);
							$('#memberdata3').datagrid('deleteRow',index);
						}
					}
				},
				error : function(e){
					$.Loading.error("出现错误, 请重试");
				}
				};	
		$('#memberform3').ajaxSubmit(options);
	}
	
	//真实删除用户所有数据
	function del0() {
		var rows = $("#memberdata0").datagrid("getSelections");
		if(rows.length < 1){
			$.Loading.error("请选择要删除的选项");
			return;
		}
		if(!confirm("确认要删除该选项?")){
			return;
		}
		var options = {
				url: "/admin/member/memberAudit/delete_memberAudit.jspx?ajax=yes",
				type : "POST",
				dataType: 'json',
				success : function(result) {
					$.Loading.success(result.message);
					if(result.result == 1) {
						var rows = $('#memberdata0').datagrid("getSelections");
						for( var i =0; i<rows.length; i++){
							var index = $('#memberdata0').datagrid('getRowIndex', rows[i]);
							$('#memberdata0').datagrid('deleteRow',index);
						}
					}
				},
				error : function(e){
					$.Loading.error("出现错误, 请重试");
				}
				};	
		$('#memberform0').ajaxSubmit(options);
	}
	
	function userStatusOperation(value, row, index){
		return 0 == value ? "禁用" : (1 == value ? "未激活": (2 == value ? "未审核" : "审核"));
	}
	
	function searchAdvertBase1(){
		var gride = $(".prosortd").find("input[name='memberGradeId']:checked").attr("s_val");
		var keyword = $("#searchKeyword1").val();
		$("#memberdata1").datagrid("load",{
			gride:gride,
			keyword:keyword,
			page:1
		});
	}
	function searchAdvertBase2(){
		var gride = $(".prosortd").find("input[name='memberGradeId']:checked").attr("s_val");
		var keyword = $("#searchKeyword2").val();
		$("#memberdata2").datagrid("load",{
			gride:gride,
			keyword:keyword,
			page:1
		});
	}
	function searchAdvertBase3(){
		var gride = $(".prosortd").find("input[name='memberGradeId']:checked").attr("s_val");
		var keyword = $("#searchKeyword3").val();
		$("#memberdata3").datagrid("load",{
			gride:gride,
			keyword:keyword,
			page:1
		});
	}
	function searchAdvertBase0(){
		var gride = $(".prosortd").find("input[name='memberGradeId']:checked").attr("s_val");
		var keyword = $("#searchKeyword0").val();
		$("#memberdata0").datagrid("load",{
			gride:gride,
			keyword:keyword,
			page:1
		});
	}
	
</script>
</body>
</html>